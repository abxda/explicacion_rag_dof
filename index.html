
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DOF Scripts Explainer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* For smoother animations if not fully covered by Tailwind utilities */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes scaleUp {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    .animate-fadeIn { animation: fadeIn 0.3s ease-out; }
    .animate-scaleUp { animation: scaleUp 0.3s ease-out; }

    /* Basic styling for Markdown generated HTML if Tailwind prose doesn't cover everything */
    .markdown-content h1 { @apply text-2xl font-bold mb-4 text-sky-300; }
    .markdown-content h2 { @apply text-xl font-semibold mb-3 text-sky-400; }
    .markdown-content h3 { @apply text-lg font-semibold mb-2 text-sky-400; }
    .markdown-content p { @apply mb-4 leading-relaxed; }
    .markdown-content ul { @apply list-disc list-inside mb-4 pl-4; }
    .markdown-content ol { @apply list-decimal list-inside mb-4 pl-4; }
    .markdown-content li { @apply mb-1; }
    .markdown-content code { @apply bg-slate-700 text-pink-400 px-1 py-0.5 rounded text-sm font-mono; }
    .markdown-content pre { @apply bg-slate-900 p-3 rounded-md overflow-x-auto mb-4; }
    .markdown-content pre code { @apply bg-transparent p-0; }
    .markdown-content blockquote { @apply border-l-4 border-slate-500 pl-4 italic text-slate-400 mb-4; }
    .markdown-content a { @apply text-teal-400 hover:text-teal-300 underline; }
    .markdown-content strong { @apply font-bold; }
    .markdown-content em { @apply italic; }

  </style>

<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.1.0",
    "react-dom/": "https://esm.sh/react-dom@^19.1.0/",
    "react/": "https://esm.sh/react@^19.1.0/",
    "marked": "https://esm.sh/marked@^13.0.2"
  }
}
</script>
  <script type="module" crossorigin>

var N_=Object.defineProperty;var Nf=x=>{throw TypeError(x)};var M_=(x,s,c)=>s in x?N_(x,s,{enumerable:!0,configurable:!0,writable:!0,value:c}):x[s]=c;var Ee=(x,s,c)=>M_(x,typeof s!="symbol"?s+"":s,c),C_=(x,s,c)=>s.has(x)||Nf("Cannot "+c);var Mf=(x,s,c)=>s.has(x)?Nf("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(x):s.set(x,c);var Rl=(x,s,c)=>(C_(x,s,"access private method"),c);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function c(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(u){if(u.ep)return;u.ep=!0;const f=c(u);fetch(u.href,f)}})();function Xf(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}var bs={exports:{}},Nl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cf;function O_(){if(Cf)return Nl;Cf=1;var x=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function c(o,u,f){var m=null;if(f!==void 0&&(m=""+f),u.key!==void 0&&(m=""+u.key),"key"in u){f={};for(var S in u)S!=="key"&&(f[S]=u[S])}else f=u;return u=f.ref,{$$typeof:x,type:o,key:m,ref:u!==void 0?u:null,props:f}}return Nl.Fragment=s,Nl.jsx=c,Nl.jsxs=c,Nl}var Of;function q_(){return Of||(Of=1,bs.exports=O_()),bs.exports}var z=q_(),vs={exports:{}},P={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qf;function z_(){if(qf)return P;qf=1;var x=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),m=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),G=Symbol.iterator;function j(_){return _===null||typeof _!="object"?null:(_=G&&_[G]||_["@@iterator"],typeof _=="function"?_:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,ne={};function ce(_,q,k){this.props=_,this.context=q,this.refs=ne,this.updater=k||V}ce.prototype.isReactComponent={},ce.prototype.setState=function(_,q){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,q,"setState")},ce.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function He(){}He.prototype=ce.prototype;function je(_,q,k){this.props=_,this.context=q,this.refs=ne,this.updater=k||V}var Ne=je.prototype=new He;Ne.constructor=je,U(Ne,ce.prototype),Ne.isPureReactComponent=!0;var Ye=Array.isArray,$={H:null,A:null,T:null,S:null,V:null},Pe=Object.prototype.hasOwnProperty;function Je(_,q,k,D,B,oe){return k=oe.ref,{$$typeof:x,type:_,key:q,ref:k!==void 0?k:null,props:oe}}function Z(_,q){return Je(_.type,q,void 0,void 0,void 0,_.props)}function te(_){return typeof _=="object"&&_!==null&&_.$$typeof===x}function J(_){var q={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(k){return q[k]})}var Se=/\/+/g;function ie(_,q){return typeof _=="object"&&_!==null&&_.key!=null?J(""+_.key):q.toString(36)}function Ra(){}function Ga(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(Ra,Ra):(_.status="pending",_.then(function(q){_.status==="pending"&&(_.status="fulfilled",_.value=q)},function(q){_.status==="pending"&&(_.status="rejected",_.reason=q)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function Xe(_,q,k,D,B){var oe=typeof _;(oe==="undefined"||oe==="boolean")&&(_=null);var K=!1;if(_===null)K=!0;else switch(oe){case"bigint":case"string":case"number":K=!0;break;case"object":switch(_.$$typeof){case x:case s:K=!0;break;case R:return K=_._init,Xe(K(_._payload),q,k,D,B)}}if(K)return B=B(_),K=D===""?"."+ie(_,0):D,Ye(B)?(k="",K!=null&&(k=K.replace(Se,"$&/")+"/"),Xe(B,q,k,"",function(Fa){return Fa})):B!=null&&(te(B)&&(B=Z(B,k+(B.key==null||_&&_.key===B.key?"":(""+B.key).replace(Se,"$&/")+"/")+K)),q.push(B)),1;K=0;var na=D===""?".":D+":";if(Ye(_))for(var ye=0;ye<_.length;ye++)D=_[ye],oe=na+ie(D,ye),K+=Xe(D,q,k,oe,B);else if(ye=j(_),typeof ye=="function")for(_=ye.call(_),ye=0;!(D=_.next()).done;)D=D.value,oe=na+ie(D,ye++),K+=Xe(D,q,k,oe,B);else if(oe==="object"){if(typeof _.then=="function")return Xe(Ga(_),q,k,D,B);throw q=String(_),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return K}function M(_,q,k){if(_==null)return _;var D=[],B=0;return Xe(_,D,"","",function(oe){return q.call(k,oe,B++)}),D}function L(_){if(_._status===-1){var q=_._result;q=q(),q.then(function(k){(_._status===0||_._status===-1)&&(_._status=1,_._result=k)},function(k){(_._status===0||_._status===-1)&&(_._status=2,_._result=k)}),_._status===-1&&(_._status=0,_._result=q)}if(_._status===1)return _._result.default;throw _._result}var X=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)};function he(){}return P.Children={map:M,forEach:function(_,q,k){M(_,function(){q.apply(this,arguments)},k)},count:function(_){var q=0;return M(_,function(){q++}),q},toArray:function(_){return M(_,function(q){return q})||[]},only:function(_){if(!te(_))throw Error("React.Children.only expected to receive a single React element child.");return _}},P.Component=ce,P.Fragment=c,P.Profiler=u,P.PureComponent=je,P.StrictMode=o,P.Suspense=h,P.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,P.__COMPILER_RUNTIME={__proto__:null,c:function(_){return $.H.useMemoCache(_)}},P.cache=function(_){return function(){return _.apply(null,arguments)}},P.cloneElement=function(_,q,k){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var D=U({},_.props),B=_.key,oe=void 0;if(q!=null)for(K in q.ref!==void 0&&(oe=void 0),q.key!==void 0&&(B=""+q.key),q)!Pe.call(q,K)||K==="key"||K==="__self"||K==="__source"||K==="ref"&&q.ref===void 0||(D[K]=q[K]);var K=arguments.length-2;if(K===1)D.children=k;else if(1<K){for(var na=Array(K),ye=0;ye<K;ye++)na[ye]=arguments[ye+2];D.children=na}return Je(_.type,B,void 0,void 0,oe,D)},P.createContext=function(_){return _={$$typeof:m,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:f,_context:_},_},P.createElement=function(_,q,k){var D,B={},oe=null;if(q!=null)for(D in q.key!==void 0&&(oe=""+q.key),q)Pe.call(q,D)&&D!=="key"&&D!=="__self"&&D!=="__source"&&(B[D]=q[D]);var K=arguments.length-2;if(K===1)B.children=k;else if(1<K){for(var na=Array(K),ye=0;ye<K;ye++)na[ye]=arguments[ye+2];B.children=na}if(_&&_.defaultProps)for(D in K=_.defaultProps,K)B[D]===void 0&&(B[D]=K[D]);return Je(_,oe,void 0,void 0,null,B)},P.createRef=function(){return{current:null}},P.forwardRef=function(_){return{$$typeof:S,render:_}},P.isValidElement=te,P.lazy=function(_){return{$$typeof:R,_payload:{_status:-1,_result:_},_init:L}},P.memo=function(_,q){return{$$typeof:b,type:_,compare:q===void 0?null:q}},P.startTransition=function(_){var q=$.T,k={};$.T=k;try{var D=_(),B=$.S;B!==null&&B(k,D),typeof D=="object"&&D!==null&&typeof D.then=="function"&&D.then(he,X)}catch(oe){X(oe)}finally{$.T=q}},P.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},P.use=function(_){return $.H.use(_)},P.useActionState=function(_,q,k){return $.H.useActionState(_,q,k)},P.useCallback=function(_,q){return $.H.useCallback(_,q)},P.useContext=function(_){return $.H.useContext(_)},P.useDebugValue=function(){},P.useDeferredValue=function(_,q){return $.H.useDeferredValue(_,q)},P.useEffect=function(_,q,k){var D=$.H;if(typeof k=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return D.useEffect(_,q)},P.useId=function(){return $.H.useId()},P.useImperativeHandle=function(_,q,k){return $.H.useImperativeHandle(_,q,k)},P.useInsertionEffect=function(_,q){return $.H.useInsertionEffect(_,q)},P.useLayoutEffect=function(_,q){return $.H.useLayoutEffect(_,q)},P.useMemo=function(_,q){return $.H.useMemo(_,q)},P.useOptimistic=function(_,q){return $.H.useOptimistic(_,q)},P.useReducer=function(_,q,k){return $.H.useReducer(_,q,k)},P.useRef=function(_){return $.H.useRef(_)},P.useState=function(_){return $.H.useState(_)},P.useSyncExternalStore=function(_,q,k){return $.H.useSyncExternalStore(_,q,k)},P.useTransition=function(){return $.H.useTransition()},P.version="19.1.0",P}var zf;function Rs(){return zf||(zf=1,vs.exports=z_()),vs.exports}var Ue=Rs();const D_=Xf(Ue);var Es={exports:{}},Ml={},ys={exports:{}},xs={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Df;function L_(){return Df||(Df=1,function(x){function s(M,L){var X=M.length;M.push(L);e:for(;0<X;){var he=X-1>>>1,_=M[he];if(0<u(_,L))M[he]=L,M[X]=_,X=he;else break e}}function c(M){return M.length===0?null:M[0]}function o(M){if(M.length===0)return null;var L=M[0],X=M.pop();if(X!==L){M[0]=X;e:for(var he=0,_=M.length,q=_>>>1;he<q;){var k=2*(he+1)-1,D=M[k],B=k+1,oe=M[B];if(0>u(D,X))B<_&&0>u(oe,D)?(M[he]=oe,M[B]=X,he=B):(M[he]=D,M[k]=X,he=k);else if(B<_&&0>u(oe,X))M[he]=oe,M[B]=X,he=B;else break e}}return L}function u(M,L){var X=M.sortIndex-L.sortIndex;return X!==0?X:M.id-L.id}if(x.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;x.unstable_now=function(){return f.now()}}else{var m=Date,S=m.now();x.unstable_now=function(){return m.now()-S}}var h=[],b=[],R=1,G=null,j=3,V=!1,U=!1,ne=!1,ce=!1,He=typeof setTimeout=="function"?setTimeout:null,je=typeof clearTimeout=="function"?clearTimeout:null,Ne=typeof setImmediate<"u"?setImmediate:null;function Ye(M){for(var L=c(b);L!==null;){if(L.callback===null)o(b);else if(L.startTime<=M)o(b),L.sortIndex=L.expirationTime,s(h,L);else break;L=c(b)}}function $(M){if(ne=!1,Ye(M),!U)if(c(h)!==null)U=!0,Pe||(Pe=!0,ie());else{var L=c(b);L!==null&&Xe($,L.startTime-M)}}var Pe=!1,Je=-1,Z=5,te=-1;function J(){return ce?!0:!(x.unstable_now()-te<Z)}function Se(){if(ce=!1,Pe){var M=x.unstable_now();te=M;var L=!0;try{e:{U=!1,ne&&(ne=!1,je(Je),Je=-1),V=!0;var X=j;try{a:{for(Ye(M),G=c(h);G!==null&&!(G.expirationTime>M&&J());){var he=G.callback;if(typeof he=="function"){G.callback=null,j=G.priorityLevel;var _=he(G.expirationTime<=M);if(M=x.unstable_now(),typeof _=="function"){G.callback=_,Ye(M),L=!0;break a}G===c(h)&&o(h),Ye(M)}else o(h);G=c(h)}if(G!==null)L=!0;else{var q=c(b);q!==null&&Xe($,q.startTime-M),L=!1}}break e}finally{G=null,j=X,V=!1}L=void 0}}finally{L?ie():Pe=!1}}}var ie;if(typeof Ne=="function")ie=function(){Ne(Se)};else if(typeof MessageChannel<"u"){var Ra=new MessageChannel,Ga=Ra.port2;Ra.port1.onmessage=Se,ie=function(){Ga.postMessage(null)}}else ie=function(){He(Se,0)};function Xe(M,L){Je=He(function(){M(x.unstable_now())},L)}x.unstable_IdlePriority=5,x.unstable_ImmediatePriority=1,x.unstable_LowPriority=4,x.unstable_NormalPriority=3,x.unstable_Profiling=null,x.unstable_UserBlockingPriority=2,x.unstable_cancelCallback=function(M){M.callback=null},x.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<M?Math.floor(1e3/M):5},x.unstable_getCurrentPriorityLevel=function(){return j},x.unstable_next=function(M){switch(j){case 1:case 2:case 3:var L=3;break;default:L=j}var X=j;j=L;try{return M()}finally{j=X}},x.unstable_requestPaint=function(){ce=!0},x.unstable_runWithPriority=function(M,L){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var X=j;j=M;try{return L()}finally{j=X}},x.unstable_scheduleCallback=function(M,L,X){var he=x.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?he+X:he):X=he,M){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=X+_,M={id:R++,callback:L,priorityLevel:M,startTime:X,expirationTime:_,sortIndex:-1},X>he?(M.sortIndex=X,s(b,M),c(h)===null&&M===c(b)&&(ne?(je(Je),Je=-1):ne=!0,Xe($,X-he))):(M.sortIndex=_,s(h,M),U||V||(U=!0,Pe||(Pe=!0,ie()))),M},x.unstable_shouldYield=J,x.unstable_wrapCallback=function(M){var L=j;return function(){var X=j;j=L;try{return M.apply(this,arguments)}finally{j=X}}}}(xs)),xs}var Lf;function G_(){return Lf||(Lf=1,ys.exports=L_()),ys.exports}var Ts={exports:{}},Ke={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gf;function k_(){if(Gf)return Ke;Gf=1;var x=Rs();function s(h){var b="https://react.dev/errors/"+h;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)b+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+h+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(){}var o={d:{f:c,r:function(){throw Error(s(522))},D:c,C:c,L:c,m:c,X:c,S:c,M:c},p:0,findDOMNode:null},u=Symbol.for("react.portal");function f(h,b,R){var G=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:G==null?null:""+G,children:h,containerInfo:b,implementation:R}}var m=x.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function S(h,b){if(h==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return Ke.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Ke.createPortal=function(h,b){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(s(299));return f(h,b,null,R)},Ke.flushSync=function(h){var b=m.T,R=o.p;try{if(m.T=null,o.p=2,h)return h()}finally{m.T=b,o.p=R,o.d.f()}},Ke.preconnect=function(h,b){typeof h=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,o.d.C(h,b))},Ke.prefetchDNS=function(h){typeof h=="string"&&o.d.D(h)},Ke.preinit=function(h,b){if(typeof h=="string"&&b&&typeof b.as=="string"){var R=b.as,G=S(R,b.crossOrigin),j=typeof b.integrity=="string"?b.integrity:void 0,V=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;R==="style"?o.d.S(h,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:G,integrity:j,fetchPriority:V}):R==="script"&&o.d.X(h,{crossOrigin:G,integrity:j,fetchPriority:V,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},Ke.preinitModule=function(h,b){if(typeof h=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var R=S(b.as,b.crossOrigin);o.d.M(h,{crossOrigin:R,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&o.d.M(h)},Ke.preload=function(h,b){if(typeof h=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var R=b.as,G=S(R,b.crossOrigin);o.d.L(h,R,{crossOrigin:G,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},Ke.preloadModule=function(h,b){if(typeof h=="string")if(b){var R=S(b.as,b.crossOrigin);o.d.m(h,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:R,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else o.d.m(h)},Ke.requestFormReset=function(h){o.d.r(h)},Ke.unstable_batchedUpdates=function(h,b){return h(b)},Ke.useFormState=function(h,b,R){return m.H.useFormState(h,b,R)},Ke.useFormStatus=function(){return m.H.useHostTransitionStatus()},Ke.version="19.1.0",Ke}var kf;function w_(){if(kf)return Ts.exports;kf=1;function x(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(x)}catch(s){console.error(s)}}return x(),Ts.exports=k_(),Ts.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wf;function U_(){if(wf)return Ml;wf=1;var x=G_(),s=Rs(),c=w_();function o(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var t=2;t<arguments.length;t++)a+="&args[]="+encodeURIComponent(arguments[t])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var a=e,t=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(t=a.return),e=a.return;while(e)}return a.tag===3?t:null}function m(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function S(e){if(f(e)!==e)throw Error(o(188))}function h(e){var a=e.alternate;if(!a){if(a=f(e),a===null)throw Error(o(188));return a!==e?null:e}for(var t=e,n=a;;){var l=t.return;if(l===null)break;var i=l.alternate;if(i===null){if(n=l.return,n!==null){t=n;continue}break}if(l.child===i.child){for(i=l.child;i;){if(i===t)return S(l),e;if(i===n)return S(l),a;i=i.sibling}throw Error(o(188))}if(t.return!==n.return)t=l,n=i;else{for(var r=!1,d=l.child;d;){if(d===t){r=!0,t=l,n=i;break}if(d===n){r=!0,n=l,t=i;break}d=d.sibling}if(!r){for(d=i.child;d;){if(d===t){r=!0,t=i,n=l;break}if(d===n){r=!0,n=i,t=l;break}d=d.sibling}if(!r)throw Error(o(189))}}if(t.alternate!==n)throw Error(o(190))}if(t.tag!==3)throw Error(o(188));return t.stateNode.current===t?e:a}function b(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=b(e),a!==null)return a;e=e.sibling}return null}var R=Object.assign,G=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),ne=Symbol.for("react.strict_mode"),ce=Symbol.for("react.profiler"),He=Symbol.for("react.provider"),je=Symbol.for("react.consumer"),Ne=Symbol.for("react.context"),Ye=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),Je=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),te=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),Se=Symbol.iterator;function ie(e){return e===null||typeof e!="object"?null:(e=Se&&e[Se]||e["@@iterator"],typeof e=="function"?e:null)}var Ra=Symbol.for("react.client.reference");function Ga(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ra?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case U:return"Fragment";case ce:return"Profiler";case ne:return"StrictMode";case $:return"Suspense";case Pe:return"SuspenseList";case te:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case V:return"Portal";case Ne:return(e.displayName||"Context")+".Provider";case je:return(e._context.displayName||"Context")+".Consumer";case Ye:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Je:return a=e.displayName||null,a!==null?a:Ga(e.type)||"Memo";case Z:a=e._payload,e=e._init;try{return Ga(e(a))}catch{}}return null}var Xe=Array.isArray,M=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},he=[],_=-1;function q(e){return{current:e}}function k(e){0>_||(e.current=he[_],he[_]=null,_--)}function D(e,a){_++,he[_]=e.current,e.current=a}var B=q(null),oe=q(null),K=q(null),na=q(null);function ye(e,a){switch(D(K,a),D(oe,e),D(B,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?ef(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=ef(a),e=af(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}k(B),D(B,e)}function Fa(){k(B),k(oe),k(K)}function to(e){e.memoizedState!==null&&D(na,e);var a=B.current,t=af(a,e.type);a!==t&&(D(oe,e),D(B,t))}function Gl(e){oe.current===e&&(k(B),k(oe)),na.current===e&&(k(na),yl._currentValue=X)}var no=Object.prototype.hasOwnProperty,lo=x.unstable_scheduleCallback,io=x.unstable_cancelCallback,ip=x.unstable_shouldYield,op=x.unstable_requestPaint,Na=x.unstable_now,rp=x.unstable_getCurrentPriorityLevel,Ls=x.unstable_ImmediatePriority,Gs=x.unstable_UserBlockingPriority,kl=x.unstable_NormalPriority,sp=x.unstable_LowPriority,ks=x.unstable_IdlePriority,cp=x.log,up=x.unstable_setDisableYieldValue,Cn=null,la=null;function Wa(e){if(typeof cp=="function"&&up(e),la&&typeof la.setStrictMode=="function")try{la.setStrictMode(Cn,e)}catch{}}var ia=Math.clz32?Math.clz32:pp,dp=Math.log,fp=Math.LN2;function pp(e){return e>>>=0,e===0?32:31-(dp(e)/fp|0)|0}var wl=256,Ul=4194304;function Tt(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function jl(e,a,t){var n=e.pendingLanes;if(n===0)return 0;var l=0,i=e.suspendedLanes,r=e.pingedLanes;e=e.warmLanes;var d=n&134217727;return d!==0?(n=d&~i,n!==0?l=Tt(n):(r&=d,r!==0?l=Tt(r):t||(t=d&~e,t!==0&&(l=Tt(t))))):(d=n&~i,d!==0?l=Tt(d):r!==0?l=Tt(r):t||(t=n&~e,t!==0&&(l=Tt(t)))),l===0?0:a!==0&&a!==l&&(a&i)===0&&(i=l&-l,t=a&-a,i>=t||i===32&&(t&4194048)!==0)?a:l}function On(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function mp(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ws(){var e=wl;return wl<<=1,(wl&4194048)===0&&(wl=256),e}function Us(){var e=Ul;return Ul<<=1,(Ul&62914560)===0&&(Ul=4194304),e}function oo(e){for(var a=[],t=0;31>t;t++)a.push(e);return a}function qn(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _p(e,a,t,n,l,i){var r=e.pendingLanes;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=t,e.entangledLanes&=t,e.errorRecoveryDisabledLanes&=t,e.shellSuspendCounter=0;var d=e.entanglements,p=e.expirationTimes,y=e.hiddenUpdates;for(t=r&~t;0<t;){var N=31-ia(t),O=1<<N;d[N]=0,p[N]=-1;var T=y[N];if(T!==null)for(y[N]=null,N=0;N<T.length;N++){var A=T[N];A!==null&&(A.lane&=-536870913)}t&=~O}n!==0&&js(e,n,0),i!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=i&~(r&~a))}function js(e,a,t){e.pendingLanes|=a,e.suspendedLanes&=~a;var n=31-ia(a);e.entangledLanes|=a,e.entanglements[n]=e.entanglements[n]|1073741824|t&4194090}function Is(e,a){var t=e.entangledLanes|=a;for(e=e.entanglements;t;){var n=31-ia(t),l=1<<n;l&a|e[n]&a&&(e[n]|=a),t&=~l}}function ro(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function so(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Vs(){var e=L.p;return e!==0?e:(e=window.event,e===void 0?32:yf(e.type))}function gp(e,a){var t=L.p;try{return L.p=e,a()}finally{L.p=t}}var et=Math.random().toString(36).slice(2),Qe="__reactFiber$"+et,Fe="__reactProps$"+et,Ht="__reactContainer$"+et,co="__reactEvents$"+et,hp="__reactListeners$"+et,bp="__reactHandles$"+et,Bs="__reactResources$"+et,zn="__reactMarker$"+et;function uo(e){delete e[Qe],delete e[Fe],delete e[co],delete e[hp],delete e[bp]}function Yt(e){var a=e[Qe];if(a)return a;for(var t=e.parentNode;t;){if(a=t[Ht]||t[Qe]){if(t=a.alternate,a.child!==null||t!==null&&t.child!==null)for(e=of(e);e!==null;){if(t=e[Qe])return t;e=of(e)}return a}e=t,t=e.parentNode}return null}function Xt(e){if(e=e[Qe]||e[Ht]){var a=e.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return e}return null}function Dn(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(o(33))}function Qt(e){var a=e[Bs];return a||(a=e[Bs]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Le(e){e[zn]=!0}var Hs=new Set,Ys={};function St(e,a){Zt(e,a),Zt(e+"Capture",a)}function Zt(e,a){for(Ys[e]=a,e=0;e<a.length;e++)Hs.add(a[e])}var vp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xs={},Qs={};function Ep(e){return no.call(Qs,e)?!0:no.call(Xs,e)?!1:vp.test(e)?Qs[e]=!0:(Xs[e]=!0,!1)}function Il(e,a,t){if(Ep(a))if(t===null)e.removeAttribute(a);else{switch(typeof t){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var n=a.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+t)}}function Vl(e,a,t){if(t===null)e.removeAttribute(a);else{switch(typeof t){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+t)}}function ka(e,a,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttributeNS(a,t,""+n)}}var fo,Zs;function Kt(e){if(fo===void 0)try{throw Error()}catch(t){var a=t.stack.trim().match(/\n( *(at )?)/);fo=a&&a[1]||"",Zs=-1<t.stack.indexOf(`
    at`)?" (<anonymous>)":-1<t.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fo+e+Zs}var po=!1;function mo(e,a){if(!e||po)return"";po=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(a){var O=function(){throw Error()};if(Object.defineProperty(O.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(O,[])}catch(A){var T=A}Reflect.construct(e,[],O)}else{try{O.call()}catch(A){T=A}e.call(O.prototype)}}else{try{throw Error()}catch(A){T=A}(O=e())&&typeof O.catch=="function"&&O.catch(function(){})}}catch(A){if(A&&T&&typeof A.stack=="string")return[A.stack,T.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=n.DetermineComponentFrameRoot(),r=i[0],d=i[1];if(r&&d){var p=r.split(`
`),y=d.split(`
`);for(l=n=0;n<p.length&&!p[n].includes("DetermineComponentFrameRoot");)n++;for(;l<y.length&&!y[l].includes("DetermineComponentFrameRoot");)l++;if(n===p.length||l===y.length)for(n=p.length-1,l=y.length-1;1<=n&&0<=l&&p[n]!==y[l];)l--;for(;1<=n&&0<=l;n--,l--)if(p[n]!==y[l]){if(n!==1||l!==1)do if(n--,l--,0>l||p[n]!==y[l]){var N=`
`+p[n].replace(" at new "," at ");return e.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",e.displayName)),N}while(1<=n&&0<=l);break}}}finally{po=!1,Error.prepareStackTrace=t}return(t=e?e.displayName||e.name:"")?Kt(t):""}function yp(e){switch(e.tag){case 26:case 27:case 5:return Kt(e.type);case 16:return Kt("Lazy");case 13:return Kt("Suspense");case 19:return Kt("SuspenseList");case 0:case 15:return mo(e.type,!1);case 11:return mo(e.type.render,!1);case 1:return mo(e.type,!0);case 31:return Kt("Activity");default:return""}}function Ks(e){try{var a="";do a+=yp(e),e=e.return;while(e);return a}catch(t){return`
Error generating stack: `+t.message+`
`+t.stack}}function ma(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ps(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function xp(e){var a=Ps(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,a),n=""+e[a];if(!e.hasOwnProperty(a)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var l=t.get,i=t.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return l.call(this)},set:function(r){n=""+r,i.call(this,r)}}),Object.defineProperty(e,a,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function Bl(e){e._valueTracker||(e._valueTracker=xp(e))}function Js(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var t=a.getValue(),n="";return e&&(n=Ps(e)?e.checked?"true":"false":e.value),e=n,e!==t?(a.setValue(e),!0):!1}function Hl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Tp=/[\n"\\]/g;function _a(e){return e.replace(Tp,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function _o(e,a,t,n,l,i,r,d){e.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?e.type=r:e.removeAttribute("type"),a!=null?r==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+ma(a)):e.value!==""+ma(a)&&(e.value=""+ma(a)):r!=="submit"&&r!=="reset"||e.removeAttribute("value"),a!=null?go(e,r,ma(a)):t!=null?go(e,r,ma(t)):n!=null&&e.removeAttribute("value"),l==null&&i!=null&&(e.defaultChecked=!!i),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.name=""+ma(d):e.removeAttribute("name")}function $s(e,a,t,n,l,i,r,d){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),a!=null||t!=null){if(!(i!=="submit"&&i!=="reset"||a!=null))return;t=t!=null?""+ma(t):"",a=a!=null?""+ma(a):t,d||a===e.value||(e.value=a),e.defaultValue=a}n=n??l,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=d?e.checked:!!n,e.defaultChecked=!!n,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.name=r)}function go(e,a,t){a==="number"&&Hl(e.ownerDocument)===e||e.defaultValue===""+t||(e.defaultValue=""+t)}function Pt(e,a,t,n){if(e=e.options,a){a={};for(var l=0;l<t.length;l++)a["$"+t[l]]=!0;for(t=0;t<e.length;t++)l=a.hasOwnProperty("$"+e[t].value),e[t].selected!==l&&(e[t].selected=l),l&&n&&(e[t].defaultSelected=!0)}else{for(t=""+ma(t),a=null,l=0;l<e.length;l++){if(e[l].value===t){e[l].selected=!0,n&&(e[l].defaultSelected=!0);return}a!==null||e[l].disabled||(a=e[l])}a!==null&&(a.selected=!0)}}function Fs(e,a,t){if(a!=null&&(a=""+ma(a),a!==e.value&&(e.value=a),t==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=t!=null?""+ma(t):""}function Ws(e,a,t,n){if(a==null){if(n!=null){if(t!=null)throw Error(o(92));if(Xe(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}t==null&&(t=""),a=t}t=ma(a),e.defaultValue=t,n=e.textContent,n===t&&n!==""&&n!==null&&(e.value=n)}function Jt(e,a){if(a){var t=e.firstChild;if(t&&t===e.lastChild&&t.nodeType===3){t.nodeValue=a;return}}e.textContent=a}var Sp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ec(e,a,t){var n=a.indexOf("--")===0;t==null||typeof t=="boolean"||t===""?n?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":n?e.setProperty(a,t):typeof t!="number"||t===0||Sp.has(a)?a==="float"?e.cssFloat=t:e[a]=(""+t).trim():e[a]=t+"px"}function ac(e,a,t){if(a!=null&&typeof a!="object")throw Error(o(62));if(e=e.style,t!=null){for(var n in t)!t.hasOwnProperty(n)||a!=null&&a.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var l in a)n=a[l],a.hasOwnProperty(l)&&t[l]!==n&&ec(e,l,n)}else for(var i in a)a.hasOwnProperty(i)&&ec(e,i,a[i])}function ho(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ap=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yl(e){return Rp.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var bo=null;function vo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $t=null,Ft=null;function tc(e){var a=Xt(e);if(a&&(e=a.stateNode)){var t=e[Fe]||null;e:switch(e=a.stateNode,a.type){case"input":if(_o(e,t.value,t.defaultValue,t.defaultValue,t.checked,t.defaultChecked,t.type,t.name),a=t.name,t.type==="radio"&&a!=null){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll('input[name="'+_a(""+a)+'"][type="radio"]'),a=0;a<t.length;a++){var n=t[a];if(n!==e&&n.form===e.form){var l=n[Fe]||null;if(!l)throw Error(o(90));_o(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(a=0;a<t.length;a++)n=t[a],n.form===e.form&&Js(n)}break e;case"textarea":Fs(e,t.value,t.defaultValue);break e;case"select":a=t.value,a!=null&&Pt(e,!!t.multiple,a,!1)}}}var Eo=!1;function nc(e,a,t){if(Eo)return e(a,t);Eo=!0;try{var n=e(a);return n}finally{if(Eo=!1,($t!==null||Ft!==null)&&(Ci(),$t&&(a=$t,e=Ft,Ft=$t=null,tc(a),e)))for(a=0;a<e.length;a++)tc(e[a])}}function Ln(e,a){var t=e.stateNode;if(t===null)return null;var n=t[Fe]||null;if(n===null)return null;t=n[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(t&&typeof t!="function")throw Error(o(231,a,typeof t));return t}var wa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yo=!1;if(wa)try{var Gn={};Object.defineProperty(Gn,"passive",{get:function(){yo=!0}}),window.addEventListener("test",Gn,Gn),window.removeEventListener("test",Gn,Gn)}catch{yo=!1}var at=null,xo=null,Xl=null;function lc(){if(Xl)return Xl;var e,a=xo,t=a.length,n,l="value"in at?at.value:at.textContent,i=l.length;for(e=0;e<t&&a[e]===l[e];e++);var r=t-e;for(n=1;n<=r&&a[t-n]===l[i-n];n++);return Xl=l.slice(e,1<n?1-n:void 0)}function Ql(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function Zl(){return!0}function ic(){return!1}function We(e){function a(t,n,l,i,r){this._reactName=t,this._targetInst=l,this.type=n,this.nativeEvent=i,this.target=r,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(t=e[d],this[d]=t?t(i):i[d]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zl:ic,this.isPropagationStopped=ic,this}return R(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Zl)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Zl)},persist:function(){},isPersistent:Zl}),a}var At={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kl=We(At),kn=R({},At,{view:0,detail:0}),Np=We(kn),To,So,wn,Pl=R({},kn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ro,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wn&&(wn&&e.type==="mousemove"?(To=e.screenX-wn.screenX,So=e.screenY-wn.screenY):So=To=0,wn=e),To)},movementY:function(e){return"movementY"in e?e.movementY:So}}),oc=We(Pl),Mp=R({},Pl,{dataTransfer:0}),Cp=We(Mp),Op=R({},kn,{relatedTarget:0}),Ao=We(Op),qp=R({},At,{animationName:0,elapsedTime:0,pseudoElement:0}),zp=We(qp),Dp=R({},At,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Lp=We(Dp),Gp=R({},At,{data:0}),rc=We(Gp),kp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Up={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jp(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=Up[e])?!!a[e]:!1}function Ro(){return jp}var Ip=R({},kn,{key:function(e){if(e.key){var a=kp[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=Ql(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ro,charCode:function(e){return e.type==="keypress"?Ql(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ql(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Vp=We(Ip),Bp=R({},Pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sc=We(Bp),Hp=R({},kn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ro}),Yp=We(Hp),Xp=R({},At,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qp=We(Xp),Zp=R({},Pl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Kp=We(Zp),Pp=R({},At,{newState:0,oldState:0}),Jp=We(Pp),$p=[9,13,27,32],No=wa&&"CompositionEvent"in window,Un=null;wa&&"documentMode"in document&&(Un=document.documentMode);var Fp=wa&&"TextEvent"in window&&!Un,cc=wa&&(!No||Un&&8<Un&&11>=Un),uc=" ",dc=!1;function fc(e,a){switch(e){case"keyup":return $p.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Wt=!1;function Wp(e,a){switch(e){case"compositionend":return pc(a);case"keypress":return a.which!==32?null:(dc=!0,uc);case"textInput":return e=a.data,e===uc&&dc?null:e;default:return null}}function em(e,a){if(Wt)return e==="compositionend"||!No&&fc(e,a)?(e=lc(),Xl=xo=at=null,Wt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return cc&&a.locale!=="ko"?null:a.data;default:return null}}var am={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mc(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!am[e.type]:a==="textarea"}function _c(e,a,t,n){$t?Ft?Ft.push(n):Ft=[n]:$t=n,a=Gi(a,"onChange"),0<a.length&&(t=new Kl("onChange","change",null,t,n),e.push({event:t,listeners:a}))}var jn=null,In=null;function tm(e){Pd(e,0)}function Jl(e){var a=Dn(e);if(Js(a))return e}function gc(e,a){if(e==="change")return a}var hc=!1;if(wa){var Mo;if(wa){var Co="oninput"in document;if(!Co){var bc=document.createElement("div");bc.setAttribute("oninput","return;"),Co=typeof bc.oninput=="function"}Mo=Co}else Mo=!1;hc=Mo&&(!document.documentMode||9<document.documentMode)}function vc(){jn&&(jn.detachEvent("onpropertychange",Ec),In=jn=null)}function Ec(e){if(e.propertyName==="value"&&Jl(In)){var a=[];_c(a,In,e,vo(e)),nc(tm,a)}}function nm(e,a,t){e==="focusin"?(vc(),jn=a,In=t,jn.attachEvent("onpropertychange",Ec)):e==="focusout"&&vc()}function lm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jl(In)}function im(e,a){if(e==="click")return Jl(a)}function om(e,a){if(e==="input"||e==="change")return Jl(a)}function rm(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var oa=typeof Object.is=="function"?Object.is:rm;function Vn(e,a){if(oa(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var t=Object.keys(e),n=Object.keys(a);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var l=t[n];if(!no.call(a,l)||!oa(e[l],a[l]))return!1}return!0}function yc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xc(e,a){var t=yc(e);e=0;for(var n;t;){if(t.nodeType===3){if(n=e+t.textContent.length,e<=a&&n>=a)return{node:t,offset:a-e};e=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=yc(t)}}function Tc(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?Tc(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Sc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=Hl(e.document);a instanceof e.HTMLIFrameElement;){try{var t=typeof a.contentWindow.location.href=="string"}catch{t=!1}if(t)e=a.contentWindow;else break;a=Hl(e.document)}return a}function Oo(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var sm=wa&&"documentMode"in document&&11>=document.documentMode,en=null,qo=null,Bn=null,zo=!1;function Ac(e,a,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;zo||en==null||en!==Hl(n)||(n=en,"selectionStart"in n&&Oo(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Bn&&Vn(Bn,n)||(Bn=n,n=Gi(qo,"onSelect"),0<n.length&&(a=new Kl("onSelect","select",null,a,t),e.push({event:a,listeners:n}),a.target=en)))}function Rt(e,a){var t={};return t[e.toLowerCase()]=a.toLowerCase(),t["Webkit"+e]="webkit"+a,t["Moz"+e]="moz"+a,t}var an={animationend:Rt("Animation","AnimationEnd"),animationiteration:Rt("Animation","AnimationIteration"),animationstart:Rt("Animation","AnimationStart"),transitionrun:Rt("Transition","TransitionRun"),transitionstart:Rt("Transition","TransitionStart"),transitioncancel:Rt("Transition","TransitionCancel"),transitionend:Rt("Transition","TransitionEnd")},Do={},Rc={};wa&&(Rc=document.createElement("div").style,"AnimationEvent"in window||(delete an.animationend.animation,delete an.animationiteration.animation,delete an.animationstart.animation),"TransitionEvent"in window||delete an.transitionend.transition);function Nt(e){if(Do[e])return Do[e];if(!an[e])return e;var a=an[e],t;for(t in a)if(a.hasOwnProperty(t)&&t in Rc)return Do[e]=a[t];return e}var Nc=Nt("animationend"),Mc=Nt("animationiteration"),Cc=Nt("animationstart"),cm=Nt("transitionrun"),um=Nt("transitionstart"),dm=Nt("transitioncancel"),Oc=Nt("transitionend"),qc=new Map,Lo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lo.push("scrollEnd");function Ta(e,a){qc.set(e,a),St(a,[e])}var zc=new WeakMap;function ga(e,a){if(typeof e=="object"&&e!==null){var t=zc.get(e);return t!==void 0?t:(a={value:e,source:a,stack:Ks(a)},zc.set(e,a),a)}return{value:e,source:a,stack:Ks(a)}}var ha=[],tn=0,Go=0;function $l(){for(var e=tn,a=Go=tn=0;a<e;){var t=ha[a];ha[a++]=null;var n=ha[a];ha[a++]=null;var l=ha[a];ha[a++]=null;var i=ha[a];if(ha[a++]=null,n!==null&&l!==null){var r=n.pending;r===null?l.next=l:(l.next=r.next,r.next=l),n.pending=l}i!==0&&Dc(t,l,i)}}function Fl(e,a,t,n){ha[tn++]=e,ha[tn++]=a,ha[tn++]=t,ha[tn++]=n,Go|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function ko(e,a,t,n){return Fl(e,a,t,n),Wl(e)}function nn(e,a){return Fl(e,null,null,a),Wl(e)}function Dc(e,a,t){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t);for(var l=!1,i=e.return;i!==null;)i.childLanes|=t,n=i.alternate,n!==null&&(n.childLanes|=t),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(l=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,l&&a!==null&&(l=31-ia(t),e=i.hiddenUpdates,n=e[l],n===null?e[l]=[a]:n.push(a),a.lane=t|536870912),i):null}function Wl(e){if(50<pl)throw pl=0,Br=null,Error(o(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var ln={};function fm(e,a,t,n){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ra(e,a,t,n){return new fm(e,a,t,n)}function wo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ua(e,a){var t=e.alternate;return t===null?(t=ra(e.tag,a,e.key,e.mode),t.elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=a,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=e.flags&65011712,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,a=e.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t.refCleanup=e.refCleanup,t}function Lc(e,a){e.flags&=65011714;var t=e.alternate;return t===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=t.childLanes,e.lanes=t.lanes,e.child=t.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=t.memoizedProps,e.memoizedState=t.memoizedState,e.updateQueue=t.updateQueue,e.type=t.type,a=t.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function ei(e,a,t,n,l,i){var r=0;if(n=e,typeof e=="function")wo(e)&&(r=1);else if(typeof e=="string")r=m_(e,t,B.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case te:return e=ra(31,t,a,l),e.elementType=te,e.lanes=i,e;case U:return Mt(t.children,l,i,a);case ne:r=8,l|=24;break;case ce:return e=ra(12,t,a,l|2),e.elementType=ce,e.lanes=i,e;case $:return e=ra(13,t,a,l),e.elementType=$,e.lanes=i,e;case Pe:return e=ra(19,t,a,l),e.elementType=Pe,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case He:case Ne:r=10;break e;case je:r=9;break e;case Ye:r=11;break e;case Je:r=14;break e;case Z:r=16,n=null;break e}r=29,t=Error(o(130,e===null?"null":typeof e,"")),n=null}return a=ra(r,t,a,l),a.elementType=e,a.type=n,a.lanes=i,a}function Mt(e,a,t,n){return e=ra(7,e,n,a),e.lanes=t,e}function Uo(e,a,t){return e=ra(6,e,null,a),e.lanes=t,e}function jo(e,a,t){return a=ra(4,e.children!==null?e.children:[],e.key,a),a.lanes=t,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var on=[],rn=0,ai=null,ti=0,ba=[],va=0,Ct=null,ja=1,Ia="";function Ot(e,a){on[rn++]=ti,on[rn++]=ai,ai=e,ti=a}function Gc(e,a,t){ba[va++]=ja,ba[va++]=Ia,ba[va++]=Ct,Ct=e;var n=ja;e=Ia;var l=32-ia(n)-1;n&=~(1<<l),t+=1;var i=32-ia(a)+l;if(30<i){var r=l-l%5;i=(n&(1<<r)-1).toString(32),n>>=r,l-=r,ja=1<<32-ia(a)+l|t<<l|n,Ia=i+e}else ja=1<<i|t<<l|n,Ia=e}function Io(e){e.return!==null&&(Ot(e,1),Gc(e,1,0))}function Vo(e){for(;e===ai;)ai=on[--rn],on[rn]=null,ti=on[--rn],on[rn]=null;for(;e===Ct;)Ct=ba[--va],ba[va]=null,Ia=ba[--va],ba[va]=null,ja=ba[--va],ba[va]=null}var $e=null,Ae=null,se=!1,qt=null,Ma=!1,Bo=Error(o(519));function zt(e){var a=Error(o(418,""));throw Xn(ga(a,e)),Bo}function kc(e){var a=e.stateNode,t=e.type,n=e.memoizedProps;switch(a[Qe]=e,a[Fe]=n,t){case"dialog":ae("cancel",a),ae("close",a);break;case"iframe":case"object":case"embed":ae("load",a);break;case"video":case"audio":for(t=0;t<_l.length;t++)ae(_l[t],a);break;case"source":ae("error",a);break;case"img":case"image":case"link":ae("error",a),ae("load",a);break;case"details":ae("toggle",a);break;case"input":ae("invalid",a),$s(a,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),Bl(a);break;case"select":ae("invalid",a);break;case"textarea":ae("invalid",a),Ws(a,n.value,n.defaultValue,n.children),Bl(a)}t=n.children,typeof t!="string"&&typeof t!="number"&&typeof t!="bigint"||a.textContent===""+t||n.suppressHydrationWarning===!0||Wd(a.textContent,t)?(n.popover!=null&&(ae("beforetoggle",a),ae("toggle",a)),n.onScroll!=null&&ae("scroll",a),n.onScrollEnd!=null&&ae("scrollend",a),n.onClick!=null&&(a.onclick=ki),a=!0):a=!1,a||zt(e)}function wc(e){for($e=e.return;$e;)switch($e.tag){case 5:case 13:Ma=!1;return;case 27:case 3:Ma=!0;return;default:$e=$e.return}}function Hn(e){if(e!==$e)return!1;if(!se)return wc(e),se=!0,!1;var a=e.tag,t;if((t=a!==3&&a!==27)&&((t=a===5)&&(t=e.type,t=!(t!=="form"&&t!=="button")||ls(e.type,e.memoizedProps)),t=!t),t&&Ae&&zt(e),wc(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,a=0;e;){if(e.nodeType===8)if(t=e.data,t==="/$"){if(a===0){Ae=Aa(e.nextSibling);break e}a--}else t!=="$"&&t!=="$!"&&t!=="$?"||a++;e=e.nextSibling}Ae=null}}else a===27?(a=Ae,ht(e.type)?(e=ss,ss=null,Ae=e):Ae=a):Ae=$e?Aa(e.stateNode.nextSibling):null;return!0}function Yn(){Ae=$e=null,se=!1}function Uc(){var e=qt;return e!==null&&(ta===null?ta=e:ta.push.apply(ta,e),qt=null),e}function Xn(e){qt===null?qt=[e]:qt.push(e)}var Ho=q(null),Dt=null,Va=null;function tt(e,a,t){D(Ho,a._currentValue),a._currentValue=t}function Ba(e){e._currentValue=Ho.current,k(Ho)}function Yo(e,a,t){for(;e!==null;){var n=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,n!==null&&(n.childLanes|=a)):n!==null&&(n.childLanes&a)!==a&&(n.childLanes|=a),e===t)break;e=e.return}}function Xo(e,a,t,n){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var i=l.dependencies;if(i!==null){var r=l.child;i=i.firstContext;e:for(;i!==null;){var d=i;i=l;for(var p=0;p<a.length;p++)if(d.context===a[p]){i.lanes|=t,d=i.alternate,d!==null&&(d.lanes|=t),Yo(i.return,t,e),n||(r=null);break e}i=d.next}}else if(l.tag===18){if(r=l.return,r===null)throw Error(o(341));r.lanes|=t,i=r.alternate,i!==null&&(i.lanes|=t),Yo(r,t,e),r=null}else r=l.child;if(r!==null)r.return=l;else for(r=l;r!==null;){if(r===e){r=null;break}if(l=r.sibling,l!==null){l.return=r.return,r=l;break}r=r.return}l=r}}function Qn(e,a,t,n){e=null;for(var l=a,i=!1;l!==null;){if(!i){if((l.flags&524288)!==0)i=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var r=l.alternate;if(r===null)throw Error(o(387));if(r=r.memoizedProps,r!==null){var d=l.type;oa(l.pendingProps.value,r.value)||(e!==null?e.push(d):e=[d])}}else if(l===na.current){if(r=l.alternate,r===null)throw Error(o(387));r.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(yl):e=[yl])}l=l.return}e!==null&&Xo(a,e,t,n),a.flags|=262144}function ni(e){for(e=e.firstContext;e!==null;){if(!oa(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Lt(e){Dt=e,Va=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ze(e){return jc(Dt,e)}function li(e,a){return Dt===null&&Lt(e),jc(e,a)}function jc(e,a){var t=a._currentValue;if(a={context:a,memoizedValue:t,next:null},Va===null){if(e===null)throw Error(o(308));Va=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else Va=Va.next=a;return t}var pm=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){a.aborted=!0,e.forEach(function(t){return t()})}},mm=x.unstable_scheduleCallback,_m=x.unstable_NormalPriority,ze={$$typeof:Ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qo(){return{controller:new pm,data:new Map,refCount:0}}function Zn(e){e.refCount--,e.refCount===0&&mm(_m,function(){e.controller.abort()})}var Kn=null,Zo=0,sn=0,cn=null;function gm(e,a){if(Kn===null){var t=Kn=[];Zo=0,sn=Pr(),cn={status:"pending",value:void 0,then:function(n){t.push(n)}}}return Zo++,a.then(Ic,Ic),a}function Ic(){if(--Zo===0&&Kn!==null){cn!==null&&(cn.status="fulfilled");var e=Kn;Kn=null,sn=0,cn=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function hm(e,a){var t=[],n={status:"pending",value:null,reason:null,then:function(l){t.push(l)}};return e.then(function(){n.status="fulfilled",n.value=a;for(var l=0;l<t.length;l++)(0,t[l])(a)},function(l){for(n.status="rejected",n.reason=l,l=0;l<t.length;l++)(0,t[l])(void 0)}),n}var Vc=M.S;M.S=function(e,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&gm(e,a),Vc!==null&&Vc(e,a)};var Gt=q(null);function Ko(){var e=Gt.current;return e!==null?e:ve.pooledCache}function ii(e,a){a===null?D(Gt,Gt.current):D(Gt,a.pool)}function Bc(){var e=Ko();return e===null?null:{parent:ze._currentValue,pool:e}}var Pn=Error(o(460)),Hc=Error(o(474)),oi=Error(o(542)),Po={then:function(){}};function Yc(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ri(){}function Xc(e,a,t){switch(t=e[t],t===void 0?e.push(a):t!==a&&(a.then(ri,ri),a=t),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,Zc(e),e;default:if(typeof a.status=="string")a.then(ri,ri);else{if(e=ve,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=a,e.status="pending",e.then(function(n){if(a.status==="pending"){var l=a;l.status="fulfilled",l.value=n}},function(n){if(a.status==="pending"){var l=a;l.status="rejected",l.reason=n}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,Zc(e),e}throw Jn=a,Pn}}var Jn=null;function Qc(){if(Jn===null)throw Error(o(459));var e=Jn;return Jn=null,e}function Zc(e){if(e===Pn||e===oi)throw Error(o(483))}var nt=!1;function Jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $o(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function lt(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function it(e,a,t){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(ue&2)!==0){var l=n.pending;return l===null?a.next=a:(a.next=l.next,l.next=a),n.pending=a,a=Wl(e),Dc(e,null,t),a}return Fl(e,n,a,t),Wl(e)}function $n(e,a,t){if(a=a.updateQueue,a!==null&&(a=a.shared,(t&4194048)!==0)){var n=a.lanes;n&=e.pendingLanes,t|=n,a.lanes=t,Is(e,t)}}function Fo(e,a){var t=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var l=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var r={lane:t.lane,tag:t.tag,payload:t.payload,callback:null,next:null};i===null?l=i=r:i=i.next=r,t=t.next}while(t!==null);i===null?l=i=a:i=i.next=a}else l=i=a;t={baseState:n.baseState,firstBaseUpdate:l,lastBaseUpdate:i,shared:n.shared,callbacks:n.callbacks},e.updateQueue=t;return}e=t.lastBaseUpdate,e===null?t.firstBaseUpdate=a:e.next=a,t.lastBaseUpdate=a}var Wo=!1;function Fn(){if(Wo){var e=cn;if(e!==null)throw e}}function Wn(e,a,t,n){Wo=!1;var l=e.updateQueue;nt=!1;var i=l.firstBaseUpdate,r=l.lastBaseUpdate,d=l.shared.pending;if(d!==null){l.shared.pending=null;var p=d,y=p.next;p.next=null,r===null?i=y:r.next=y,r=p;var N=e.alternate;N!==null&&(N=N.updateQueue,d=N.lastBaseUpdate,d!==r&&(d===null?N.firstBaseUpdate=y:d.next=y,N.lastBaseUpdate=p))}if(i!==null){var O=l.baseState;r=0,N=y=p=null,d=i;do{var T=d.lane&-536870913,A=T!==d.lane;if(A?(le&T)===T:(n&T)===T){T!==0&&T===sn&&(Wo=!0),N!==null&&(N=N.next={lane:0,tag:d.tag,payload:d.payload,callback:null,next:null});e:{var Q=e,H=d;T=a;var _e=t;switch(H.tag){case 1:if(Q=H.payload,typeof Q=="function"){O=Q.call(_e,O,T);break e}O=Q;break e;case 3:Q.flags=Q.flags&-65537|128;case 0:if(Q=H.payload,T=typeof Q=="function"?Q.call(_e,O,T):Q,T==null)break e;O=R({},O,T);break e;case 2:nt=!0}}T=d.callback,T!==null&&(e.flags|=64,A&&(e.flags|=8192),A=l.callbacks,A===null?l.callbacks=[T]:A.push(T))}else A={lane:T,tag:d.tag,payload:d.payload,callback:d.callback,next:null},N===null?(y=N=A,p=O):N=N.next=A,r|=T;if(d=d.next,d===null){if(d=l.shared.pending,d===null)break;A=d,d=A.next,A.next=null,l.lastBaseUpdate=A,l.shared.pending=null}}while(!0);N===null&&(p=O),l.baseState=p,l.firstBaseUpdate=y,l.lastBaseUpdate=N,i===null&&(l.shared.lanes=0),pt|=r,e.lanes=r,e.memoizedState=O}}function Kc(e,a){if(typeof e!="function")throw Error(o(191,e));e.call(a)}function Pc(e,a){var t=e.callbacks;if(t!==null)for(e.callbacks=null,e=0;e<t.length;e++)Kc(t[e],a)}var un=q(null),si=q(0);function Jc(e,a){e=Pa,D(si,e),D(un,a),Pa=e|a.baseLanes}function er(){D(si,Pa),D(un,un.current)}function ar(){Pa=si.current,k(un),k(si)}var ot=0,F=null,pe=null,Oe=null,ci=!1,dn=!1,kt=!1,ui=0,el=0,fn=null,bm=0;function Me(){throw Error(o(321))}function tr(e,a){if(a===null)return!1;for(var t=0;t<a.length&&t<e.length;t++)if(!oa(e[t],a[t]))return!1;return!0}function nr(e,a,t,n,l,i){return ot=i,F=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,M.H=e===null||e.memoizedState===null?Du:Lu,kt=!1,i=t(n,l),kt=!1,dn&&(i=Fc(a,t,n,l)),$c(e),i}function $c(e){M.H=gi;var a=pe!==null&&pe.next!==null;if(ot=0,Oe=pe=F=null,ci=!1,el=0,fn=null,a)throw Error(o(300));e===null||Ge||(e=e.dependencies,e!==null&&ni(e)&&(Ge=!0))}function Fc(e,a,t,n){F=e;var l=0;do{if(dn&&(fn=null),el=0,dn=!1,25<=l)throw Error(o(301));if(l+=1,Oe=pe=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}M.H=Am,i=a(t,n)}while(dn);return i}function vm(){var e=M.H,a=e.useState()[0];return a=typeof a.then=="function"?al(a):a,e=e.useState()[0],(pe!==null?pe.memoizedState:null)!==e&&(F.flags|=1024),a}function lr(){var e=ui!==0;return ui=0,e}function ir(e,a,t){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~t}function or(e){if(ci){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}ci=!1}ot=0,Oe=pe=F=null,dn=!1,el=ui=0,fn=null}function ea(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?F.memoizedState=Oe=e:Oe=Oe.next=e,Oe}function qe(){if(pe===null){var e=F.alternate;e=e!==null?e.memoizedState:null}else e=pe.next;var a=Oe===null?F.memoizedState:Oe.next;if(a!==null)Oe=a,pe=e;else{if(e===null)throw F.alternate===null?Error(o(467)):Error(o(310));pe=e,e={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},Oe===null?F.memoizedState=Oe=e:Oe=Oe.next=e}return Oe}function rr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function al(e){var a=el;return el+=1,fn===null&&(fn=[]),e=Xc(fn,e,a),a=F,(Oe===null?a.memoizedState:Oe.next)===null&&(a=a.alternate,M.H=a===null||a.memoizedState===null?Du:Lu),e}function di(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return al(e);if(e.$$typeof===Ne)return Ze(e)}throw Error(o(438,String(e)))}function sr(e){var a=null,t=F.updateQueue;if(t!==null&&(a=t.memoCache),a==null){var n=F.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(a={data:n.data.map(function(l){return l.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),t===null&&(t=rr(),F.updateQueue=t),t.memoCache=a,t=a.data[a.index],t===void 0)for(t=a.data[a.index]=Array(e),n=0;n<e;n++)t[n]=J;return a.index++,t}function Ha(e,a){return typeof a=="function"?a(e):a}function fi(e){var a=qe();return cr(a,pe,e)}function cr(e,a,t){var n=e.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=t;var l=e.baseQueue,i=n.pending;if(i!==null){if(l!==null){var r=l.next;l.next=i.next,i.next=r}a.baseQueue=l=i,n.pending=null}if(i=e.baseState,l===null)e.memoizedState=i;else{a=l.next;var d=r=null,p=null,y=a,N=!1;do{var O=y.lane&-536870913;if(O!==y.lane?(le&O)===O:(ot&O)===O){var T=y.revertLane;if(T===0)p!==null&&(p=p.next={lane:0,revertLane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),O===sn&&(N=!0);else if((ot&T)===T){y=y.next,T===sn&&(N=!0);continue}else O={lane:0,revertLane:y.revertLane,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null},p===null?(d=p=O,r=i):p=p.next=O,F.lanes|=T,pt|=T;O=y.action,kt&&t(i,O),i=y.hasEagerState?y.eagerState:t(i,O)}else T={lane:O,revertLane:y.revertLane,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null},p===null?(d=p=T,r=i):p=p.next=T,F.lanes|=O,pt|=O;y=y.next}while(y!==null&&y!==a);if(p===null?r=i:p.next=d,!oa(i,e.memoizedState)&&(Ge=!0,N&&(t=cn,t!==null)))throw t;e.memoizedState=i,e.baseState=r,e.baseQueue=p,n.lastRenderedState=i}return l===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function ur(e){var a=qe(),t=a.queue;if(t===null)throw Error(o(311));t.lastRenderedReducer=e;var n=t.dispatch,l=t.pending,i=a.memoizedState;if(l!==null){t.pending=null;var r=l=l.next;do i=e(i,r.action),r=r.next;while(r!==l);oa(i,a.memoizedState)||(Ge=!0),a.memoizedState=i,a.baseQueue===null&&(a.baseState=i),t.lastRenderedState=i}return[i,n]}function Wc(e,a,t){var n=F,l=qe(),i=se;if(i){if(t===void 0)throw Error(o(407));t=t()}else t=a();var r=!oa((pe||l).memoizedState,t);r&&(l.memoizedState=t,Ge=!0),l=l.queue;var d=tu.bind(null,n,l,e);if(tl(2048,8,d,[e]),l.getSnapshot!==a||r||Oe!==null&&Oe.memoizedState.tag&1){if(n.flags|=2048,pn(9,pi(),au.bind(null,n,l,t,a),null),ve===null)throw Error(o(349));i||(ot&124)!==0||eu(n,a,t)}return t}function eu(e,a,t){e.flags|=16384,e={getSnapshot:a,value:t},a=F.updateQueue,a===null?(a=rr(),F.updateQueue=a,a.stores=[e]):(t=a.stores,t===null?a.stores=[e]:t.push(e))}function au(e,a,t,n){a.value=t,a.getSnapshot=n,nu(a)&&lu(e)}function tu(e,a,t){return t(function(){nu(a)&&lu(e)})}function nu(e){var a=e.getSnapshot;e=e.value;try{var t=a();return!oa(e,t)}catch{return!0}}function lu(e){var a=nn(e,2);a!==null&&fa(a,e,2)}function dr(e){var a=ea();if(typeof e=="function"){var t=e;if(e=t(),kt){Wa(!0);try{t()}finally{Wa(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:e},a}function iu(e,a,t,n){return e.baseState=t,cr(e,pe,typeof n=="function"?n:Ha)}function Em(e,a,t,n,l){if(_i(e))throw Error(o(485));if(e=a.action,e!==null){var i={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){i.listeners.push(r)}};M.T!==null?t(!0):i.isTransition=!1,n(i),t=a.pending,t===null?(i.next=a.pending=i,ou(a,i)):(i.next=t.next,a.pending=t.next=i)}}function ou(e,a){var t=a.action,n=a.payload,l=e.state;if(a.isTransition){var i=M.T,r={};M.T=r;try{var d=t(l,n),p=M.S;p!==null&&p(r,d),ru(e,a,d)}catch(y){fr(e,a,y)}finally{M.T=i}}else try{i=t(l,n),ru(e,a,i)}catch(y){fr(e,a,y)}}function ru(e,a,t){t!==null&&typeof t=="object"&&typeof t.then=="function"?t.then(function(n){su(e,a,n)},function(n){return fr(e,a,n)}):su(e,a,t)}function su(e,a,t){a.status="fulfilled",a.value=t,cu(a),e.state=t,a=e.pending,a!==null&&(t=a.next,t===a?e.pending=null:(t=t.next,a.next=t,ou(e,t)))}function fr(e,a,t){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do a.status="rejected",a.reason=t,cu(a),a=a.next;while(a!==n)}e.action=null}function cu(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function uu(e,a){return a}function du(e,a){if(se){var t=ve.formState;if(t!==null){e:{var n=F;if(se){if(Ae){a:{for(var l=Ae,i=Ma;l.nodeType!==8;){if(!i){l=null;break a}if(l=Aa(l.nextSibling),l===null){l=null;break a}}i=l.data,l=i==="F!"||i==="F"?l:null}if(l){Ae=Aa(l.nextSibling),n=l.data==="F!";break e}}zt(n)}n=!1}n&&(a=t[0])}}return t=ea(),t.memoizedState=t.baseState=a,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uu,lastRenderedState:a},t.queue=n,t=Ou.bind(null,F,n),n.dispatch=t,n=dr(!1),i=hr.bind(null,F,!1,n.queue),n=ea(),l={state:a,dispatch:null,action:e,pending:null},n.queue=l,t=Em.bind(null,F,l,i,t),l.dispatch=t,n.memoizedState=e,[a,t,!1]}function fu(e){var a=qe();return pu(a,pe,e)}function pu(e,a,t){if(a=cr(e,a,uu)[0],e=fi(Ha)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var n=al(a)}catch(r){throw r===Pn?oi:r}else n=a;a=qe();var l=a.queue,i=l.dispatch;return t!==a.memoizedState&&(F.flags|=2048,pn(9,pi(),ym.bind(null,l,t),null)),[n,i,e]}function ym(e,a){e.action=a}function mu(e){var a=qe(),t=pe;if(t!==null)return pu(a,t,e);qe(),a=a.memoizedState,t=qe();var n=t.queue.dispatch;return t.memoizedState=e,[a,n,!1]}function pn(e,a,t,n){return e={tag:e,create:t,deps:n,inst:a,next:null},a=F.updateQueue,a===null&&(a=rr(),F.updateQueue=a),t=a.lastEffect,t===null?a.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,a.lastEffect=e),e}function pi(){return{destroy:void 0,resource:void 0}}function _u(){return qe().memoizedState}function mi(e,a,t,n){var l=ea();n=n===void 0?null:n,F.flags|=e,l.memoizedState=pn(1|a,pi(),t,n)}function tl(e,a,t,n){var l=qe();n=n===void 0?null:n;var i=l.memoizedState.inst;pe!==null&&n!==null&&tr(n,pe.memoizedState.deps)?l.memoizedState=pn(a,i,t,n):(F.flags|=e,l.memoizedState=pn(1|a,i,t,n))}function gu(e,a){mi(8390656,8,e,a)}function hu(e,a){tl(2048,8,e,a)}function bu(e,a){return tl(4,2,e,a)}function vu(e,a){return tl(4,4,e,a)}function Eu(e,a){if(typeof a=="function"){e=e();var t=a(e);return function(){typeof t=="function"?t():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function yu(e,a,t){t=t!=null?t.concat([e]):null,tl(4,4,Eu.bind(null,a,e),t)}function pr(){}function xu(e,a){var t=qe();a=a===void 0?null:a;var n=t.memoizedState;return a!==null&&tr(a,n[1])?n[0]:(t.memoizedState=[e,a],e)}function Tu(e,a){var t=qe();a=a===void 0?null:a;var n=t.memoizedState;if(a!==null&&tr(a,n[1]))return n[0];if(n=e(),kt){Wa(!0);try{e()}finally{Wa(!1)}}return t.memoizedState=[n,a],n}function mr(e,a,t){return t===void 0||(ot&1073741824)!==0?e.memoizedState=a:(e.memoizedState=t,e=Rd(),F.lanes|=e,pt|=e,t)}function Su(e,a,t,n){return oa(t,a)?t:un.current!==null?(e=mr(e,t,n),oa(e,a)||(Ge=!0),e):(ot&42)===0?(Ge=!0,e.memoizedState=t):(e=Rd(),F.lanes|=e,pt|=e,a)}function Au(e,a,t,n,l){var i=L.p;L.p=i!==0&&8>i?i:8;var r=M.T,d={};M.T=d,hr(e,!1,a,t);try{var p=l(),y=M.S;if(y!==null&&y(d,p),p!==null&&typeof p=="object"&&typeof p.then=="function"){var N=hm(p,n);nl(e,a,N,da(e))}else nl(e,a,n,da(e))}catch(O){nl(e,a,{then:function(){},status:"rejected",reason:O},da())}finally{L.p=i,M.T=r}}function xm(){}function _r(e,a,t,n){if(e.tag!==5)throw Error(o(476));var l=Ru(e).queue;Au(e,l,a,X,t===null?xm:function(){return Nu(e),t(n)})}function Ru(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:X},next:null};var t={};return a.next={memoizedState:t,baseState:t,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:t},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function Nu(e){var a=Ru(e).next.queue;nl(e,a,{},da())}function gr(){return Ze(yl)}function Mu(){return qe().memoizedState}function Cu(){return qe().memoizedState}function Tm(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var t=da();e=lt(t);var n=it(a,e,t);n!==null&&(fa(n,a,t),$n(n,a,t)),a={cache:Qo()},e.payload=a;return}a=a.return}}function Sm(e,a,t){var n=da();t={lane:n,revertLane:0,action:t,hasEagerState:!1,eagerState:null,next:null},_i(e)?qu(a,t):(t=ko(e,a,t,n),t!==null&&(fa(t,e,n),zu(t,a,n)))}function Ou(e,a,t){var n=da();nl(e,a,t,n)}function nl(e,a,t,n){var l={lane:n,revertLane:0,action:t,hasEagerState:!1,eagerState:null,next:null};if(_i(e))qu(a,l);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=a.lastRenderedReducer,i!==null))try{var r=a.lastRenderedState,d=i(r,t);if(l.hasEagerState=!0,l.eagerState=d,oa(d,r))return Fl(e,a,l,0),ve===null&&$l(),!1}catch{}finally{}if(t=ko(e,a,l,n),t!==null)return fa(t,e,n),zu(t,a,n),!0}return!1}function hr(e,a,t,n){if(n={lane:2,revertLane:Pr(),action:n,hasEagerState:!1,eagerState:null,next:null},_i(e)){if(a)throw Error(o(479))}else a=ko(e,t,n,2),a!==null&&fa(a,e,2)}function _i(e){var a=e.alternate;return e===F||a!==null&&a===F}function qu(e,a){dn=ci=!0;var t=e.pending;t===null?a.next=a:(a.next=t.next,t.next=a),e.pending=a}function zu(e,a,t){if((t&4194048)!==0){var n=a.lanes;n&=e.pendingLanes,t|=n,a.lanes=t,Is(e,t)}}var gi={readContext:Ze,use:di,useCallback:Me,useContext:Me,useEffect:Me,useImperativeHandle:Me,useLayoutEffect:Me,useInsertionEffect:Me,useMemo:Me,useReducer:Me,useRef:Me,useState:Me,useDebugValue:Me,useDeferredValue:Me,useTransition:Me,useSyncExternalStore:Me,useId:Me,useHostTransitionStatus:Me,useFormState:Me,useActionState:Me,useOptimistic:Me,useMemoCache:Me,useCacheRefresh:Me},Du={readContext:Ze,use:di,useCallback:function(e,a){return ea().memoizedState=[e,a===void 0?null:a],e},useContext:Ze,useEffect:gu,useImperativeHandle:function(e,a,t){t=t!=null?t.concat([e]):null,mi(4194308,4,Eu.bind(null,a,e),t)},useLayoutEffect:function(e,a){return mi(4194308,4,e,a)},useInsertionEffect:function(e,a){mi(4,2,e,a)},useMemo:function(e,a){var t=ea();a=a===void 0?null:a;var n=e();if(kt){Wa(!0);try{e()}finally{Wa(!1)}}return t.memoizedState=[n,a],n},useReducer:function(e,a,t){var n=ea();if(t!==void 0){var l=t(a);if(kt){Wa(!0);try{t(a)}finally{Wa(!1)}}}else l=a;return n.memoizedState=n.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},n.queue=e,e=e.dispatch=Sm.bind(null,F,e),[n.memoizedState,e]},useRef:function(e){var a=ea();return e={current:e},a.memoizedState=e},useState:function(e){e=dr(e);var a=e.queue,t=Ou.bind(null,F,a);return a.dispatch=t,[e.memoizedState,t]},useDebugValue:pr,useDeferredValue:function(e,a){var t=ea();return mr(t,e,a)},useTransition:function(){var e=dr(!1);return e=Au.bind(null,F,e.queue,!0,!1),ea().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,t){var n=F,l=ea();if(se){if(t===void 0)throw Error(o(407));t=t()}else{if(t=a(),ve===null)throw Error(o(349));(le&124)!==0||eu(n,a,t)}l.memoizedState=t;var i={value:t,getSnapshot:a};return l.queue=i,gu(tu.bind(null,n,i,e),[e]),n.flags|=2048,pn(9,pi(),au.bind(null,n,i,t,a),null),t},useId:function(){var e=ea(),a=ve.identifierPrefix;if(se){var t=Ia,n=ja;t=(n&~(1<<32-ia(n)-1)).toString(32)+t,a=""+a+"R"+t,t=ui++,0<t&&(a+="H"+t.toString(32)),a+=""}else t=bm++,a=""+a+"r"+t.toString(32)+"";return e.memoizedState=a},useHostTransitionStatus:gr,useFormState:du,useActionState:du,useOptimistic:function(e){var a=ea();a.memoizedState=a.baseState=e;var t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=t,a=hr.bind(null,F,!0,t),t.dispatch=a,[e,a]},useMemoCache:sr,useCacheRefresh:function(){return ea().memoizedState=Tm.bind(null,F)}},Lu={readContext:Ze,use:di,useCallback:xu,useContext:Ze,useEffect:hu,useImperativeHandle:yu,useInsertionEffect:bu,useLayoutEffect:vu,useMemo:Tu,useReducer:fi,useRef:_u,useState:function(){return fi(Ha)},useDebugValue:pr,useDeferredValue:function(e,a){var t=qe();return Su(t,pe.memoizedState,e,a)},useTransition:function(){var e=fi(Ha)[0],a=qe().memoizedState;return[typeof e=="boolean"?e:al(e),a]},useSyncExternalStore:Wc,useId:Mu,useHostTransitionStatus:gr,useFormState:fu,useActionState:fu,useOptimistic:function(e,a){var t=qe();return iu(t,pe,e,a)},useMemoCache:sr,useCacheRefresh:Cu},Am={readContext:Ze,use:di,useCallback:xu,useContext:Ze,useEffect:hu,useImperativeHandle:yu,useInsertionEffect:bu,useLayoutEffect:vu,useMemo:Tu,useReducer:ur,useRef:_u,useState:function(){return ur(Ha)},useDebugValue:pr,useDeferredValue:function(e,a){var t=qe();return pe===null?mr(t,e,a):Su(t,pe.memoizedState,e,a)},useTransition:function(){var e=ur(Ha)[0],a=qe().memoizedState;return[typeof e=="boolean"?e:al(e),a]},useSyncExternalStore:Wc,useId:Mu,useHostTransitionStatus:gr,useFormState:mu,useActionState:mu,useOptimistic:function(e,a){var t=qe();return pe!==null?iu(t,pe,e,a):(t.baseState=e,[e,t.queue.dispatch])},useMemoCache:sr,useCacheRefresh:Cu},mn=null,ll=0;function hi(e){var a=ll;return ll+=1,mn===null&&(mn=[]),Xc(mn,e,a)}function il(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function bi(e,a){throw a.$$typeof===G?Error(o(525)):(e=Object.prototype.toString.call(a),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function Gu(e){var a=e._init;return a(e._payload)}function ku(e){function a(v,g){if(e){var E=v.deletions;E===null?(v.deletions=[g],v.flags|=16):E.push(g)}}function t(v,g){if(!e)return null;for(;g!==null;)a(v,g),g=g.sibling;return null}function n(v){for(var g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function l(v,g){return v=Ua(v,g),v.index=0,v.sibling=null,v}function i(v,g,E){return v.index=E,e?(E=v.alternate,E!==null?(E=E.index,E<g?(v.flags|=67108866,g):E):(v.flags|=67108866,g)):(v.flags|=1048576,g)}function r(v){return e&&v.alternate===null&&(v.flags|=67108866),v}function d(v,g,E,C){return g===null||g.tag!==6?(g=Uo(E,v.mode,C),g.return=v,g):(g=l(g,E),g.return=v,g)}function p(v,g,E,C){var w=E.type;return w===U?N(v,g,E.props.children,C,E.key):g!==null&&(g.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Z&&Gu(w)===g.type)?(g=l(g,E.props),il(g,E),g.return=v,g):(g=ei(E.type,E.key,E.props,null,v.mode,C),il(g,E),g.return=v,g)}function y(v,g,E,C){return g===null||g.tag!==4||g.stateNode.containerInfo!==E.containerInfo||g.stateNode.implementation!==E.implementation?(g=jo(E,v.mode,C),g.return=v,g):(g=l(g,E.children||[]),g.return=v,g)}function N(v,g,E,C,w){return g===null||g.tag!==7?(g=Mt(E,v.mode,C,w),g.return=v,g):(g=l(g,E),g.return=v,g)}function O(v,g,E){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return g=Uo(""+g,v.mode,E),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case j:return E=ei(g.type,g.key,g.props,null,v.mode,E),il(E,g),E.return=v,E;case V:return g=jo(g,v.mode,E),g.return=v,g;case Z:var C=g._init;return g=C(g._payload),O(v,g,E)}if(Xe(g)||ie(g))return g=Mt(g,v.mode,E,null),g.return=v,g;if(typeof g.then=="function")return O(v,hi(g),E);if(g.$$typeof===Ne)return O(v,li(v,g),E);bi(v,g)}return null}function T(v,g,E,C){var w=g!==null?g.key:null;if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return w!==null?null:d(v,g,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case j:return E.key===w?p(v,g,E,C):null;case V:return E.key===w?y(v,g,E,C):null;case Z:return w=E._init,E=w(E._payload),T(v,g,E,C)}if(Xe(E)||ie(E))return w!==null?null:N(v,g,E,C,null);if(typeof E.then=="function")return T(v,g,hi(E),C);if(E.$$typeof===Ne)return T(v,g,li(v,E),C);bi(v,E)}return null}function A(v,g,E,C,w){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return v=v.get(E)||null,d(g,v,""+C,w);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case j:return v=v.get(C.key===null?E:C.key)||null,p(g,v,C,w);case V:return v=v.get(C.key===null?E:C.key)||null,y(g,v,C,w);case Z:var W=C._init;return C=W(C._payload),A(v,g,E,C,w)}if(Xe(C)||ie(C))return v=v.get(E)||null,N(g,v,C,w,null);if(typeof C.then=="function")return A(v,g,E,hi(C),w);if(C.$$typeof===Ne)return A(v,g,E,li(g,C),w);bi(g,C)}return null}function Q(v,g,E,C){for(var w=null,W=null,I=g,Y=g=0,we=null;I!==null&&Y<E.length;Y++){I.index>Y?(we=I,I=null):we=I.sibling;var re=T(v,I,E[Y],C);if(re===null){I===null&&(I=we);break}e&&I&&re.alternate===null&&a(v,I),g=i(re,g,Y),W===null?w=re:W.sibling=re,W=re,I=we}if(Y===E.length)return t(v,I),se&&Ot(v,Y),w;if(I===null){for(;Y<E.length;Y++)I=O(v,E[Y],C),I!==null&&(g=i(I,g,Y),W===null?w=I:W.sibling=I,W=I);return se&&Ot(v,Y),w}for(I=n(I);Y<E.length;Y++)we=A(I,v,Y,E[Y],C),we!==null&&(e&&we.alternate!==null&&I.delete(we.key===null?Y:we.key),g=i(we,g,Y),W===null?w=we:W.sibling=we,W=we);return e&&I.forEach(function(xt){return a(v,xt)}),se&&Ot(v,Y),w}function H(v,g,E,C){if(E==null)throw Error(o(151));for(var w=null,W=null,I=g,Y=g=0,we=null,re=E.next();I!==null&&!re.done;Y++,re=E.next()){I.index>Y?(we=I,I=null):we=I.sibling;var xt=T(v,I,re.value,C);if(xt===null){I===null&&(I=we);break}e&&I&&xt.alternate===null&&a(v,I),g=i(xt,g,Y),W===null?w=xt:W.sibling=xt,W=xt,I=we}if(re.done)return t(v,I),se&&Ot(v,Y),w;if(I===null){for(;!re.done;Y++,re=E.next())re=O(v,re.value,C),re!==null&&(g=i(re,g,Y),W===null?w=re:W.sibling=re,W=re);return se&&Ot(v,Y),w}for(I=n(I);!re.done;Y++,re=E.next())re=A(I,v,Y,re.value,C),re!==null&&(e&&re.alternate!==null&&I.delete(re.key===null?Y:re.key),g=i(re,g,Y),W===null?w=re:W.sibling=re,W=re);return e&&I.forEach(function(R_){return a(v,R_)}),se&&Ot(v,Y),w}function _e(v,g,E,C){if(typeof E=="object"&&E!==null&&E.type===U&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case j:e:{for(var w=E.key;g!==null;){if(g.key===w){if(w=E.type,w===U){if(g.tag===7){t(v,g.sibling),C=l(g,E.props.children),C.return=v,v=C;break e}}else if(g.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Z&&Gu(w)===g.type){t(v,g.sibling),C=l(g,E.props),il(C,E),C.return=v,v=C;break e}t(v,g);break}else a(v,g);g=g.sibling}E.type===U?(C=Mt(E.props.children,v.mode,C,E.key),C.return=v,v=C):(C=ei(E.type,E.key,E.props,null,v.mode,C),il(C,E),C.return=v,v=C)}return r(v);case V:e:{for(w=E.key;g!==null;){if(g.key===w)if(g.tag===4&&g.stateNode.containerInfo===E.containerInfo&&g.stateNode.implementation===E.implementation){t(v,g.sibling),C=l(g,E.children||[]),C.return=v,v=C;break e}else{t(v,g);break}else a(v,g);g=g.sibling}C=jo(E,v.mode,C),C.return=v,v=C}return r(v);case Z:return w=E._init,E=w(E._payload),_e(v,g,E,C)}if(Xe(E))return Q(v,g,E,C);if(ie(E)){if(w=ie(E),typeof w!="function")throw Error(o(150));return E=w.call(E),H(v,g,E,C)}if(typeof E.then=="function")return _e(v,g,hi(E),C);if(E.$$typeof===Ne)return _e(v,g,li(v,E),C);bi(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint"?(E=""+E,g!==null&&g.tag===6?(t(v,g.sibling),C=l(g,E),C.return=v,v=C):(t(v,g),C=Uo(E,v.mode,C),C.return=v,v=C),r(v)):t(v,g)}return function(v,g,E,C){try{ll=0;var w=_e(v,g,E,C);return mn=null,w}catch(I){if(I===Pn||I===oi)throw I;var W=ra(29,I,null,v.mode);return W.lanes=C,W.return=v,W}finally{}}}var _n=ku(!0),wu=ku(!1),Ea=q(null),Ca=null;function rt(e){var a=e.alternate;D(De,De.current&1),D(Ea,e),Ca===null&&(a===null||un.current!==null||a.memoizedState!==null)&&(Ca=e)}function Uu(e){if(e.tag===22){if(D(De,De.current),D(Ea,e),Ca===null){var a=e.alternate;a!==null&&a.memoizedState!==null&&(Ca=e)}}else st()}function st(){D(De,De.current),D(Ea,Ea.current)}function Ya(e){k(Ea),Ca===e&&(Ca=null),k(De)}var De=q(0);function vi(e){for(var a=e;a!==null;){if(a.tag===13){var t=a.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||rs(t)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function br(e,a,t,n){a=e.memoizedState,t=t(n,a),t=t==null?a:R({},a,t),e.memoizedState=t,e.lanes===0&&(e.updateQueue.baseState=t)}var vr={enqueueSetState:function(e,a,t){e=e._reactInternals;var n=da(),l=lt(n);l.payload=a,t!=null&&(l.callback=t),a=it(e,l,n),a!==null&&(fa(a,e,n),$n(a,e,n))},enqueueReplaceState:function(e,a,t){e=e._reactInternals;var n=da(),l=lt(n);l.tag=1,l.payload=a,t!=null&&(l.callback=t),a=it(e,l,n),a!==null&&(fa(a,e,n),$n(a,e,n))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var t=da(),n=lt(t);n.tag=2,a!=null&&(n.callback=a),a=it(e,n,t),a!==null&&(fa(a,e,t),$n(a,e,t))}};function ju(e,a,t,n,l,i,r){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,r):a.prototype&&a.prototype.isPureReactComponent?!Vn(t,n)||!Vn(l,i):!0}function Iu(e,a,t,n){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(t,n),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(t,n),a.state!==e&&vr.enqueueReplaceState(a,a.state,null)}function wt(e,a){var t=a;if("ref"in a){t={};for(var n in a)n!=="ref"&&(t[n]=a[n])}if(e=e.defaultProps){t===a&&(t=R({},t));for(var l in e)t[l]===void 0&&(t[l]=e[l])}return t}var Ei=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Vu(e){Ei(e)}function Bu(e){console.error(e)}function Hu(e){Ei(e)}function yi(e,a){try{var t=e.onUncaughtError;t(a.value,{componentStack:a.stack})}catch(n){setTimeout(function(){throw n})}}function Yu(e,a,t){try{var n=e.onCaughtError;n(t.value,{componentStack:t.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function Er(e,a,t){return t=lt(t),t.tag=3,t.payload={element:null},t.callback=function(){yi(e,a)},t}function Xu(e){return e=lt(e),e.tag=3,e}function Qu(e,a,t,n){var l=t.type.getDerivedStateFromError;if(typeof l=="function"){var i=n.value;e.payload=function(){return l(i)},e.callback=function(){Yu(a,t,n)}}var r=t.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){Yu(a,t,n),typeof l!="function"&&(mt===null?mt=new Set([this]):mt.add(this));var d=n.stack;this.componentDidCatch(n.value,{componentStack:d!==null?d:""})})}function Rm(e,a,t,n,l){if(t.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(a=t.alternate,a!==null&&Qn(a,t,l,!0),t=Ea.current,t!==null){switch(t.tag){case 13:return Ca===null?Yr():t.alternate===null&&Re===0&&(Re=3),t.flags&=-257,t.flags|=65536,t.lanes=l,n===Po?t.flags|=16384:(a=t.updateQueue,a===null?t.updateQueue=new Set([n]):a.add(n),Qr(e,n,l)),!1;case 22:return t.flags|=65536,n===Po?t.flags|=16384:(a=t.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([n])},t.updateQueue=a):(t=a.retryQueue,t===null?a.retryQueue=new Set([n]):t.add(n)),Qr(e,n,l)),!1}throw Error(o(435,t.tag))}return Qr(e,n,l),Yr(),!1}if(se)return a=Ea.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=l,n!==Bo&&(e=Error(o(422),{cause:n}),Xn(ga(e,t)))):(n!==Bo&&(a=Error(o(423),{cause:n}),Xn(ga(a,t))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,n=ga(n,t),l=Er(e.stateNode,n,l),Fo(e,l),Re!==4&&(Re=2)),!1;var i=Error(o(520),{cause:n});if(i=ga(i,t),fl===null?fl=[i]:fl.push(i),Re!==4&&(Re=2),a===null)return!0;n=ga(n,t),t=a;do{switch(t.tag){case 3:return t.flags|=65536,e=l&-l,t.lanes|=e,e=Er(t.stateNode,n,e),Fo(t,e),!1;case 1:if(a=t.type,i=t.stateNode,(t.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(mt===null||!mt.has(i))))return t.flags|=65536,l&=-l,t.lanes|=l,l=Xu(l),Qu(l,e,t,n),Fo(t,l),!1}t=t.return}while(t!==null);return!1}var Zu=Error(o(461)),Ge=!1;function Ie(e,a,t,n){a.child=e===null?wu(a,null,t,n):_n(a,e.child,t,n)}function Ku(e,a,t,n,l){t=t.render;var i=a.ref;if("ref"in n){var r={};for(var d in n)d!=="ref"&&(r[d]=n[d])}else r=n;return Lt(a),n=nr(e,a,t,r,i,l),d=lr(),e!==null&&!Ge?(ir(e,a,l),Xa(e,a,l)):(se&&d&&Io(a),a.flags|=1,Ie(e,a,n,l),a.child)}function Pu(e,a,t,n,l){if(e===null){var i=t.type;return typeof i=="function"&&!wo(i)&&i.defaultProps===void 0&&t.compare===null?(a.tag=15,a.type=i,Ju(e,a,i,n,l)):(e=ei(t.type,null,n,a,a.mode,l),e.ref=a.ref,e.return=a,a.child=e)}if(i=e.child,!Mr(e,l)){var r=i.memoizedProps;if(t=t.compare,t=t!==null?t:Vn,t(r,n)&&e.ref===a.ref)return Xa(e,a,l)}return a.flags|=1,e=Ua(i,n),e.ref=a.ref,e.return=a,a.child=e}function Ju(e,a,t,n,l){if(e!==null){var i=e.memoizedProps;if(Vn(i,n)&&e.ref===a.ref)if(Ge=!1,a.pendingProps=n=i,Mr(e,l))(e.flags&131072)!==0&&(Ge=!0);else return a.lanes=e.lanes,Xa(e,a,l)}return yr(e,a,t,n,l)}function $u(e,a,t){var n=a.pendingProps,l=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden"){if((a.flags&128)!==0){if(n=i!==null?i.baseLanes|t:t,e!==null){for(l=a.child=e.child,i=0;l!==null;)i=i|l.lanes|l.childLanes,l=l.sibling;a.childLanes=i&~n}else a.childLanes=0,a.child=null;return Fu(e,a,n,t)}if((t&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&ii(a,i!==null?i.cachePool:null),i!==null?Jc(a,i):er(),Uu(a);else return a.lanes=a.childLanes=536870912,Fu(e,a,i!==null?i.baseLanes|t:t,t)}else i!==null?(ii(a,i.cachePool),Jc(a,i),st(),a.memoizedState=null):(e!==null&&ii(a,null),er(),st());return Ie(e,a,l,t),a.child}function Fu(e,a,t,n){var l=Ko();return l=l===null?null:{parent:ze._currentValue,pool:l},a.memoizedState={baseLanes:t,cachePool:l},e!==null&&ii(a,null),er(),Uu(a),e!==null&&Qn(e,a,n,!0),null}function xi(e,a){var t=a.ref;if(t===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof t!="function"&&typeof t!="object")throw Error(o(284));(e===null||e.ref!==t)&&(a.flags|=4194816)}}function yr(e,a,t,n,l){return Lt(a),t=nr(e,a,t,n,void 0,l),n=lr(),e!==null&&!Ge?(ir(e,a,l),Xa(e,a,l)):(se&&n&&Io(a),a.flags|=1,Ie(e,a,t,l),a.child)}function Wu(e,a,t,n,l,i){return Lt(a),a.updateQueue=null,t=Fc(a,n,t,l),$c(e),n=lr(),e!==null&&!Ge?(ir(e,a,i),Xa(e,a,i)):(se&&n&&Io(a),a.flags|=1,Ie(e,a,t,i),a.child)}function ed(e,a,t,n,l){if(Lt(a),a.stateNode===null){var i=ln,r=t.contextType;typeof r=="object"&&r!==null&&(i=Ze(r)),i=new t(n,i),a.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=vr,a.stateNode=i,i._reactInternals=a,i=a.stateNode,i.props=n,i.state=a.memoizedState,i.refs={},Jo(a),r=t.contextType,i.context=typeof r=="object"&&r!==null?Ze(r):ln,i.state=a.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(br(a,t,r,n),i.state=a.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(r=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),r!==i.state&&vr.enqueueReplaceState(i,i.state,null),Wn(a,n,i,l),Fn(),i.state=a.memoizedState),typeof i.componentDidMount=="function"&&(a.flags|=4194308),n=!0}else if(e===null){i=a.stateNode;var d=a.memoizedProps,p=wt(t,d);i.props=p;var y=i.context,N=t.contextType;r=ln,typeof N=="object"&&N!==null&&(r=Ze(N));var O=t.getDerivedStateFromProps;N=typeof O=="function"||typeof i.getSnapshotBeforeUpdate=="function",d=a.pendingProps!==d,N||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(d||y!==r)&&Iu(a,i,n,r),nt=!1;var T=a.memoizedState;i.state=T,Wn(a,n,i,l),Fn(),y=a.memoizedState,d||T!==y||nt?(typeof O=="function"&&(br(a,t,O,n),y=a.memoizedState),(p=nt||ju(a,t,p,n,T,y,r))?(N||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(a.flags|=4194308)):(typeof i.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=n,a.memoizedState=y),i.props=n,i.state=y,i.context=r,n=p):(typeof i.componentDidMount=="function"&&(a.flags|=4194308),n=!1)}else{i=a.stateNode,$o(e,a),r=a.memoizedProps,N=wt(t,r),i.props=N,O=a.pendingProps,T=i.context,y=t.contextType,p=ln,typeof y=="object"&&y!==null&&(p=Ze(y)),d=t.getDerivedStateFromProps,(y=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(r!==O||T!==p)&&Iu(a,i,n,p),nt=!1,T=a.memoizedState,i.state=T,Wn(a,n,i,l),Fn();var A=a.memoizedState;r!==O||T!==A||nt||e!==null&&e.dependencies!==null&&ni(e.dependencies)?(typeof d=="function"&&(br(a,t,d,n),A=a.memoizedState),(N=nt||ju(a,t,N,n,T,A,p)||e!==null&&e.dependencies!==null&&ni(e.dependencies))?(y||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,A,p),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,A,p)),typeof i.componentDidUpdate=="function"&&(a.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof i.componentDidUpdate!="function"||r===e.memoizedProps&&T===e.memoizedState||(a.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&T===e.memoizedState||(a.flags|=1024),a.memoizedProps=n,a.memoizedState=A),i.props=n,i.state=A,i.context=p,n=N):(typeof i.componentDidUpdate!="function"||r===e.memoizedProps&&T===e.memoizedState||(a.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&T===e.memoizedState||(a.flags|=1024),n=!1)}return i=n,xi(e,a),n=(a.flags&128)!==0,i||n?(i=a.stateNode,t=n&&typeof t.getDerivedStateFromError!="function"?null:i.render(),a.flags|=1,e!==null&&n?(a.child=_n(a,e.child,null,l),a.child=_n(a,null,t,l)):Ie(e,a,t,l),a.memoizedState=i.state,e=a.child):e=Xa(e,a,l),e}function ad(e,a,t,n){return Yn(),a.flags|=256,Ie(e,a,t,n),a.child}var xr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tr(e){return{baseLanes:e,cachePool:Bc()}}function Sr(e,a,t){return e=e!==null?e.childLanes&~t:0,a&&(e|=ya),e}function td(e,a,t){var n=a.pendingProps,l=!1,i=(a.flags&128)!==0,r;if((r=i)||(r=e!==null&&e.memoizedState===null?!1:(De.current&2)!==0),r&&(l=!0,a.flags&=-129),r=(a.flags&32)!==0,a.flags&=-33,e===null){if(se){if(l?rt(a):st(),se){var d=Ae,p;if(p=d){e:{for(p=d,d=Ma;p.nodeType!==8;){if(!d){d=null;break e}if(p=Aa(p.nextSibling),p===null){d=null;break e}}d=p}d!==null?(a.memoizedState={dehydrated:d,treeContext:Ct!==null?{id:ja,overflow:Ia}:null,retryLane:536870912,hydrationErrors:null},p=ra(18,null,null,0),p.stateNode=d,p.return=a,a.child=p,$e=a,Ae=null,p=!0):p=!1}p||zt(a)}if(d=a.memoizedState,d!==null&&(d=d.dehydrated,d!==null))return rs(d)?a.lanes=32:a.lanes=536870912,null;Ya(a)}return d=n.children,n=n.fallback,l?(st(),l=a.mode,d=Ti({mode:"hidden",children:d},l),n=Mt(n,l,t,null),d.return=a,n.return=a,d.sibling=n,a.child=d,l=a.child,l.memoizedState=Tr(t),l.childLanes=Sr(e,r,t),a.memoizedState=xr,n):(rt(a),Ar(a,d))}if(p=e.memoizedState,p!==null&&(d=p.dehydrated,d!==null)){if(i)a.flags&256?(rt(a),a.flags&=-257,a=Rr(e,a,t)):a.memoizedState!==null?(st(),a.child=e.child,a.flags|=128,a=null):(st(),l=n.fallback,d=a.mode,n=Ti({mode:"visible",children:n.children},d),l=Mt(l,d,t,null),l.flags|=2,n.return=a,l.return=a,n.sibling=l,a.child=n,_n(a,e.child,null,t),n=a.child,n.memoizedState=Tr(t),n.childLanes=Sr(e,r,t),a.memoizedState=xr,a=l);else if(rt(a),rs(d)){if(r=d.nextSibling&&d.nextSibling.dataset,r)var y=r.dgst;r=y,n=Error(o(419)),n.stack="",n.digest=r,Xn({value:n,source:null,stack:null}),a=Rr(e,a,t)}else if(Ge||Qn(e,a,t,!1),r=(t&e.childLanes)!==0,Ge||r){if(r=ve,r!==null&&(n=t&-t,n=(n&42)!==0?1:ro(n),n=(n&(r.suspendedLanes|t))!==0?0:n,n!==0&&n!==p.retryLane))throw p.retryLane=n,nn(e,n),fa(r,e,n),Zu;d.data==="$?"||Yr(),a=Rr(e,a,t)}else d.data==="$?"?(a.flags|=192,a.child=e.child,a=null):(e=p.treeContext,Ae=Aa(d.nextSibling),$e=a,se=!0,qt=null,Ma=!1,e!==null&&(ba[va++]=ja,ba[va++]=Ia,ba[va++]=Ct,ja=e.id,Ia=e.overflow,Ct=a),a=Ar(a,n.children),a.flags|=4096);return a}return l?(st(),l=n.fallback,d=a.mode,p=e.child,y=p.sibling,n=Ua(p,{mode:"hidden",children:n.children}),n.subtreeFlags=p.subtreeFlags&65011712,y!==null?l=Ua(y,l):(l=Mt(l,d,t,null),l.flags|=2),l.return=a,n.return=a,n.sibling=l,a.child=n,n=l,l=a.child,d=e.child.memoizedState,d===null?d=Tr(t):(p=d.cachePool,p!==null?(y=ze._currentValue,p=p.parent!==y?{parent:y,pool:y}:p):p=Bc(),d={baseLanes:d.baseLanes|t,cachePool:p}),l.memoizedState=d,l.childLanes=Sr(e,r,t),a.memoizedState=xr,n):(rt(a),t=e.child,e=t.sibling,t=Ua(t,{mode:"visible",children:n.children}),t.return=a,t.sibling=null,e!==null&&(r=a.deletions,r===null?(a.deletions=[e],a.flags|=16):r.push(e)),a.child=t,a.memoizedState=null,t)}function Ar(e,a){return a=Ti({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function Ti(e,a){return e=ra(22,e,null,a),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Rr(e,a,t){return _n(a,e.child,null,t),e=Ar(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function nd(e,a,t){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a),Yo(e.return,a,t)}function Nr(e,a,t,n,l){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:l}:(i.isBackwards=a,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=t,i.tailMode=l)}function ld(e,a,t){var n=a.pendingProps,l=n.revealOrder,i=n.tail;if(Ie(e,a,n.children,t),n=De.current,(n&2)!==0)n=n&1|2,a.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nd(e,t,a);else if(e.tag===19)nd(e,t,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(D(De,n),l){case"forwards":for(t=a.child,l=null;t!==null;)e=t.alternate,e!==null&&vi(e)===null&&(l=t),t=t.sibling;t=l,t===null?(l=a.child,a.child=null):(l=t.sibling,t.sibling=null),Nr(a,!1,l,t,i);break;case"backwards":for(t=null,l=a.child,a.child=null;l!==null;){if(e=l.alternate,e!==null&&vi(e)===null){a.child=l;break}e=l.sibling,l.sibling=t,t=l,l=e}Nr(a,!0,t,null,i);break;case"together":Nr(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Xa(e,a,t){if(e!==null&&(a.dependencies=e.dependencies),pt|=a.lanes,(t&a.childLanes)===0)if(e!==null){if(Qn(e,a,t,!1),(t&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(o(153));if(a.child!==null){for(e=a.child,t=Ua(e,e.pendingProps),a.child=t,t.return=a;e.sibling!==null;)e=e.sibling,t=t.sibling=Ua(e,e.pendingProps),t.return=a;t.sibling=null}return a.child}function Mr(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&ni(e)))}function Nm(e,a,t){switch(a.tag){case 3:ye(a,a.stateNode.containerInfo),tt(a,ze,e.memoizedState.cache),Yn();break;case 27:case 5:to(a);break;case 4:ye(a,a.stateNode.containerInfo);break;case 10:tt(a,a.type,a.memoizedProps.value);break;case 13:var n=a.memoizedState;if(n!==null)return n.dehydrated!==null?(rt(a),a.flags|=128,null):(t&a.child.childLanes)!==0?td(e,a,t):(rt(a),e=Xa(e,a,t),e!==null?e.sibling:null);rt(a);break;case 19:var l=(e.flags&128)!==0;if(n=(t&a.childLanes)!==0,n||(Qn(e,a,t,!1),n=(t&a.childLanes)!==0),l){if(n)return ld(e,a,t);a.flags|=128}if(l=a.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),D(De,De.current),n)break;return null;case 22:case 23:return a.lanes=0,$u(e,a,t);case 24:tt(a,ze,e.memoizedState.cache)}return Xa(e,a,t)}function id(e,a,t){if(e!==null)if(e.memoizedProps!==a.pendingProps)Ge=!0;else{if(!Mr(e,t)&&(a.flags&128)===0)return Ge=!1,Nm(e,a,t);Ge=(e.flags&131072)!==0}else Ge=!1,se&&(a.flags&1048576)!==0&&Gc(a,ti,a.index);switch(a.lanes=0,a.tag){case 16:e:{e=a.pendingProps;var n=a.elementType,l=n._init;if(n=l(n._payload),a.type=n,typeof n=="function")wo(n)?(e=wt(n,e),a.tag=1,a=ed(null,a,n,e,t)):(a.tag=0,a=yr(null,a,n,e,t));else{if(n!=null){if(l=n.$$typeof,l===Ye){a.tag=11,a=Ku(null,a,n,e,t);break e}else if(l===Je){a.tag=14,a=Pu(null,a,n,e,t);break e}}throw a=Ga(n)||n,Error(o(306,a,""))}}return a;case 0:return yr(e,a,a.type,a.pendingProps,t);case 1:return n=a.type,l=wt(n,a.pendingProps),ed(e,a,n,l,t);case 3:e:{if(ye(a,a.stateNode.containerInfo),e===null)throw Error(o(387));n=a.pendingProps;var i=a.memoizedState;l=i.element,$o(e,a),Wn(a,n,null,t);var r=a.memoizedState;if(n=r.cache,tt(a,ze,n),n!==i.cache&&Xo(a,[ze],t,!0),Fn(),n=r.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:r.cache},a.updateQueue.baseState=i,a.memoizedState=i,a.flags&256){a=ad(e,a,n,t);break e}else if(n!==l){l=ga(Error(o(424)),a),Xn(l),a=ad(e,a,n,t);break e}else{switch(e=a.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ae=Aa(e.firstChild),$e=a,se=!0,qt=null,Ma=!0,t=wu(a,null,n,t),a.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling}else{if(Yn(),n===l){a=Xa(e,a,t);break e}Ie(e,a,n,t)}a=a.child}return a;case 26:return xi(e,a),e===null?(t=uf(a.type,null,a.pendingProps,null))?a.memoizedState=t:se||(t=a.type,e=a.pendingProps,n=wi(K.current).createElement(t),n[Qe]=a,n[Fe]=e,Be(n,t,e),Le(n),a.stateNode=n):a.memoizedState=uf(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return to(a),e===null&&se&&(n=a.stateNode=rf(a.type,a.pendingProps,K.current),$e=a,Ma=!0,l=Ae,ht(a.type)?(ss=l,Ae=Aa(n.firstChild)):Ae=l),Ie(e,a,a.pendingProps.children,t),xi(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&se&&((l=n=Ae)&&(n=a_(n,a.type,a.pendingProps,Ma),n!==null?(a.stateNode=n,$e=a,Ae=Aa(n.firstChild),Ma=!1,l=!0):l=!1),l||zt(a)),to(a),l=a.type,i=a.pendingProps,r=e!==null?e.memoizedProps:null,n=i.children,ls(l,i)?n=null:r!==null&&ls(l,r)&&(a.flags|=32),a.memoizedState!==null&&(l=nr(e,a,vm,null,null,t),yl._currentValue=l),xi(e,a),Ie(e,a,n,t),a.child;case 6:return e===null&&se&&((e=t=Ae)&&(t=t_(t,a.pendingProps,Ma),t!==null?(a.stateNode=t,$e=a,Ae=null,e=!0):e=!1),e||zt(a)),null;case 13:return td(e,a,t);case 4:return ye(a,a.stateNode.containerInfo),n=a.pendingProps,e===null?a.child=_n(a,null,n,t):Ie(e,a,n,t),a.child;case 11:return Ku(e,a,a.type,a.pendingProps,t);case 7:return Ie(e,a,a.pendingProps,t),a.child;case 8:return Ie(e,a,a.pendingProps.children,t),a.child;case 12:return Ie(e,a,a.pendingProps.children,t),a.child;case 10:return n=a.pendingProps,tt(a,a.type,n.value),Ie(e,a,n.children,t),a.child;case 9:return l=a.type._context,n=a.pendingProps.children,Lt(a),l=Ze(l),n=n(l),a.flags|=1,Ie(e,a,n,t),a.child;case 14:return Pu(e,a,a.type,a.pendingProps,t);case 15:return Ju(e,a,a.type,a.pendingProps,t);case 19:return ld(e,a,t);case 31:return n=a.pendingProps,t=a.mode,n={mode:n.mode,children:n.children},e===null?(t=Ti(n,t),t.ref=a.ref,a.child=t,t.return=a,a=t):(t=Ua(e.child,n),t.ref=a.ref,a.child=t,t.return=a,a=t),a;case 22:return $u(e,a,t);case 24:return Lt(a),n=Ze(ze),e===null?(l=Ko(),l===null&&(l=ve,i=Qo(),l.pooledCache=i,i.refCount++,i!==null&&(l.pooledCacheLanes|=t),l=i),a.memoizedState={parent:n,cache:l},Jo(a),tt(a,ze,l)):((e.lanes&t)!==0&&($o(e,a),Wn(a,null,null,t),Fn()),l=e.memoizedState,i=a.memoizedState,l.parent!==n?(l={parent:n,cache:n},a.memoizedState=l,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=l),tt(a,ze,n)):(n=i.cache,tt(a,ze,n),n!==l.cache&&Xo(a,[ze],t,!0))),Ie(e,a,a.pendingProps.children,t),a.child;case 29:throw a.pendingProps}throw Error(o(156,a.tag))}function Qa(e){e.flags|=4}function od(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!_f(a)){if(a=Ea.current,a!==null&&((le&4194048)===le?Ca!==null:(le&62914560)!==le&&(le&536870912)===0||a!==Ca))throw Jn=Po,Hc;e.flags|=8192}}function Si(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?Us():536870912,e.lanes|=a,vn|=a)}function ol(e,a){if(!se)switch(e.tailMode){case"hidden":a=e.tail;for(var t=null;a!==null;)a.alternate!==null&&(t=a),a=a.sibling;t===null?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Te(e){var a=e.alternate!==null&&e.alternate.child===e.child,t=0,n=0;if(a)for(var l=e.child;l!==null;)t|=l.lanes|l.childLanes,n|=l.subtreeFlags&65011712,n|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)t|=l.lanes|l.childLanes,n|=l.subtreeFlags,n|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=n,e.childLanes=t,a}function Mm(e,a,t){var n=a.pendingProps;switch(Vo(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(a),null;case 1:return Te(a),null;case 3:return t=a.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),a.memoizedState.cache!==n&&(a.flags|=2048),Ba(ze),Fa(),t.pendingContext&&(t.context=t.pendingContext,t.pendingContext=null),(e===null||e.child===null)&&(Hn(a)?Qa(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Uc())),Te(a),null;case 26:return t=a.memoizedState,e===null?(Qa(a),t!==null?(Te(a),od(a,t)):(Te(a),a.flags&=-16777217)):t?t!==e.memoizedState?(Qa(a),Te(a),od(a,t)):(Te(a),a.flags&=-16777217):(e.memoizedProps!==n&&Qa(a),Te(a),a.flags&=-16777217),null;case 27:Gl(a),t=K.current;var l=a.type;if(e!==null&&a.stateNode!=null)e.memoizedProps!==n&&Qa(a);else{if(!n){if(a.stateNode===null)throw Error(o(166));return Te(a),null}e=B.current,Hn(a)?kc(a):(e=rf(l,n,t),a.stateNode=e,Qa(a))}return Te(a),null;case 5:if(Gl(a),t=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==n&&Qa(a);else{if(!n){if(a.stateNode===null)throw Error(o(166));return Te(a),null}if(e=B.current,Hn(a))kc(a);else{switch(l=wi(K.current),e){case 1:e=l.createElementNS("http://www.w3.org/2000/svg",t);break;case 2:e=l.createElementNS("http://www.w3.org/1998/Math/MathML",t);break;default:switch(t){case"svg":e=l.createElementNS("http://www.w3.org/2000/svg",t);break;case"math":e=l.createElementNS("http://www.w3.org/1998/Math/MathML",t);break;case"script":e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof n.is=="string"?l.createElement("select",{is:n.is}):l.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e=typeof n.is=="string"?l.createElement(t,{is:n.is}):l.createElement(t)}}e[Qe]=a,e[Fe]=n;e:for(l=a.child;l!==null;){if(l.tag===5||l.tag===6)e.appendChild(l.stateNode);else if(l.tag!==4&&l.tag!==27&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}a.stateNode=e;e:switch(Be(e,t,n),t){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Qa(a)}}return Te(a),a.flags&=-16777217,null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==n&&Qa(a);else{if(typeof n!="string"&&a.stateNode===null)throw Error(o(166));if(e=K.current,Hn(a)){if(e=a.stateNode,t=a.memoizedProps,n=null,l=$e,l!==null)switch(l.tag){case 27:case 5:n=l.memoizedProps}e[Qe]=a,e=!!(e.nodeValue===t||n!==null&&n.suppressHydrationWarning===!0||Wd(e.nodeValue,t)),e||zt(a)}else e=wi(e).createTextNode(n),e[Qe]=a,a.stateNode=e}return Te(a),null;case 13:if(n=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=Hn(a),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(o(318));if(l=a.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(o(317));l[Qe]=a}else Yn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Te(a),l=!1}else l=Uc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return a.flags&256?(Ya(a),a):(Ya(a),null)}if(Ya(a),(a.flags&128)!==0)return a.lanes=t,a;if(t=n!==null,e=e!==null&&e.memoizedState!==null,t){n=a.child,l=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(l=n.alternate.memoizedState.cachePool.pool);var i=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),i!==l&&(n.flags|=2048)}return t!==e&&t&&(a.child.flags|=8192),Si(a,a.updateQueue),Te(a),null;case 4:return Fa(),e===null&&Wr(a.stateNode.containerInfo),Te(a),null;case 10:return Ba(a.type),Te(a),null;case 19:if(k(De),l=a.memoizedState,l===null)return Te(a),null;if(n=(a.flags&128)!==0,i=l.rendering,i===null)if(n)ol(l,!1);else{if(Re!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(i=vi(e),i!==null){for(a.flags|=128,ol(l,!1),e=i.updateQueue,a.updateQueue=e,Si(a,e),a.subtreeFlags=0,e=t,t=a.child;t!==null;)Lc(t,e),t=t.sibling;return D(De,De.current&1|2),a.child}e=e.sibling}l.tail!==null&&Na()>Ni&&(a.flags|=128,n=!0,ol(l,!1),a.lanes=4194304)}else{if(!n)if(e=vi(i),e!==null){if(a.flags|=128,n=!0,e=e.updateQueue,a.updateQueue=e,Si(a,e),ol(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!se)return Te(a),null}else 2*Na()-l.renderingStartTime>Ni&&t!==536870912&&(a.flags|=128,n=!0,ol(l,!1),a.lanes=4194304);l.isBackwards?(i.sibling=a.child,a.child=i):(e=l.last,e!==null?e.sibling=i:a.child=i,l.last=i)}return l.tail!==null?(a=l.tail,l.rendering=a,l.tail=a.sibling,l.renderingStartTime=Na(),a.sibling=null,e=De.current,D(De,n?e&1|2:e&1),a):(Te(a),null);case 22:case 23:return Ya(a),ar(),n=a.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(a.flags|=8192):n&&(a.flags|=8192),n?(t&536870912)!==0&&(a.flags&128)===0&&(Te(a),a.subtreeFlags&6&&(a.flags|=8192)):Te(a),t=a.updateQueue,t!==null&&Si(a,t.retryQueue),t=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==t&&(a.flags|=2048),e!==null&&k(Gt),null;case 24:return t=null,e!==null&&(t=e.memoizedState.cache),a.memoizedState.cache!==t&&(a.flags|=2048),Ba(ze),Te(a),null;case 25:return null;case 30:return null}throw Error(o(156,a.tag))}function Cm(e,a){switch(Vo(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return Ba(ze),Fa(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return Gl(a),null;case 13:if(Ya(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(o(340));Yn()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return k(De),null;case 4:return Fa(),null;case 10:return Ba(a.type),null;case 22:case 23:return Ya(a),ar(),e!==null&&k(Gt),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return Ba(ze),null;case 25:return null;default:return null}}function rd(e,a){switch(Vo(a),a.tag){case 3:Ba(ze),Fa();break;case 26:case 27:case 5:Gl(a);break;case 4:Fa();break;case 13:Ya(a);break;case 19:k(De);break;case 10:Ba(a.type);break;case 22:case 23:Ya(a),ar(),e!==null&&k(Gt);break;case 24:Ba(ze)}}function rl(e,a){try{var t=a.updateQueue,n=t!==null?t.lastEffect:null;if(n!==null){var l=n.next;t=l;do{if((t.tag&e)===e){n=void 0;var i=t.create,r=t.inst;n=i(),r.destroy=n}t=t.next}while(t!==l)}}catch(d){be(a,a.return,d)}}function ct(e,a,t){try{var n=a.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var i=l.next;n=i;do{if((n.tag&e)===e){var r=n.inst,d=r.destroy;if(d!==void 0){r.destroy=void 0,l=a;var p=t,y=d;try{y()}catch(N){be(l,p,N)}}}n=n.next}while(n!==i)}}catch(N){be(a,a.return,N)}}function sd(e){var a=e.updateQueue;if(a!==null){var t=e.stateNode;try{Pc(a,t)}catch(n){be(e,e.return,n)}}}function cd(e,a,t){t.props=wt(e.type,e.memoizedProps),t.state=e.memoizedState;try{t.componentWillUnmount()}catch(n){be(e,a,n)}}function sl(e,a){try{var t=e.ref;if(t!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof t=="function"?e.refCleanup=t(n):t.current=n}}catch(l){be(e,a,l)}}function Oa(e,a){var t=e.ref,n=e.refCleanup;if(t!==null)if(typeof n=="function")try{n()}catch(l){be(e,a,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof t=="function")try{t(null)}catch(l){be(e,a,l)}else t.current=null}function ud(e){var a=e.type,t=e.memoizedProps,n=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":t.autoFocus&&n.focus();break e;case"img":t.src?n.src=t.src:t.srcSet&&(n.srcset=t.srcSet)}}catch(l){be(e,e.return,l)}}function Cr(e,a,t){try{var n=e.stateNode;Jm(n,e.type,t,a),n[Fe]=a}catch(l){be(e,e.return,l)}}function dd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ht(e.type)||e.tag===4}function Or(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ht(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qr(e,a,t){var n=e.tag;if(n===5||n===6)e=e.stateNode,a?(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t).insertBefore(e,a):(a=t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.appendChild(e),t=t._reactRootContainer,t!=null||a.onclick!==null||(a.onclick=ki));else if(n!==4&&(n===27&&ht(e.type)&&(t=e.stateNode,a=null),e=e.child,e!==null))for(qr(e,a,t),e=e.sibling;e!==null;)qr(e,a,t),e=e.sibling}function Ai(e,a,t){var n=e.tag;if(n===5||n===6)e=e.stateNode,a?t.insertBefore(e,a):t.appendChild(e);else if(n!==4&&(n===27&&ht(e.type)&&(t=e.stateNode),e=e.child,e!==null))for(Ai(e,a,t),e=e.sibling;e!==null;)Ai(e,a,t),e=e.sibling}function fd(e){var a=e.stateNode,t=e.memoizedProps;try{for(var n=e.type,l=a.attributes;l.length;)a.removeAttributeNode(l[0]);Be(a,n,t),a[Qe]=e,a[Fe]=t}catch(i){be(e,e.return,i)}}var Za=!1,Ce=!1,zr=!1,pd=typeof WeakSet=="function"?WeakSet:Set,ke=null;function Om(e,a){if(e=e.containerInfo,ts=Hi,e=Sc(e),Oo(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{t=(t=e.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var l=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var r=0,d=-1,p=-1,y=0,N=0,O=e,T=null;a:for(;;){for(var A;O!==t||l!==0&&O.nodeType!==3||(d=r+l),O!==i||n!==0&&O.nodeType!==3||(p=r+n),O.nodeType===3&&(r+=O.nodeValue.length),(A=O.firstChild)!==null;)T=O,O=A;for(;;){if(O===e)break a;if(T===t&&++y===l&&(d=r),T===i&&++N===n&&(p=r),(A=O.nextSibling)!==null)break;O=T,T=O.parentNode}O=A}t=d===-1||p===-1?null:{start:d,end:p}}else t=null}t=t||{start:0,end:0}}else t=null;for(ns={focusedElem:e,selectionRange:t},Hi=!1,ke=a;ke!==null;)if(a=ke,e=a.child,(a.subtreeFlags&1024)!==0&&e!==null)e.return=a,ke=e;else for(;ke!==null;){switch(a=ke,i=a.alternate,e=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&i!==null){e=void 0,t=a,l=i.memoizedProps,i=i.memoizedState,n=t.stateNode;try{var Q=wt(t.type,l,t.elementType===t.type);e=n.getSnapshotBeforeUpdate(Q,i),n.__reactInternalSnapshotBeforeUpdate=e}catch(H){be(t,t.return,H)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,t=e.nodeType,t===9)os(e);else if(t===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":os(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=a.sibling,e!==null){e.return=a.return,ke=e;break}ke=a.return}}function md(e,a,t){var n=t.flags;switch(t.tag){case 0:case 11:case 15:ut(e,t),n&4&&rl(5,t);break;case 1:if(ut(e,t),n&4)if(e=t.stateNode,a===null)try{e.componentDidMount()}catch(r){be(t,t.return,r)}else{var l=wt(t.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(l,a,e.__reactInternalSnapshotBeforeUpdate)}catch(r){be(t,t.return,r)}}n&64&&sd(t),n&512&&sl(t,t.return);break;case 3:if(ut(e,t),n&64&&(e=t.updateQueue,e!==null)){if(a=null,t.child!==null)switch(t.child.tag){case 27:case 5:a=t.child.stateNode;break;case 1:a=t.child.stateNode}try{Pc(e,a)}catch(r){be(t,t.return,r)}}break;case 27:a===null&&n&4&&fd(t);case 26:case 5:ut(e,t),a===null&&n&4&&ud(t),n&512&&sl(t,t.return);break;case 12:ut(e,t);break;case 13:ut(e,t),n&4&&hd(e,t),n&64&&(e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(t=jm.bind(null,t),n_(e,t))));break;case 22:if(n=t.memoizedState!==null||Za,!n){a=a!==null&&a.memoizedState!==null||Ce,l=Za;var i=Ce;Za=n,(Ce=a)&&!i?dt(e,t,(t.subtreeFlags&8772)!==0):ut(e,t),Za=l,Ce=i}break;case 30:break;default:ut(e,t)}}function _d(e){var a=e.alternate;a!==null&&(e.alternate=null,_d(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&uo(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var xe=null,aa=!1;function Ka(e,a,t){for(t=t.child;t!==null;)gd(e,a,t),t=t.sibling}function gd(e,a,t){if(la&&typeof la.onCommitFiberUnmount=="function")try{la.onCommitFiberUnmount(Cn,t)}catch{}switch(t.tag){case 26:Ce||Oa(t,a),Ka(e,a,t),t.memoizedState?t.memoizedState.count--:t.stateNode&&(t=t.stateNode,t.parentNode.removeChild(t));break;case 27:Ce||Oa(t,a);var n=xe,l=aa;ht(t.type)&&(xe=t.stateNode,aa=!1),Ka(e,a,t),hl(t.stateNode),xe=n,aa=l;break;case 5:Ce||Oa(t,a);case 6:if(n=xe,l=aa,xe=null,Ka(e,a,t),xe=n,aa=l,xe!==null)if(aa)try{(xe.nodeType===9?xe.body:xe.nodeName==="HTML"?xe.ownerDocument.body:xe).removeChild(t.stateNode)}catch(i){be(t,a,i)}else try{xe.removeChild(t.stateNode)}catch(i){be(t,a,i)}break;case 18:xe!==null&&(aa?(e=xe,lf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,t.stateNode),Al(e)):lf(xe,t.stateNode));break;case 4:n=xe,l=aa,xe=t.stateNode.containerInfo,aa=!0,Ka(e,a,t),xe=n,aa=l;break;case 0:case 11:case 14:case 15:Ce||ct(2,t,a),Ce||ct(4,t,a),Ka(e,a,t);break;case 1:Ce||(Oa(t,a),n=t.stateNode,typeof n.componentWillUnmount=="function"&&cd(t,a,n)),Ka(e,a,t);break;case 21:Ka(e,a,t);break;case 22:Ce=(n=Ce)||t.memoizedState!==null,Ka(e,a,t),Ce=n;break;default:Ka(e,a,t)}}function hd(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Al(e)}catch(t){be(a,a.return,t)}}function qm(e){switch(e.tag){case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new pd),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new pd),a;default:throw Error(o(435,e.tag))}}function Dr(e,a){var t=qm(e);a.forEach(function(n){var l=Im.bind(null,e,n);t.has(n)||(t.add(n),n.then(l,l))})}function sa(e,a){var t=a.deletions;if(t!==null)for(var n=0;n<t.length;n++){var l=t[n],i=e,r=a,d=r;e:for(;d!==null;){switch(d.tag){case 27:if(ht(d.type)){xe=d.stateNode,aa=!1;break e}break;case 5:xe=d.stateNode,aa=!1;break e;case 3:case 4:xe=d.stateNode.containerInfo,aa=!0;break e}d=d.return}if(xe===null)throw Error(o(160));gd(i,r,l),xe=null,aa=!1,i=l.alternate,i!==null&&(i.return=null),l.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)bd(a,e),a=a.sibling}var Sa=null;function bd(e,a){var t=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:sa(a,e),ca(e),n&4&&(ct(3,e,e.return),rl(3,e),ct(5,e,e.return));break;case 1:sa(a,e),ca(e),n&512&&(Ce||t===null||Oa(t,t.return)),n&64&&Za&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(t=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=t===null?n:t.concat(n))));break;case 26:var l=Sa;if(sa(a,e),ca(e),n&512&&(Ce||t===null||Oa(t,t.return)),n&4){var i=t!==null?t.memoizedState:null;if(n=e.memoizedState,t===null)if(n===null)if(e.stateNode===null){e:{n=e.type,t=e.memoizedProps,l=l.ownerDocument||l;a:switch(n){case"title":i=l.getElementsByTagName("title")[0],(!i||i[zn]||i[Qe]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=l.createElement(n),l.head.insertBefore(i,l.querySelector("head > title"))),Be(i,n,t),i[Qe]=e,Le(i),n=i;break e;case"link":var r=pf("link","href",l).get(n+(t.href||""));if(r){for(var d=0;d<r.length;d++)if(i=r[d],i.getAttribute("href")===(t.href==null||t.href===""?null:t.href)&&i.getAttribute("rel")===(t.rel==null?null:t.rel)&&i.getAttribute("title")===(t.title==null?null:t.title)&&i.getAttribute("crossorigin")===(t.crossOrigin==null?null:t.crossOrigin)){r.splice(d,1);break a}}i=l.createElement(n),Be(i,n,t),l.head.appendChild(i);break;case"meta":if(r=pf("meta","content",l).get(n+(t.content||""))){for(d=0;d<r.length;d++)if(i=r[d],i.getAttribute("content")===(t.content==null?null:""+t.content)&&i.getAttribute("name")===(t.name==null?null:t.name)&&i.getAttribute("property")===(t.property==null?null:t.property)&&i.getAttribute("http-equiv")===(t.httpEquiv==null?null:t.httpEquiv)&&i.getAttribute("charset")===(t.charSet==null?null:t.charSet)){r.splice(d,1);break a}}i=l.createElement(n),Be(i,n,t),l.head.appendChild(i);break;default:throw Error(o(468,n))}i[Qe]=e,Le(i),n=i}e.stateNode=n}else mf(l,e.type,e.stateNode);else e.stateNode=ff(l,n,e.memoizedProps);else i!==n?(i===null?t.stateNode!==null&&(t=t.stateNode,t.parentNode.removeChild(t)):i.count--,n===null?mf(l,e.type,e.stateNode):ff(l,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Cr(e,e.memoizedProps,t.memoizedProps)}break;case 27:sa(a,e),ca(e),n&512&&(Ce||t===null||Oa(t,t.return)),t!==null&&n&4&&Cr(e,e.memoizedProps,t.memoizedProps);break;case 5:if(sa(a,e),ca(e),n&512&&(Ce||t===null||Oa(t,t.return)),e.flags&32){l=e.stateNode;try{Jt(l,"")}catch(A){be(e,e.return,A)}}n&4&&e.stateNode!=null&&(l=e.memoizedProps,Cr(e,l,t!==null?t.memoizedProps:l)),n&1024&&(zr=!0);break;case 6:if(sa(a,e),ca(e),n&4){if(e.stateNode===null)throw Error(o(162));n=e.memoizedProps,t=e.stateNode;try{t.nodeValue=n}catch(A){be(e,e.return,A)}}break;case 3:if(Ii=null,l=Sa,Sa=Ui(a.containerInfo),sa(a,e),Sa=l,ca(e),n&4&&t!==null&&t.memoizedState.isDehydrated)try{Al(a.containerInfo)}catch(A){be(e,e.return,A)}zr&&(zr=!1,vd(e));break;case 4:n=Sa,Sa=Ui(e.stateNode.containerInfo),sa(a,e),ca(e),Sa=n;break;case 12:sa(a,e),ca(e);break;case 13:sa(a,e),ca(e),e.child.flags&8192&&e.memoizedState!==null!=(t!==null&&t.memoizedState!==null)&&(jr=Na()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Dr(e,n)));break;case 22:l=e.memoizedState!==null;var p=t!==null&&t.memoizedState!==null,y=Za,N=Ce;if(Za=y||l,Ce=N||p,sa(a,e),Ce=N,Za=y,ca(e),n&8192)e:for(a=e.stateNode,a._visibility=l?a._visibility&-2:a._visibility|1,l&&(t===null||p||Za||Ce||Ut(e)),t=null,a=e;;){if(a.tag===5||a.tag===26){if(t===null){p=t=a;try{if(i=p.stateNode,l)r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{d=p.stateNode;var O=p.memoizedProps.style,T=O!=null&&O.hasOwnProperty("display")?O.display:null;d.style.display=T==null||typeof T=="boolean"?"":(""+T).trim()}}catch(A){be(p,p.return,A)}}}else if(a.tag===6){if(t===null){p=a;try{p.stateNode.nodeValue=l?"":p.memoizedProps}catch(A){be(p,p.return,A)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;t===a&&(t=null),a=a.return}t===a&&(t=null),a.sibling.return=a.return,a=a.sibling}n&4&&(n=e.updateQueue,n!==null&&(t=n.retryQueue,t!==null&&(n.retryQueue=null,Dr(e,t))));break;case 19:sa(a,e),ca(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Dr(e,n)));break;case 30:break;case 21:break;default:sa(a,e),ca(e)}}function ca(e){var a=e.flags;if(a&2){try{for(var t,n=e.return;n!==null;){if(dd(n)){t=n;break}n=n.return}if(t==null)throw Error(o(160));switch(t.tag){case 27:var l=t.stateNode,i=Or(e);Ai(e,i,l);break;case 5:var r=t.stateNode;t.flags&32&&(Jt(r,""),t.flags&=-33);var d=Or(e);Ai(e,d,r);break;case 3:case 4:var p=t.stateNode.containerInfo,y=Or(e);qr(e,y,p);break;default:throw Error(o(161))}}catch(N){be(e,e.return,N)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function vd(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;vd(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function ut(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)md(e,a.alternate,a),a=a.sibling}function Ut(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:ct(4,a,a.return),Ut(a);break;case 1:Oa(a,a.return);var t=a.stateNode;typeof t.componentWillUnmount=="function"&&cd(a,a.return,t),Ut(a);break;case 27:hl(a.stateNode);case 26:case 5:Oa(a,a.return),Ut(a);break;case 22:a.memoizedState===null&&Ut(a);break;case 30:Ut(a);break;default:Ut(a)}e=e.sibling}}function dt(e,a,t){for(t=t&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var n=a.alternate,l=e,i=a,r=i.flags;switch(i.tag){case 0:case 11:case 15:dt(l,i,t),rl(4,i);break;case 1:if(dt(l,i,t),n=i,l=n.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(y){be(n,n.return,y)}if(n=i,l=n.updateQueue,l!==null){var d=n.stateNode;try{var p=l.shared.hiddenCallbacks;if(p!==null)for(l.shared.hiddenCallbacks=null,l=0;l<p.length;l++)Kc(p[l],d)}catch(y){be(n,n.return,y)}}t&&r&64&&sd(i),sl(i,i.return);break;case 27:fd(i);case 26:case 5:dt(l,i,t),t&&n===null&&r&4&&ud(i),sl(i,i.return);break;case 12:dt(l,i,t);break;case 13:dt(l,i,t),t&&r&4&&hd(l,i);break;case 22:i.memoizedState===null&&dt(l,i,t),sl(i,i.return);break;case 30:break;default:dt(l,i,t)}a=a.sibling}}function Lr(e,a){var t=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==t&&(e!=null&&e.refCount++,t!=null&&Zn(t))}function Gr(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Zn(e))}function qa(e,a,t,n){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ed(e,a,t,n),a=a.sibling}function Ed(e,a,t,n){var l=a.flags;switch(a.tag){case 0:case 11:case 15:qa(e,a,t,n),l&2048&&rl(9,a);break;case 1:qa(e,a,t,n);break;case 3:qa(e,a,t,n),l&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Zn(e)));break;case 12:if(l&2048){qa(e,a,t,n),e=a.stateNode;try{var i=a.memoizedProps,r=i.id,d=i.onPostCommit;typeof d=="function"&&d(r,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(p){be(a,a.return,p)}}else qa(e,a,t,n);break;case 13:qa(e,a,t,n);break;case 23:break;case 22:i=a.stateNode,r=a.alternate,a.memoizedState!==null?i._visibility&2?qa(e,a,t,n):cl(e,a):i._visibility&2?qa(e,a,t,n):(i._visibility|=2,gn(e,a,t,n,(a.subtreeFlags&10256)!==0)),l&2048&&Lr(r,a);break;case 24:qa(e,a,t,n),l&2048&&Gr(a.alternate,a);break;default:qa(e,a,t,n)}}function gn(e,a,t,n,l){for(l=l&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var i=e,r=a,d=t,p=n,y=r.flags;switch(r.tag){case 0:case 11:case 15:gn(i,r,d,p,l),rl(8,r);break;case 23:break;case 22:var N=r.stateNode;r.memoizedState!==null?N._visibility&2?gn(i,r,d,p,l):cl(i,r):(N._visibility|=2,gn(i,r,d,p,l)),l&&y&2048&&Lr(r.alternate,r);break;case 24:gn(i,r,d,p,l),l&&y&2048&&Gr(r.alternate,r);break;default:gn(i,r,d,p,l)}a=a.sibling}}function cl(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var t=e,n=a,l=n.flags;switch(n.tag){case 22:cl(t,n),l&2048&&Lr(n.alternate,n);break;case 24:cl(t,n),l&2048&&Gr(n.alternate,n);break;default:cl(t,n)}a=a.sibling}}var ul=8192;function hn(e){if(e.subtreeFlags&ul)for(e=e.child;e!==null;)yd(e),e=e.sibling}function yd(e){switch(e.tag){case 26:hn(e),e.flags&ul&&e.memoizedState!==null&&g_(Sa,e.memoizedState,e.memoizedProps);break;case 5:hn(e);break;case 3:case 4:var a=Sa;Sa=Ui(e.stateNode.containerInfo),hn(e),Sa=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=ul,ul=16777216,hn(e),ul=a):hn(e));break;default:hn(e)}}function xd(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function dl(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var t=0;t<a.length;t++){var n=a[t];ke=n,Sd(n,e)}xd(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Td(e),e=e.sibling}function Td(e){switch(e.tag){case 0:case 11:case 15:dl(e),e.flags&2048&&ct(9,e,e.return);break;case 3:dl(e);break;case 12:dl(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,Ri(e)):dl(e);break;default:dl(e)}}function Ri(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var t=0;t<a.length;t++){var n=a[t];ke=n,Sd(n,e)}xd(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:ct(8,a,a.return),Ri(a);break;case 22:t=a.stateNode,t._visibility&2&&(t._visibility&=-3,Ri(a));break;default:Ri(a)}e=e.sibling}}function Sd(e,a){for(;ke!==null;){var t=ke;switch(t.tag){case 0:case 11:case 15:ct(8,t,a);break;case 23:case 22:if(t.memoizedState!==null&&t.memoizedState.cachePool!==null){var n=t.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Zn(t.memoizedState.cache)}if(n=t.child,n!==null)n.return=t,ke=n;else e:for(t=e;ke!==null;){n=ke;var l=n.sibling,i=n.return;if(_d(n),n===t){ke=null;break e}if(l!==null){l.return=i,ke=l;break e}ke=i}}}var zm={getCacheForType:function(e){var a=Ze(ze),t=a.data.get(e);return t===void 0&&(t=e(),a.data.set(e,t)),t}},Dm=typeof WeakMap=="function"?WeakMap:Map,ue=0,ve=null,ee=null,le=0,de=0,ua=null,ft=!1,bn=!1,kr=!1,Pa=0,Re=0,pt=0,jt=0,wr=0,ya=0,vn=0,fl=null,ta=null,Ur=!1,jr=0,Ni=1/0,Mi=null,mt=null,Ve=0,_t=null,En=null,yn=0,Ir=0,Vr=null,Ad=null,pl=0,Br=null;function da(){if((ue&2)!==0&&le!==0)return le&-le;if(M.T!==null){var e=sn;return e!==0?e:Pr()}return Vs()}function Rd(){ya===0&&(ya=(le&536870912)===0||se?ws():536870912);var e=Ea.current;return e!==null&&(e.flags|=32),ya}function fa(e,a,t){(e===ve&&(de===2||de===9)||e.cancelPendingCommit!==null)&&(xn(e,0),gt(e,le,ya,!1)),qn(e,t),((ue&2)===0||e!==ve)&&(e===ve&&((ue&2)===0&&(jt|=t),Re===4&&gt(e,le,ya,!1)),za(e))}function Nd(e,a,t){if((ue&6)!==0)throw Error(o(327));var n=!t&&(a&124)===0&&(a&e.expiredLanes)===0||On(e,a),l=n?km(e,a):Xr(e,a,!0),i=n;do{if(l===0){bn&&!n&&gt(e,a,0,!1);break}else{if(t=e.current.alternate,i&&!Lm(t)){l=Xr(e,a,!1),i=!1;continue}if(l===2){if(i=a,e.errorRecoveryDisabledLanes&i)var r=0;else r=e.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){a=r;e:{var d=e;l=fl;var p=d.current.memoizedState.isDehydrated;if(p&&(xn(d,r).flags|=256),r=Xr(d,r,!1),r!==2){if(kr&&!p){d.errorRecoveryDisabledLanes|=i,jt|=i,l=4;break e}i=ta,ta=l,i!==null&&(ta===null?ta=i:ta.push.apply(ta,i))}l=r}if(i=!1,l!==2)continue}}if(l===1){xn(e,0),gt(e,a,0,!0);break}e:{switch(n=e,i=l,i){case 0:case 1:throw Error(o(345));case 4:if((a&4194048)!==a)break;case 6:gt(n,a,ya,!ft);break e;case 2:ta=null;break;case 3:case 5:break;default:throw Error(o(329))}if((a&62914560)===a&&(l=jr+300-Na(),10<l)){if(gt(n,a,ya,!ft),jl(n,0,!0)!==0)break e;n.timeoutHandle=tf(Md.bind(null,n,t,ta,Mi,Ur,a,ya,jt,vn,ft,i,2,-0,0),l);break e}Md(n,t,ta,Mi,Ur,a,ya,jt,vn,ft,i,0,-0,0)}}break}while(!0);za(e)}function Md(e,a,t,n,l,i,r,d,p,y,N,O,T,A){if(e.timeoutHandle=-1,O=a.subtreeFlags,(O&8192||(O&16785408)===16785408)&&(El={stylesheets:null,count:0,unsuspend:__},yd(a),O=h_(),O!==null)){e.cancelPendingCommit=O(Gd.bind(null,e,a,i,t,n,l,r,d,p,N,1,T,A)),gt(e,i,r,!y);return}Gd(e,a,i,t,n,l,r,d,p)}function Lm(e){for(var a=e;;){var t=a.tag;if((t===0||t===11||t===15)&&a.flags&16384&&(t=a.updateQueue,t!==null&&(t=t.stores,t!==null)))for(var n=0;n<t.length;n++){var l=t[n],i=l.getSnapshot;l=l.value;try{if(!oa(i(),l))return!1}catch{return!1}}if(t=a.child,a.subtreeFlags&16384&&t!==null)t.return=a,a=t;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function gt(e,a,t,n){a&=~wr,a&=~jt,e.suspendedLanes|=a,e.pingedLanes&=~a,n&&(e.warmLanes|=a),n=e.expirationTimes;for(var l=a;0<l;){var i=31-ia(l),r=1<<i;n[i]=-1,l&=~r}t!==0&&js(e,t,a)}function Ci(){return(ue&6)===0?(ml(0),!1):!0}function Hr(){if(ee!==null){if(de===0)var e=ee.return;else e=ee,Va=Dt=null,or(e),mn=null,ll=0,e=ee;for(;e!==null;)rd(e.alternate,e),e=e.return;ee=null}}function xn(e,a){var t=e.timeoutHandle;t!==-1&&(e.timeoutHandle=-1,Fm(t)),t=e.cancelPendingCommit,t!==null&&(e.cancelPendingCommit=null,t()),Hr(),ve=e,ee=t=Ua(e.current,null),le=a,de=0,ua=null,ft=!1,bn=On(e,a),kr=!1,vn=ya=wr=jt=pt=Re=0,ta=fl=null,Ur=!1,(a&8)!==0&&(a|=a&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=a;0<n;){var l=31-ia(n),i=1<<l;a|=e[l],n&=~i}return Pa=a,$l(),t}function Cd(e,a){F=null,M.H=gi,a===Pn||a===oi?(a=Qc(),de=3):a===Hc?(a=Qc(),de=4):de=a===Zu?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ua=a,ee===null&&(Re=1,yi(e,ga(a,e.current)))}function Od(){var e=M.H;return M.H=gi,e===null?gi:e}function qd(){var e=M.A;return M.A=zm,e}function Yr(){Re=4,ft||(le&4194048)!==le&&Ea.current!==null||(bn=!0),(pt&134217727)===0&&(jt&134217727)===0||ve===null||gt(ve,le,ya,!1)}function Xr(e,a,t){var n=ue;ue|=2;var l=Od(),i=qd();(ve!==e||le!==a)&&(Mi=null,xn(e,a)),a=!1;var r=Re;e:do try{if(de!==0&&ee!==null){var d=ee,p=ua;switch(de){case 8:Hr(),r=6;break e;case 3:case 2:case 9:case 6:Ea.current===null&&(a=!0);var y=de;if(de=0,ua=null,Tn(e,d,p,y),t&&bn){r=0;break e}break;default:y=de,de=0,ua=null,Tn(e,d,p,y)}}Gm(),r=Re;break}catch(N){Cd(e,N)}while(!0);return a&&e.shellSuspendCounter++,Va=Dt=null,ue=n,M.H=l,M.A=i,ee===null&&(ve=null,le=0,$l()),r}function Gm(){for(;ee!==null;)zd(ee)}function km(e,a){var t=ue;ue|=2;var n=Od(),l=qd();ve!==e||le!==a?(Mi=null,Ni=Na()+500,xn(e,a)):bn=On(e,a);e:do try{if(de!==0&&ee!==null){a=ee;var i=ua;a:switch(de){case 1:de=0,ua=null,Tn(e,a,i,1);break;case 2:case 9:if(Yc(i)){de=0,ua=null,Dd(a);break}a=function(){de!==2&&de!==9||ve!==e||(de=7),za(e)},i.then(a,a);break e;case 3:de=7;break e;case 4:de=5;break e;case 7:Yc(i)?(de=0,ua=null,Dd(a)):(de=0,ua=null,Tn(e,a,i,7));break;case 5:var r=null;switch(ee.tag){case 26:r=ee.memoizedState;case 5:case 27:var d=ee;if(!r||_f(r)){de=0,ua=null;var p=d.sibling;if(p!==null)ee=p;else{var y=d.return;y!==null?(ee=y,Oi(y)):ee=null}break a}}de=0,ua=null,Tn(e,a,i,5);break;case 6:de=0,ua=null,Tn(e,a,i,6);break;case 8:Hr(),Re=6;break e;default:throw Error(o(462))}}wm();break}catch(N){Cd(e,N)}while(!0);return Va=Dt=null,M.H=n,M.A=l,ue=t,ee!==null?0:(ve=null,le=0,$l(),Re)}function wm(){for(;ee!==null&&!ip();)zd(ee)}function zd(e){var a=id(e.alternate,e,Pa);e.memoizedProps=e.pendingProps,a===null?Oi(e):ee=a}function Dd(e){var a=e,t=a.alternate;switch(a.tag){case 15:case 0:a=Wu(t,a,a.pendingProps,a.type,void 0,le);break;case 11:a=Wu(t,a,a.pendingProps,a.type.render,a.ref,le);break;case 5:or(a);default:rd(t,a),a=ee=Lc(a,Pa),a=id(t,a,Pa)}e.memoizedProps=e.pendingProps,a===null?Oi(e):ee=a}function Tn(e,a,t,n){Va=Dt=null,or(a),mn=null,ll=0;var l=a.return;try{if(Rm(e,l,a,t,le)){Re=1,yi(e,ga(t,e.current)),ee=null;return}}catch(i){if(l!==null)throw ee=l,i;Re=1,yi(e,ga(t,e.current)),ee=null;return}a.flags&32768?(se||n===1?e=!0:bn||(le&536870912)!==0?e=!1:(ft=e=!0,(n===2||n===9||n===3||n===6)&&(n=Ea.current,n!==null&&n.tag===13&&(n.flags|=16384))),Ld(a,e)):Oi(a)}function Oi(e){var a=e;do{if((a.flags&32768)!==0){Ld(a,ft);return}e=a.return;var t=Mm(a.alternate,a,Pa);if(t!==null){ee=t;return}if(a=a.sibling,a!==null){ee=a;return}ee=a=e}while(a!==null);Re===0&&(Re=5)}function Ld(e,a){do{var t=Cm(e.alternate,e);if(t!==null){t.flags&=32767,ee=t;return}if(t=e.return,t!==null&&(t.flags|=32768,t.subtreeFlags=0,t.deletions=null),!a&&(e=e.sibling,e!==null)){ee=e;return}ee=e=t}while(e!==null);Re=6,ee=null}function Gd(e,a,t,n,l,i,r,d,p){e.cancelPendingCommit=null;do qi();while(Ve!==0);if((ue&6)!==0)throw Error(o(327));if(a!==null){if(a===e.current)throw Error(o(177));if(i=a.lanes|a.childLanes,i|=Go,_p(e,t,i,r,d,p),e===ve&&(ee=ve=null,le=0),En=a,_t=e,yn=t,Ir=i,Vr=l,Ad=n,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Vm(kl,function(){return Id(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||n){n=M.T,M.T=null,l=L.p,L.p=2,r=ue,ue|=4;try{Om(e,a,t)}finally{ue=r,L.p=l,M.T=n}}Ve=1,kd(),wd(),Ud()}}function kd(){if(Ve===1){Ve=0;var e=_t,a=En,t=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||t){t=M.T,M.T=null;var n=L.p;L.p=2;var l=ue;ue|=4;try{bd(a,e);var i=ns,r=Sc(e.containerInfo),d=i.focusedElem,p=i.selectionRange;if(r!==d&&d&&d.ownerDocument&&Tc(d.ownerDocument.documentElement,d)){if(p!==null&&Oo(d)){var y=p.start,N=p.end;if(N===void 0&&(N=y),"selectionStart"in d)d.selectionStart=y,d.selectionEnd=Math.min(N,d.value.length);else{var O=d.ownerDocument||document,T=O&&O.defaultView||window;if(T.getSelection){var A=T.getSelection(),Q=d.textContent.length,H=Math.min(p.start,Q),_e=p.end===void 0?H:Math.min(p.end,Q);!A.extend&&H>_e&&(r=_e,_e=H,H=r);var v=xc(d,H),g=xc(d,_e);if(v&&g&&(A.rangeCount!==1||A.anchorNode!==v.node||A.anchorOffset!==v.offset||A.focusNode!==g.node||A.focusOffset!==g.offset)){var E=O.createRange();E.setStart(v.node,v.offset),A.removeAllRanges(),H>_e?(A.addRange(E),A.extend(g.node,g.offset)):(E.setEnd(g.node,g.offset),A.addRange(E))}}}}for(O=[],A=d;A=A.parentNode;)A.nodeType===1&&O.push({element:A,left:A.scrollLeft,top:A.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<O.length;d++){var C=O[d];C.element.scrollLeft=C.left,C.element.scrollTop=C.top}}Hi=!!ts,ns=ts=null}finally{ue=l,L.p=n,M.T=t}}e.current=a,Ve=2}}function wd(){if(Ve===2){Ve=0;var e=_t,a=En,t=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||t){t=M.T,M.T=null;var n=L.p;L.p=2;var l=ue;ue|=4;try{md(e,a.alternate,a)}finally{ue=l,L.p=n,M.T=t}}Ve=3}}function Ud(){if(Ve===4||Ve===3){Ve=0,op();var e=_t,a=En,t=yn,n=Ad;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ve=5:(Ve=0,En=_t=null,jd(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(mt=null),so(t),a=a.stateNode,la&&typeof la.onCommitFiberRoot=="function")try{la.onCommitFiberRoot(Cn,a,void 0,(a.current.flags&128)===128)}catch{}if(n!==null){a=M.T,l=L.p,L.p=2,M.T=null;try{for(var i=e.onRecoverableError,r=0;r<n.length;r++){var d=n[r];i(d.value,{componentStack:d.stack})}}finally{M.T=a,L.p=l}}(yn&3)!==0&&qi(),za(e),l=e.pendingLanes,(t&4194090)!==0&&(l&42)!==0?e===Br?pl++:(pl=0,Br=e):pl=0,ml(0)}}function jd(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,Zn(a)))}function qi(e){return kd(),wd(),Ud(),Id()}function Id(){if(Ve!==5)return!1;var e=_t,a=Ir;Ir=0;var t=so(yn),n=M.T,l=L.p;try{L.p=32>t?32:t,M.T=null,t=Vr,Vr=null;var i=_t,r=yn;if(Ve=0,En=_t=null,yn=0,(ue&6)!==0)throw Error(o(331));var d=ue;if(ue|=4,Td(i.current),Ed(i,i.current,r,t),ue=d,ml(0,!1),la&&typeof la.onPostCommitFiberRoot=="function")try{la.onPostCommitFiberRoot(Cn,i)}catch{}return!0}finally{L.p=l,M.T=n,jd(e,a)}}function Vd(e,a,t){a=ga(t,a),a=Er(e.stateNode,a,2),e=it(e,a,2),e!==null&&(qn(e,2),za(e))}function be(e,a,t){if(e.tag===3)Vd(e,e,t);else for(;a!==null;){if(a.tag===3){Vd(a,e,t);break}else if(a.tag===1){var n=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(mt===null||!mt.has(n))){e=ga(t,e),t=Xu(2),n=it(a,t,2),n!==null&&(Qu(t,n,a,e),qn(n,2),za(n));break}}a=a.return}}function Qr(e,a,t){var n=e.pingCache;if(n===null){n=e.pingCache=new Dm;var l=new Set;n.set(a,l)}else l=n.get(a),l===void 0&&(l=new Set,n.set(a,l));l.has(t)||(kr=!0,l.add(t),e=Um.bind(null,e,a,t),a.then(e,e))}function Um(e,a,t){var n=e.pingCache;n!==null&&n.delete(a),e.pingedLanes|=e.suspendedLanes&t,e.warmLanes&=~t,ve===e&&(le&t)===t&&(Re===4||Re===3&&(le&62914560)===le&&300>Na()-jr?(ue&2)===0&&xn(e,0):wr|=t,vn===le&&(vn=0)),za(e)}function Bd(e,a){a===0&&(a=Us()),e=nn(e,a),e!==null&&(qn(e,a),za(e))}function jm(e){var a=e.memoizedState,t=0;a!==null&&(t=a.retryLane),Bd(e,t)}function Im(e,a){var t=0;switch(e.tag){case 13:var n=e.stateNode,l=e.memoizedState;l!==null&&(t=l.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(o(314))}n!==null&&n.delete(a),Bd(e,t)}function Vm(e,a){return lo(e,a)}var zi=null,Sn=null,Zr=!1,Di=!1,Kr=!1,It=0;function za(e){e!==Sn&&e.next===null&&(Sn===null?zi=Sn=e:Sn=Sn.next=e),Di=!0,Zr||(Zr=!0,Hm())}function ml(e,a){if(!Kr&&Di){Kr=!0;do for(var t=!1,n=zi;n!==null;){if(e!==0){var l=n.pendingLanes;if(l===0)var i=0;else{var r=n.suspendedLanes,d=n.pingedLanes;i=(1<<31-ia(42|e)+1)-1,i&=l&~(r&~d),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(t=!0,Qd(n,i))}else i=le,i=jl(n,n===ve?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(i&3)===0||On(n,i)||(t=!0,Qd(n,i));n=n.next}while(t);Kr=!1}}function Bm(){Hd()}function Hd(){Di=Zr=!1;var e=0;It!==0&&($m()&&(e=It),It=0);for(var a=Na(),t=null,n=zi;n!==null;){var l=n.next,i=Yd(n,a);i===0?(n.next=null,t===null?zi=l:t.next=l,l===null&&(Sn=t)):(t=n,(e!==0||(i&3)!==0)&&(Di=!0)),n=l}ml(e)}function Yd(e,a){for(var t=e.suspendedLanes,n=e.pingedLanes,l=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var r=31-ia(i),d=1<<r,p=l[r];p===-1?((d&t)===0||(d&n)!==0)&&(l[r]=mp(d,a)):p<=a&&(e.expiredLanes|=d),i&=~d}if(a=ve,t=le,t=jl(e,e===a?t:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,t===0||e===a&&(de===2||de===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&io(n),e.callbackNode=null,e.callbackPriority=0;if((t&3)===0||On(e,t)){if(a=t&-t,a===e.callbackPriority)return a;switch(n!==null&&io(n),so(t)){case 2:case 8:t=Gs;break;case 32:t=kl;break;case 268435456:t=ks;break;default:t=kl}return n=Xd.bind(null,e),t=lo(t,n),e.callbackPriority=a,e.callbackNode=t,a}return n!==null&&n!==null&&io(n),e.callbackPriority=2,e.callbackNode=null,2}function Xd(e,a){if(Ve!==0&&Ve!==5)return e.callbackNode=null,e.callbackPriority=0,null;var t=e.callbackNode;if(qi()&&e.callbackNode!==t)return null;var n=le;return n=jl(e,e===ve?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(Nd(e,n,a),Yd(e,Na()),e.callbackNode!=null&&e.callbackNode===t?Xd.bind(null,e):null)}function Qd(e,a){if(qi())return null;Nd(e,a,!0)}function Hm(){Wm(function(){(ue&6)!==0?lo(Ls,Bm):Hd()})}function Pr(){return It===0&&(It=ws()),It}function Zd(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Yl(""+e)}function Kd(e,a){var t=a.ownerDocument.createElement("input");return t.name=a.name,t.value=a.value,e.id&&t.setAttribute("form",e.id),a.parentNode.insertBefore(t,a),e=new FormData(e),t.parentNode.removeChild(t),e}function Ym(e,a,t,n,l){if(a==="submit"&&t&&t.stateNode===l){var i=Zd((l[Fe]||null).action),r=n.submitter;r&&(a=(a=r[Fe]||null)?Zd(a.formAction):r.getAttribute("formAction"),a!==null&&(i=a,r=null));var d=new Kl("action","action",null,n,l);e.push({event:d,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(It!==0){var p=r?Kd(l,r):new FormData(l);_r(t,{pending:!0,data:p,method:l.method,action:i},null,p)}}else typeof i=="function"&&(d.preventDefault(),p=r?Kd(l,r):new FormData(l),_r(t,{pending:!0,data:p,method:l.method,action:i},i,p))},currentTarget:l}]})}}for(var Jr=0;Jr<Lo.length;Jr++){var $r=Lo[Jr],Xm=$r.toLowerCase(),Qm=$r[0].toUpperCase()+$r.slice(1);Ta(Xm,"on"+Qm)}Ta(Nc,"onAnimationEnd"),Ta(Mc,"onAnimationIteration"),Ta(Cc,"onAnimationStart"),Ta("dblclick","onDoubleClick"),Ta("focusin","onFocus"),Ta("focusout","onBlur"),Ta(cm,"onTransitionRun"),Ta(um,"onTransitionStart"),Ta(dm,"onTransitionCancel"),Ta(Oc,"onTransitionEnd"),Zt("onMouseEnter",["mouseout","mouseover"]),Zt("onMouseLeave",["mouseout","mouseover"]),Zt("onPointerEnter",["pointerout","pointerover"]),Zt("onPointerLeave",["pointerout","pointerover"]),St("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),St("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),St("onBeforeInput",["compositionend","keypress","textInput","paste"]),St("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),St("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),St("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zm=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_l));function Pd(e,a){a=(a&4)!==0;for(var t=0;t<e.length;t++){var n=e[t],l=n.event;n=n.listeners;e:{var i=void 0;if(a)for(var r=n.length-1;0<=r;r--){var d=n[r],p=d.instance,y=d.currentTarget;if(d=d.listener,p!==i&&l.isPropagationStopped())break e;i=d,l.currentTarget=y;try{i(l)}catch(N){Ei(N)}l.currentTarget=null,i=p}else for(r=0;r<n.length;r++){if(d=n[r],p=d.instance,y=d.currentTarget,d=d.listener,p!==i&&l.isPropagationStopped())break e;i=d,l.currentTarget=y;try{i(l)}catch(N){Ei(N)}l.currentTarget=null,i=p}}}}function ae(e,a){var t=a[co];t===void 0&&(t=a[co]=new Set);var n=e+"__bubble";t.has(n)||(Jd(a,e,2,!1),t.add(n))}function Fr(e,a,t){var n=0;a&&(n|=4),Jd(t,e,n,a)}var Li="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Li]){e[Li]=!0,Hs.forEach(function(t){t!=="selectionchange"&&(Zm.has(t)||Fr(t,!1,e),Fr(t,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[Li]||(a[Li]=!0,Fr("selectionchange",!1,a))}}function Jd(e,a,t,n){switch(yf(a)){case 2:var l=E_;break;case 8:l=y_;break;default:l=ps}t=l.bind(null,a,t,e),l=void 0,!yo||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(l=!0),n?l!==void 0?e.addEventListener(a,t,{capture:!0,passive:l}):e.addEventListener(a,t,!0):l!==void 0?e.addEventListener(a,t,{passive:l}):e.addEventListener(a,t,!1)}function es(e,a,t,n,l){var i=n;if((a&1)===0&&(a&2)===0&&n!==null)e:for(;;){if(n===null)return;var r=n.tag;if(r===3||r===4){var d=n.stateNode.containerInfo;if(d===l)break;if(r===4)for(r=n.return;r!==null;){var p=r.tag;if((p===3||p===4)&&r.stateNode.containerInfo===l)return;r=r.return}for(;d!==null;){if(r=Yt(d),r===null)return;if(p=r.tag,p===5||p===6||p===26||p===27){n=i=r;continue e}d=d.parentNode}}n=n.return}nc(function(){var y=i,N=vo(t),O=[];e:{var T=qc.get(e);if(T!==void 0){var A=Kl,Q=e;switch(e){case"keypress":if(Ql(t)===0)break e;case"keydown":case"keyup":A=Vp;break;case"focusin":Q="focus",A=Ao;break;case"focusout":Q="blur",A=Ao;break;case"beforeblur":case"afterblur":A=Ao;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=oc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=Cp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=Yp;break;case Nc:case Mc:case Cc:A=zp;break;case Oc:A=Qp;break;case"scroll":case"scrollend":A=Np;break;case"wheel":A=Kp;break;case"copy":case"cut":case"paste":A=Lp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=sc;break;case"toggle":case"beforetoggle":A=Jp}var H=(a&4)!==0,_e=!H&&(e==="scroll"||e==="scrollend"),v=H?T!==null?T+"Capture":null:T;H=[];for(var g=y,E;g!==null;){var C=g;if(E=C.stateNode,C=C.tag,C!==5&&C!==26&&C!==27||E===null||v===null||(C=Ln(g,v),C!=null&&H.push(gl(g,C,E))),_e)break;g=g.return}0<H.length&&(T=new A(T,Q,null,t,N),O.push({event:T,listeners:H}))}}if((a&7)===0){e:{if(T=e==="mouseover"||e==="pointerover",A=e==="mouseout"||e==="pointerout",T&&t!==bo&&(Q=t.relatedTarget||t.fromElement)&&(Yt(Q)||Q[Ht]))break e;if((A||T)&&(T=N.window===N?N:(T=N.ownerDocument)?T.defaultView||T.parentWindow:window,A?(Q=t.relatedTarget||t.toElement,A=y,Q=Q?Yt(Q):null,Q!==null&&(_e=f(Q),H=Q.tag,Q!==_e||H!==5&&H!==27&&H!==6)&&(Q=null)):(A=null,Q=y),A!==Q)){if(H=oc,C="onMouseLeave",v="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(H=sc,C="onPointerLeave",v="onPointerEnter",g="pointer"),_e=A==null?T:Dn(A),E=Q==null?T:Dn(Q),T=new H(C,g+"leave",A,t,N),T.target=_e,T.relatedTarget=E,C=null,Yt(N)===y&&(H=new H(v,g+"enter",Q,t,N),H.target=E,H.relatedTarget=_e,C=H),_e=C,A&&Q)a:{for(H=A,v=Q,g=0,E=H;E;E=An(E))g++;for(E=0,C=v;C;C=An(C))E++;for(;0<g-E;)H=An(H),g--;for(;0<E-g;)v=An(v),E--;for(;g--;){if(H===v||v!==null&&H===v.alternate)break a;H=An(H),v=An(v)}H=null}else H=null;A!==null&&$d(O,T,A,H,!1),Q!==null&&_e!==null&&$d(O,_e,Q,H,!0)}}e:{if(T=y?Dn(y):window,A=T.nodeName&&T.nodeName.toLowerCase(),A==="select"||A==="input"&&T.type==="file")var w=gc;else if(mc(T))if(hc)w=om;else{w=lm;var W=nm}else A=T.nodeName,!A||A.toLowerCase()!=="input"||T.type!=="checkbox"&&T.type!=="radio"?y&&ho(y.elementType)&&(w=gc):w=im;if(w&&(w=w(e,y))){_c(O,w,t,N);break e}W&&W(e,T,y),e==="focusout"&&y&&T.type==="number"&&y.memoizedProps.value!=null&&go(T,"number",T.value)}switch(W=y?Dn(y):window,e){case"focusin":(mc(W)||W.contentEditable==="true")&&(en=W,qo=y,Bn=null);break;case"focusout":Bn=qo=en=null;break;case"mousedown":zo=!0;break;case"contextmenu":case"mouseup":case"dragend":zo=!1,Ac(O,t,N);break;case"selectionchange":if(sm)break;case"keydown":case"keyup":Ac(O,t,N)}var I;if(No)e:{switch(e){case"compositionstart":var Y="onCompositionStart";break e;case"compositionend":Y="onCompositionEnd";break e;case"compositionupdate":Y="onCompositionUpdate";break e}Y=void 0}else Wt?fc(e,t)&&(Y="onCompositionEnd"):e==="keydown"&&t.keyCode===229&&(Y="onCompositionStart");Y&&(cc&&t.locale!=="ko"&&(Wt||Y!=="onCompositionStart"?Y==="onCompositionEnd"&&Wt&&(I=lc()):(at=N,xo="value"in at?at.value:at.textContent,Wt=!0)),W=Gi(y,Y),0<W.length&&(Y=new rc(Y,e,null,t,N),O.push({event:Y,listeners:W}),I?Y.data=I:(I=pc(t),I!==null&&(Y.data=I)))),(I=Fp?Wp(e,t):em(e,t))&&(Y=Gi(y,"onBeforeInput"),0<Y.length&&(W=new rc("onBeforeInput","beforeinput",null,t,N),O.push({event:W,listeners:Y}),W.data=I)),Ym(O,e,y,t,N)}Pd(O,a)})}function gl(e,a,t){return{instance:e,listener:a,currentTarget:t}}function Gi(e,a){for(var t=a+"Capture",n=[];e!==null;){var l=e,i=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||i===null||(l=Ln(e,t),l!=null&&n.unshift(gl(e,l,i)),l=Ln(e,a),l!=null&&n.push(gl(e,l,i))),e.tag===3)return n;e=e.return}return[]}function An(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function $d(e,a,t,n,l){for(var i=a._reactName,r=[];t!==null&&t!==n;){var d=t,p=d.alternate,y=d.stateNode;if(d=d.tag,p!==null&&p===n)break;d!==5&&d!==26&&d!==27||y===null||(p=y,l?(y=Ln(t,i),y!=null&&r.unshift(gl(t,y,p))):l||(y=Ln(t,i),y!=null&&r.push(gl(t,y,p)))),t=t.return}r.length!==0&&e.push({event:a,listeners:r})}var Km=/\r\n?/g,Pm=/\u0000|\uFFFD/g;function Fd(e){return(typeof e=="string"?e:""+e).replace(Km,`
`).replace(Pm,"")}function Wd(e,a){return a=Fd(a),Fd(e)===a}function ki(){}function me(e,a,t,n,l,i){switch(t){case"children":typeof n=="string"?a==="body"||a==="textarea"&&n===""||Jt(e,n):(typeof n=="number"||typeof n=="bigint")&&a!=="body"&&Jt(e,""+n);break;case"className":Vl(e,"class",n);break;case"tabIndex":Vl(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Vl(e,t,n);break;case"style":ac(e,n,i);break;case"data":if(a!=="object"){Vl(e,"data",n);break}case"src":case"href":if(n===""&&(a!=="a"||t!=="href")){e.removeAttribute(t);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(t);break}n=Yl(""+n),e.setAttribute(t,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(t,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(t==="formAction"?(a!=="input"&&me(e,a,"name",l.name,l,null),me(e,a,"formEncType",l.formEncType,l,null),me(e,a,"formMethod",l.formMethod,l,null),me(e,a,"formTarget",l.formTarget,l,null)):(me(e,a,"encType",l.encType,l,null),me(e,a,"method",l.method,l,null),me(e,a,"target",l.target,l,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(t);break}n=Yl(""+n),e.setAttribute(t,n);break;case"onClick":n!=null&&(e.onclick=ki);break;case"onScroll":n!=null&&ae("scroll",e);break;case"onScrollEnd":n!=null&&ae("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(o(61));if(t=n.__html,t!=null){if(l.children!=null)throw Error(o(60));e.innerHTML=t}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}t=Yl(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(t,""+n):e.removeAttribute(t);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(t,""):e.removeAttribute(t);break;case"capture":case"download":n===!0?e.setAttribute(t,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(t,n):e.removeAttribute(t);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(t,n):e.removeAttribute(t);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(t):e.setAttribute(t,n);break;case"popover":ae("beforetoggle",e),ae("toggle",e),Il(e,"popover",n);break;case"xlinkActuate":ka(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":ka(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":ka(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":ka(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":ka(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":ka(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":ka(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":ka(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":ka(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":Il(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(t=Ap.get(t)||t,Il(e,t,n))}}function as(e,a,t,n,l,i){switch(t){case"style":ac(e,n,i);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(o(61));if(t=n.__html,t!=null){if(l.children!=null)throw Error(o(60));e.innerHTML=t}}break;case"children":typeof n=="string"?Jt(e,n):(typeof n=="number"||typeof n=="bigint")&&Jt(e,""+n);break;case"onScroll":n!=null&&ae("scroll",e);break;case"onScrollEnd":n!=null&&ae("scrollend",e);break;case"onClick":n!=null&&(e.onclick=ki);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ys.hasOwnProperty(t))e:{if(t[0]==="o"&&t[1]==="n"&&(l=t.endsWith("Capture"),a=t.slice(2,l?t.length-7:void 0),i=e[Fe]||null,i=i!=null?i[t]:null,typeof i=="function"&&e.removeEventListener(a,i,l),typeof n=="function")){typeof i!="function"&&i!==null&&(t in e?e[t]=null:e.hasAttribute(t)&&e.removeAttribute(t)),e.addEventListener(a,n,l);break e}t in e?e[t]=n:n===!0?e.setAttribute(t,""):Il(e,t,n)}}}function Be(e,a,t){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ae("error",e),ae("load",e);var n=!1,l=!1,i;for(i in t)if(t.hasOwnProperty(i)){var r=t[i];if(r!=null)switch(i){case"src":n=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:me(e,a,i,r,t,null)}}l&&me(e,a,"srcSet",t.srcSet,t,null),n&&me(e,a,"src",t.src,t,null);return;case"input":ae("invalid",e);var d=i=r=l=null,p=null,y=null;for(n in t)if(t.hasOwnProperty(n)){var N=t[n];if(N!=null)switch(n){case"name":l=N;break;case"type":r=N;break;case"checked":p=N;break;case"defaultChecked":y=N;break;case"value":i=N;break;case"defaultValue":d=N;break;case"children":case"dangerouslySetInnerHTML":if(N!=null)throw Error(o(137,a));break;default:me(e,a,n,N,t,null)}}$s(e,i,d,p,y,r,l,!1),Bl(e);return;case"select":ae("invalid",e),n=r=i=null;for(l in t)if(t.hasOwnProperty(l)&&(d=t[l],d!=null))switch(l){case"value":i=d;break;case"defaultValue":r=d;break;case"multiple":n=d;default:me(e,a,l,d,t,null)}a=i,t=r,e.multiple=!!n,a!=null?Pt(e,!!n,a,!1):t!=null&&Pt(e,!!n,t,!0);return;case"textarea":ae("invalid",e),i=l=n=null;for(r in t)if(t.hasOwnProperty(r)&&(d=t[r],d!=null))switch(r){case"value":n=d;break;case"defaultValue":l=d;break;case"children":i=d;break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(o(91));break;default:me(e,a,r,d,t,null)}Ws(e,n,l,i),Bl(e);return;case"option":for(p in t)if(t.hasOwnProperty(p)&&(n=t[p],n!=null))switch(p){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:me(e,a,p,n,t,null)}return;case"dialog":ae("beforetoggle",e),ae("toggle",e),ae("cancel",e),ae("close",e);break;case"iframe":case"object":ae("load",e);break;case"video":case"audio":for(n=0;n<_l.length;n++)ae(_l[n],e);break;case"image":ae("error",e),ae("load",e);break;case"details":ae("toggle",e);break;case"embed":case"source":case"link":ae("error",e),ae("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(y in t)if(t.hasOwnProperty(y)&&(n=t[y],n!=null))switch(y){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:me(e,a,y,n,t,null)}return;default:if(ho(a)){for(N in t)t.hasOwnProperty(N)&&(n=t[N],n!==void 0&&as(e,a,N,n,t,void 0));return}}for(d in t)t.hasOwnProperty(d)&&(n=t[d],n!=null&&me(e,a,d,n,t,null))}function Jm(e,a,t,n){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,i=null,r=null,d=null,p=null,y=null,N=null;for(A in t){var O=t[A];if(t.hasOwnProperty(A)&&O!=null)switch(A){case"checked":break;case"value":break;case"defaultValue":p=O;default:n.hasOwnProperty(A)||me(e,a,A,null,n,O)}}for(var T in n){var A=n[T];if(O=t[T],n.hasOwnProperty(T)&&(A!=null||O!=null))switch(T){case"type":i=A;break;case"name":l=A;break;case"checked":y=A;break;case"defaultChecked":N=A;break;case"value":r=A;break;case"defaultValue":d=A;break;case"children":case"dangerouslySetInnerHTML":if(A!=null)throw Error(o(137,a));break;default:A!==O&&me(e,a,T,A,n,O)}}_o(e,r,d,p,y,N,i,l);return;case"select":A=r=d=T=null;for(i in t)if(p=t[i],t.hasOwnProperty(i)&&p!=null)switch(i){case"value":break;case"multiple":A=p;default:n.hasOwnProperty(i)||me(e,a,i,null,n,p)}for(l in n)if(i=n[l],p=t[l],n.hasOwnProperty(l)&&(i!=null||p!=null))switch(l){case"value":T=i;break;case"defaultValue":d=i;break;case"multiple":r=i;default:i!==p&&me(e,a,l,i,n,p)}a=d,t=r,n=A,T!=null?Pt(e,!!t,T,!1):!!n!=!!t&&(a!=null?Pt(e,!!t,a,!0):Pt(e,!!t,t?[]:"",!1));return;case"textarea":A=T=null;for(d in t)if(l=t[d],t.hasOwnProperty(d)&&l!=null&&!n.hasOwnProperty(d))switch(d){case"value":break;case"children":break;default:me(e,a,d,null,n,l)}for(r in n)if(l=n[r],i=t[r],n.hasOwnProperty(r)&&(l!=null||i!=null))switch(r){case"value":T=l;break;case"defaultValue":A=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(o(91));break;default:l!==i&&me(e,a,r,l,n,i)}Fs(e,T,A);return;case"option":for(var Q in t)if(T=t[Q],t.hasOwnProperty(Q)&&T!=null&&!n.hasOwnProperty(Q))switch(Q){case"selected":e.selected=!1;break;default:me(e,a,Q,null,n,T)}for(p in n)if(T=n[p],A=t[p],n.hasOwnProperty(p)&&T!==A&&(T!=null||A!=null))switch(p){case"selected":e.selected=T&&typeof T!="function"&&typeof T!="symbol";break;default:me(e,a,p,T,n,A)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var H in t)T=t[H],t.hasOwnProperty(H)&&T!=null&&!n.hasOwnProperty(H)&&me(e,a,H,null,n,T);for(y in n)if(T=n[y],A=t[y],n.hasOwnProperty(y)&&T!==A&&(T!=null||A!=null))switch(y){case"children":case"dangerouslySetInnerHTML":if(T!=null)throw Error(o(137,a));break;default:me(e,a,y,T,n,A)}return;default:if(ho(a)){for(var _e in t)T=t[_e],t.hasOwnProperty(_e)&&T!==void 0&&!n.hasOwnProperty(_e)&&as(e,a,_e,void 0,n,T);for(N in n)T=n[N],A=t[N],!n.hasOwnProperty(N)||T===A||T===void 0&&A===void 0||as(e,a,N,T,n,A);return}}for(var v in t)T=t[v],t.hasOwnProperty(v)&&T!=null&&!n.hasOwnProperty(v)&&me(e,a,v,null,n,T);for(O in n)T=n[O],A=t[O],!n.hasOwnProperty(O)||T===A||T==null&&A==null||me(e,a,O,T,n,A)}var ts=null,ns=null;function wi(e){return e.nodeType===9?e:e.ownerDocument}function ef(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function af(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function ls(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var is=null;function $m(){var e=window.event;return e&&e.type==="popstate"?e===is?!1:(is=e,!0):(is=null,!1)}var tf=typeof setTimeout=="function"?setTimeout:void 0,Fm=typeof clearTimeout=="function"?clearTimeout:void 0,nf=typeof Promise=="function"?Promise:void 0,Wm=typeof queueMicrotask=="function"?queueMicrotask:typeof nf<"u"?function(e){return nf.resolve(null).then(e).catch(e_)}:tf;function e_(e){setTimeout(function(){throw e})}function ht(e){return e==="head"}function lf(e,a){var t=a,n=0,l=0;do{var i=t.nextSibling;if(e.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(0<n&&8>n){t=n;var r=e.ownerDocument;if(t&1&&hl(r.documentElement),t&2&&hl(r.body),t&4)for(t=r.head,hl(t),r=t.firstChild;r;){var d=r.nextSibling,p=r.nodeName;r[zn]||p==="SCRIPT"||p==="STYLE"||p==="LINK"&&r.rel.toLowerCase()==="stylesheet"||t.removeChild(r),r=d}}if(l===0){e.removeChild(i),Al(a);return}l--}else t==="$"||t==="$?"||t==="$!"?l++:n=t.charCodeAt(0)-48;else n=0;t=i}while(t);Al(a)}function os(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var t=a;switch(a=a.nextSibling,t.nodeName){case"HTML":case"HEAD":case"BODY":os(t),uo(t);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(t.rel.toLowerCase()==="stylesheet")continue}e.removeChild(t)}}function a_(e,a,t,n){for(;e.nodeType===1;){var l=t;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[zn])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var i=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=Aa(e.nextSibling),e===null)break}return null}function t_(e,a,t){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Aa(e.nextSibling),e===null))return null;return e}function rs(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function n_(e,a){var t=e.ownerDocument;if(e.data!=="$?"||t.readyState==="complete")a();else{var n=function(){a(),t.removeEventListener("DOMContentLoaded",n)};t.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Aa(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return e}var ss=null;function of(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var t=e.data;if(t==="$"||t==="$!"||t==="$?"){if(a===0)return e;a--}else t==="/$"&&a++}e=e.previousSibling}return null}function rf(e,a,t){switch(a=wi(t),e){case"html":if(e=a.documentElement,!e)throw Error(o(452));return e;case"head":if(e=a.head,!e)throw Error(o(453));return e;case"body":if(e=a.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function hl(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);uo(e)}var xa=new Map,sf=new Set;function Ui(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ja=L.d;L.d={f:l_,r:i_,D:o_,C:r_,L:s_,m:c_,X:d_,S:u_,M:f_};function l_(){var e=Ja.f(),a=Ci();return e||a}function i_(e){var a=Xt(e);a!==null&&a.tag===5&&a.type==="form"?Nu(a):Ja.r(e)}var Rn=typeof document>"u"?null:document;function cf(e,a,t){var n=Rn;if(n&&typeof a=="string"&&a){var l=_a(a);l='link[rel="'+e+'"][href="'+l+'"]',typeof t=="string"&&(l+='[crossorigin="'+t+'"]'),sf.has(l)||(sf.add(l),e={rel:e,crossOrigin:t,href:a},n.querySelector(l)===null&&(a=n.createElement("link"),Be(a,"link",e),Le(a),n.head.appendChild(a)))}}function o_(e){Ja.D(e),cf("dns-prefetch",e,null)}function r_(e,a){Ja.C(e,a),cf("preconnect",e,a)}function s_(e,a,t){Ja.L(e,a,t);var n=Rn;if(n&&e&&a){var l='link[rel="preload"][as="'+_a(a)+'"]';a==="image"&&t&&t.imageSrcSet?(l+='[imagesrcset="'+_a(t.imageSrcSet)+'"]',typeof t.imageSizes=="string"&&(l+='[imagesizes="'+_a(t.imageSizes)+'"]')):l+='[href="'+_a(e)+'"]';var i=l;switch(a){case"style":i=Nn(e);break;case"script":i=Mn(e)}xa.has(i)||(e=R({rel:"preload",href:a==="image"&&t&&t.imageSrcSet?void 0:e,as:a},t),xa.set(i,e),n.querySelector(l)!==null||a==="style"&&n.querySelector(bl(i))||a==="script"&&n.querySelector(vl(i))||(a=n.createElement("link"),Be(a,"link",e),Le(a),n.head.appendChild(a)))}}function c_(e,a){Ja.m(e,a);var t=Rn;if(t&&e){var n=a&&typeof a.as=="string"?a.as:"script",l='link[rel="modulepreload"][as="'+_a(n)+'"][href="'+_a(e)+'"]',i=l;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Mn(e)}if(!xa.has(i)&&(e=R({rel:"modulepreload",href:e},a),xa.set(i,e),t.querySelector(l)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(t.querySelector(vl(i)))return}n=t.createElement("link"),Be(n,"link",e),Le(n),t.head.appendChild(n)}}}function u_(e,a,t){Ja.S(e,a,t);var n=Rn;if(n&&e){var l=Qt(n).hoistableStyles,i=Nn(e);a=a||"default";var r=l.get(i);if(!r){var d={loading:0,preload:null};if(r=n.querySelector(bl(i)))d.loading=5;else{e=R({rel:"stylesheet",href:e,"data-precedence":a},t),(t=xa.get(i))&&cs(e,t);var p=r=n.createElement("link");Le(p),Be(p,"link",e),p._p=new Promise(function(y,N){p.onload=y,p.onerror=N}),p.addEventListener("load",function(){d.loading|=1}),p.addEventListener("error",function(){d.loading|=2}),d.loading|=4,ji(r,a,n)}r={type:"stylesheet",instance:r,count:1,state:d},l.set(i,r)}}}function d_(e,a){Ja.X(e,a);var t=Rn;if(t&&e){var n=Qt(t).hoistableScripts,l=Mn(e),i=n.get(l);i||(i=t.querySelector(vl(l)),i||(e=R({src:e,async:!0},a),(a=xa.get(l))&&us(e,a),i=t.createElement("script"),Le(i),Be(i,"link",e),t.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(l,i))}}function f_(e,a){Ja.M(e,a);var t=Rn;if(t&&e){var n=Qt(t).hoistableScripts,l=Mn(e),i=n.get(l);i||(i=t.querySelector(vl(l)),i||(e=R({src:e,async:!0,type:"module"},a),(a=xa.get(l))&&us(e,a),i=t.createElement("script"),Le(i),Be(i,"link",e),t.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(l,i))}}function uf(e,a,t,n){var l=(l=K.current)?Ui(l):null;if(!l)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof t.precedence=="string"&&typeof t.href=="string"?(a=Nn(t.href),t=Qt(l).hoistableStyles,n=t.get(a),n||(n={type:"style",instance:null,count:0,state:null},t.set(a,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(t.rel==="stylesheet"&&typeof t.href=="string"&&typeof t.precedence=="string"){e=Nn(t.href);var i=Qt(l).hoistableStyles,r=i.get(e);if(r||(l=l.ownerDocument||l,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,r),(i=l.querySelector(bl(e)))&&!i._p&&(r.instance=i,r.state.loading=5),xa.has(e)||(t={rel:"preload",as:"style",href:t.href,crossOrigin:t.crossOrigin,integrity:t.integrity,media:t.media,hrefLang:t.hrefLang,referrerPolicy:t.referrerPolicy},xa.set(e,t),i||p_(l,e,t,r.state))),a&&n===null)throw Error(o(528,""));return r}if(a&&n!==null)throw Error(o(529,""));return null;case"script":return a=t.async,t=t.src,typeof t=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Mn(t),t=Qt(l).hoistableScripts,n=t.get(a),n||(n={type:"script",instance:null,count:0,state:null},t.set(a,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Nn(e){return'href="'+_a(e)+'"'}function bl(e){return'link[rel="stylesheet"]['+e+"]"}function df(e){return R({},e,{"data-precedence":e.precedence,precedence:null})}function p_(e,a,t,n){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?n.loading=1:(a=e.createElement("link"),n.preload=a,a.addEventListener("load",function(){return n.loading|=1}),a.addEventListener("error",function(){return n.loading|=2}),Be(a,"link",t),Le(a),e.head.appendChild(a))}function Mn(e){return'[src="'+_a(e)+'"]'}function vl(e){return"script[async]"+e}function ff(e,a,t){if(a.count++,a.instance===null)switch(a.type){case"style":var n=e.querySelector('style[data-href~="'+_a(t.href)+'"]');if(n)return a.instance=n,Le(n),n;var l=R({},t,{"data-href":t.href,"data-precedence":t.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),Le(n),Be(n,"style",l),ji(n,t.precedence,e),a.instance=n;case"stylesheet":l=Nn(t.href);var i=e.querySelector(bl(l));if(i)return a.state.loading|=4,a.instance=i,Le(i),i;n=df(t),(l=xa.get(l))&&cs(n,l),i=(e.ownerDocument||e).createElement("link"),Le(i);var r=i;return r._p=new Promise(function(d,p){r.onload=d,r.onerror=p}),Be(i,"link",n),a.state.loading|=4,ji(i,t.precedence,e),a.instance=i;case"script":return i=Mn(t.src),(l=e.querySelector(vl(i)))?(a.instance=l,Le(l),l):(n=t,(l=xa.get(i))&&(n=R({},t),us(n,l)),e=e.ownerDocument||e,l=e.createElement("script"),Le(l),Be(l,"link",n),e.head.appendChild(l),a.instance=l);case"void":return null;default:throw Error(o(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(n=a.instance,a.state.loading|=4,ji(n,t.precedence,e));return a.instance}function ji(e,a,t){for(var n=t.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=n.length?n[n.length-1]:null,i=l,r=0;r<n.length;r++){var d=n[r];if(d.dataset.precedence===a)i=d;else if(i!==l)break}i?i.parentNode.insertBefore(e,i.nextSibling):(a=t.nodeType===9?t.head:t,a.insertBefore(e,a.firstChild))}function cs(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function us(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var Ii=null;function pf(e,a,t){if(Ii===null){var n=new Map,l=Ii=new Map;l.set(t,n)}else l=Ii,n=l.get(t),n||(n=new Map,l.set(t,n));if(n.has(e))return n;for(n.set(e,null),t=t.getElementsByTagName(e),l=0;l<t.length;l++){var i=t[l];if(!(i[zn]||i[Qe]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var r=i.getAttribute(a)||"";r=e+r;var d=n.get(r);d?d.push(i):n.set(r,[i])}}return n}function mf(e,a,t){e=e.ownerDocument||e,e.head.insertBefore(t,a==="title"?e.querySelector("head > title"):null)}function m_(e,a,t){if(t===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return e=a.disabled,typeof a.precedence=="string"&&e==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function _f(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var El=null;function __(){}function g_(e,a,t){if(El===null)throw Error(o(475));var n=El;if(a.type==="stylesheet"&&(typeof t.media!="string"||matchMedia(t.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var l=Nn(t.href),i=e.querySelector(bl(l));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(n.count++,n=Vi.bind(n),e.then(n,n)),a.state.loading|=4,a.instance=i,Le(i);return}i=e.ownerDocument||e,t=df(t),(l=xa.get(l))&&cs(t,l),i=i.createElement("link"),Le(i);var r=i;r._p=new Promise(function(d,p){r.onload=d,r.onerror=p}),Be(i,"link",t),a.instance=i}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,e),(e=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Vi.bind(n),e.addEventListener("load",a),e.addEventListener("error",a))}}function h_(){if(El===null)throw Error(o(475));var e=El;return e.stylesheets&&e.count===0&&ds(e,e.stylesheets),0<e.count?function(a){var t=setTimeout(function(){if(e.stylesheets&&ds(e,e.stylesheets),e.unsuspend){var n=e.unsuspend;e.unsuspend=null,n()}},6e4);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(t)}}:null}function Vi(){if(this.count--,this.count===0){if(this.stylesheets)ds(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Bi=null;function ds(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Bi=new Map,a.forEach(b_,e),Bi=null,Vi.call(e))}function b_(e,a){if(!(a.state.loading&4)){var t=Bi.get(e);if(t)var n=t.get(null);else{t=new Map,Bi.set(e,t);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<l.length;i++){var r=l[i];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(t.set(r.dataset.precedence,r),n=r)}n&&t.set(null,n)}l=a.instance,r=l.getAttribute("data-precedence"),i=t.get(r)||n,i===n&&t.set(null,l),t.set(r,l),this.count++,n=Vi.bind(this),l.addEventListener("load",n),l.addEventListener("error",n),i?i.parentNode.insertBefore(l,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),a.state.loading|=4}}var yl={$$typeof:Ne,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function v_(e,a,t,n,l,i,r,d){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=oo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oo(0),this.hiddenUpdates=oo(null),this.identifierPrefix=n,this.onUncaughtError=l,this.onCaughtError=i,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=d,this.incompleteTransitions=new Map}function gf(e,a,t,n,l,i,r,d,p,y,N,O){return e=new v_(e,a,t,r,d,p,y,O),a=1,i===!0&&(a|=24),i=ra(3,null,null,a),e.current=i,i.stateNode=e,a=Qo(),a.refCount++,e.pooledCache=a,a.refCount++,i.memoizedState={element:n,isDehydrated:t,cache:a},Jo(i),e}function hf(e){return e?(e=ln,e):ln}function bf(e,a,t,n,l,i){l=hf(l),n.context===null?n.context=l:n.pendingContext=l,n=lt(a),n.payload={element:t},i=i===void 0?null:i,i!==null&&(n.callback=i),t=it(e,n,a),t!==null&&(fa(t,e,a),$n(t,e,a))}function vf(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var t=e.retryLane;e.retryLane=t!==0&&t<a?t:a}}function fs(e,a){vf(e,a),(e=e.alternate)&&vf(e,a)}function Ef(e){if(e.tag===13){var a=nn(e,67108864);a!==null&&fa(a,e,67108864),fs(e,67108864)}}var Hi=!0;function E_(e,a,t,n){var l=M.T;M.T=null;var i=L.p;try{L.p=2,ps(e,a,t,n)}finally{L.p=i,M.T=l}}function y_(e,a,t,n){var l=M.T;M.T=null;var i=L.p;try{L.p=8,ps(e,a,t,n)}finally{L.p=i,M.T=l}}function ps(e,a,t,n){if(Hi){var l=ms(n);if(l===null)es(e,a,n,Yi,t),xf(e,n);else if(T_(l,e,a,t,n))n.stopPropagation();else if(xf(e,n),a&4&&-1<x_.indexOf(e)){for(;l!==null;){var i=Xt(l);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var r=Tt(i.pendingLanes);if(r!==0){var d=i;for(d.pendingLanes|=2,d.entangledLanes|=2;r;){var p=1<<31-ia(r);d.entanglements[1]|=p,r&=~p}za(i),(ue&6)===0&&(Ni=Na()+500,ml(0))}}break;case 13:d=nn(i,2),d!==null&&fa(d,i,2),Ci(),fs(i,2)}if(i=ms(n),i===null&&es(e,a,n,Yi,t),i===l)break;l=i}l!==null&&n.stopPropagation()}else es(e,a,n,null,t)}}function ms(e){return e=vo(e),_s(e)}var Yi=null;function _s(e){if(Yi=null,e=Yt(e),e!==null){var a=f(e);if(a===null)e=null;else{var t=a.tag;if(t===13){if(e=m(a),e!==null)return e;e=null}else if(t===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return Yi=e,null}function yf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rp()){case Ls:return 2;case Gs:return 8;case kl:case sp:return 32;case ks:return 268435456;default:return 32}default:return 32}}var gs=!1,bt=null,vt=null,Et=null,xl=new Map,Tl=new Map,yt=[],x_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xf(e,a){switch(e){case"focusin":case"focusout":bt=null;break;case"dragenter":case"dragleave":vt=null;break;case"mouseover":case"mouseout":Et=null;break;case"pointerover":case"pointerout":xl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(a.pointerId)}}function Sl(e,a,t,n,l,i){return e===null||e.nativeEvent!==i?(e={blockedOn:a,domEventName:t,eventSystemFlags:n,nativeEvent:i,targetContainers:[l]},a!==null&&(a=Xt(a),a!==null&&Ef(a)),e):(e.eventSystemFlags|=n,a=e.targetContainers,l!==null&&a.indexOf(l)===-1&&a.push(l),e)}function T_(e,a,t,n,l){switch(a){case"focusin":return bt=Sl(bt,e,a,t,n,l),!0;case"dragenter":return vt=Sl(vt,e,a,t,n,l),!0;case"mouseover":return Et=Sl(Et,e,a,t,n,l),!0;case"pointerover":var i=l.pointerId;return xl.set(i,Sl(xl.get(i)||null,e,a,t,n,l)),!0;case"gotpointercapture":return i=l.pointerId,Tl.set(i,Sl(Tl.get(i)||null,e,a,t,n,l)),!0}return!1}function Tf(e){var a=Yt(e.target);if(a!==null){var t=f(a);if(t!==null){if(a=t.tag,a===13){if(a=m(t),a!==null){e.blockedOn=a,gp(e.priority,function(){if(t.tag===13){var n=da();n=ro(n);var l=nn(t,n);l!==null&&fa(l,t,n),fs(t,n)}});return}}else if(a===3&&t.stateNode.current.memoizedState.isDehydrated){e.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xi(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var t=ms(e.nativeEvent);if(t===null){t=e.nativeEvent;var n=new t.constructor(t.type,t);bo=n,t.target.dispatchEvent(n),bo=null}else return a=Xt(t),a!==null&&Ef(a),e.blockedOn=t,!1;a.shift()}return!0}function Sf(e,a,t){Xi(e)&&t.delete(a)}function S_(){gs=!1,bt!==null&&Xi(bt)&&(bt=null),vt!==null&&Xi(vt)&&(vt=null),Et!==null&&Xi(Et)&&(Et=null),xl.forEach(Sf),Tl.forEach(Sf)}function Qi(e,a){e.blockedOn===a&&(e.blockedOn=null,gs||(gs=!0,x.unstable_scheduleCallback(x.unstable_NormalPriority,S_)))}var Zi=null;function Af(e){Zi!==e&&(Zi=e,x.unstable_scheduleCallback(x.unstable_NormalPriority,function(){Zi===e&&(Zi=null);for(var a=0;a<e.length;a+=3){var t=e[a],n=e[a+1],l=e[a+2];if(typeof n!="function"){if(_s(n||t)===null)continue;break}var i=Xt(t);i!==null&&(e.splice(a,3),a-=3,_r(i,{pending:!0,data:l,method:t.method,action:n},n,l))}}))}function Al(e){function a(p){return Qi(p,e)}bt!==null&&Qi(bt,e),vt!==null&&Qi(vt,e),Et!==null&&Qi(Et,e),xl.forEach(a),Tl.forEach(a);for(var t=0;t<yt.length;t++){var n=yt[t];n.blockedOn===e&&(n.blockedOn=null)}for(;0<yt.length&&(t=yt[0],t.blockedOn===null);)Tf(t),t.blockedOn===null&&yt.shift();if(t=(e.ownerDocument||e).$$reactFormReplay,t!=null)for(n=0;n<t.length;n+=3){var l=t[n],i=t[n+1],r=l[Fe]||null;if(typeof i=="function")r||Af(t);else if(r){var d=null;if(i&&i.hasAttribute("formAction")){if(l=i,r=i[Fe]||null)d=r.formAction;else if(_s(l)!==null)continue}else d=r.action;typeof d=="function"?t[n+1]=d:(t.splice(n,3),n-=3),Af(t)}}}function hs(e){this._internalRoot=e}Ki.prototype.render=hs.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(o(409));var t=a.current,n=da();bf(t,n,e,a,null,null)},Ki.prototype.unmount=hs.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;bf(e.current,2,null,e,null,null),Ci(),a[Ht]=null}};function Ki(e){this._internalRoot=e}Ki.prototype.unstable_scheduleHydration=function(e){if(e){var a=Vs();e={blockedOn:null,target:e,priority:a};for(var t=0;t<yt.length&&a!==0&&a<yt[t].priority;t++);yt.splice(t,0,e),t===0&&Tf(e)}};var Rf=s.version;if(Rf!=="19.1.0")throw Error(o(527,Rf,"19.1.0"));L.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=h(a),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var A_={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pi.isDisabled&&Pi.supportsFiber)try{Cn=Pi.inject(A_),la=Pi}catch{}}return Ml.createRoot=function(e,a){if(!u(e))throw Error(o(299));var t=!1,n="",l=Vu,i=Bu,r=Hu,d=null;return a!=null&&(a.unstable_strictMode===!0&&(t=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onUncaughtError!==void 0&&(l=a.onUncaughtError),a.onCaughtError!==void 0&&(i=a.onCaughtError),a.onRecoverableError!==void 0&&(r=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(d=a.unstable_transitionCallbacks)),a=gf(e,1,!1,null,null,t,n,l,i,r,d,null),e[Ht]=a.current,Wr(e),new hs(a)},Ml.hydrateRoot=function(e,a,t){if(!u(e))throw Error(o(299));var n=!1,l="",i=Vu,r=Bu,d=Hu,p=null,y=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(d=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(p=t.unstable_transitionCallbacks),t.formState!==void 0&&(y=t.formState)),a=gf(e,1,!0,a,t??null,n,l,i,r,d,p,y),a.context=hf(null),t=a.current,n=da(),n=ro(n),l=lt(n),l.callback=null,it(t,l,n),t=n,a.current.lanes=t,qn(a,t),za(a),e[Ht]=a.current,Wr(e),new Ki(a)},Ml.version="19.1.0",Ml}var Uf;function j_(){if(Uf)return Es.exports;Uf=1;function x(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(x)}catch(s){console.error(s)}}return x(),Es.exports=U_(),Es.exports}var I_=j_();const V_=Xf(I_),jf=[{id:"001_test_playwright",title:"001_test_playwright.py",generalPurpose:"Testea la instalacin y funcionalidad bsica de Playwright.",detailedExplanation:`Este script sirve como una prueba de humo fundamental para el entorno de desarrollo.
Su objetivo principal es confirmar que la biblioteca Playwright est correctamente
instalada y es accesible desde Python, y que los navegadores necesarios
(especficamente Chromium en este caso) pueden ser lanzados y controlados.
El script intenta importar Playwright, iniciar su API sncrona, lanzar un
navegador en modo "headless" (sin interfaz grfica visible), y luego cerrarlo.
Los mensajes impresos en la consola indican el xito o fracaso de cada uno
de estos pasos cruciales, ayudando a diagnosticar problemas de configuracin iniciales.`,keyConcepts:[{id:"001_test_playwright-concept-0",name:"Automatizacin de Navegadores",explanation:`La automatizacin de navegadores se refiere al uso de software para controlar un navegador web y realizar tareas de forma programada, imitando la interaccin humana.
Usos Comunes:
- Pruebas de Software (Testing): Verificar que las aplicaciones web funcionen como se espera (ej. Selenium, Playwright, Cypress).
- Web Scraping: Extraer datos de sitios web.
- Automatizacin de Tareas Repetitivas: Llenar formularios, tomar capturas de pantalla, generar reportes.
- Monitoreo de Sitios Web: Comprobar la disponibilidad y rendimiento.

Playwright es una herramienta poderosa para esto, permitiendo interactuar con pginas web, hacer clic en botones, escribir texto, navegar, etc., todo mediante cdigo.`},{id:"001_test_playwright-concept-1",name:"Playwright: Introduccin y caractersticas",explanation:`Playwright es una biblioteca de Node.js (con bindings para Python, Java y C#) desarrollada por Microsoft para la automatizacin de navegadores.
Caractersticas Destacadas:
- Multi-Navegador: Soporta Chromium (Chrome, Edge), Firefox y WebKit (Safari) con una nica API.
- Multi-Lenguaje: Se puede usar con JavaScript/TypeScript, Python, Java y C#.
- API Sncrona y Asncrona: Ofrece ambas para adaptarse a diferentes estilos de programacin. Este script usa la API sncrona (\`sync_playwright\`).
- Auto-Esperas (Auto-Waits): Playwright espera automticamente a que los elementos estn listos antes de realizar acciones, reduciendo la fragilidad de los scripts.
- Selectores Ricos: Permite localizar elementos usando CSS, XPath, texto, y selectores propios de Playwright.
- Emulacin: Puede emular dispositivos mviles, geolocalizacin, permisos, etc.
- Modo Headless y Headed: Puede correr con o sin interfaz grfica.
- Contextos de Navegador: Permite aislar sesiones (cookies, localStorage) dentro de una misma instancia de navegador.`},{id:"001_test_playwright-concept-2",name:"Entornos Virtuales (Conda/venv)",explanation:`Los entornos virtuales son directorios aislados que contienen una instalacin especfica de Python y las bibliotecas necesarias para un proyecto particular.
Importancia:
- Gestin de Dependencias: Cada proyecto puede tener sus propias versiones de bibliotecas sin afectar a otros proyectos o a la instalacin global de Python.
- Aislamiento: Evitan conflictos entre versiones de paquetes requeridas por diferentes proyectos. Si Proyecto A necesita 'libX v1.0' y Proyecto B necesita 'libX v2.0', los entornos virtuales permiten que ambas coexistan.
- Reproducibilidad: Facilitan recrear el mismo entorno en diferentes mquinas o momentos, asegurando que el cdigo se comporte igual. Usualmente se listan las dependencias en un archivo (ej. 'requirements.txt').
- Limpieza: Mantienen la instalacin global de Python limpia.

Herramientas Comunes:
- 'venv': Mdulo incorporado en Python.
- 'conda': Popular en la comunidad de ciencia de datos, gestiona paquetes Python y no-Python, y entornos.`},{id:"001_test_playwright-concept-3",name:"Headless Browsing",explanation:`El "Headless Browsing" (navegacin sin cabeza) se refiere a ejecutar un navegador web sin su interfaz grfica de usuario (GUI). Las interacciones ocurren programticamente.
Ventajas:
- Rendimiento: Generalmente ms rpido y consume menos recursos (CPU, memoria) que un navegador con GUI.
- Servidores y CI/CD: Ideal para ejecutar en servidores donde no hay un display grfico disponible, o en pipelines de Integracin Continua/Despliegue Continuo (CI/CD).
- Escalabilidad: Ms fcil ejecutar mltiples instancias en paralelo.

Cundo Usarlo:
- Web scraping automatizado.
- Pruebas automatizadas en CI/CD.
- Tareas de fondo que involucran interacciones web.

Cundo NO Usarlo (o usar modo "headed" para depurar):
- Al desarrollar/depurar scripts, ver la GUI ayuda a entender qu est pasando.
- Sitios con JavaScript muy complejo o medidas anti-bot que podran comportarse diferente en modo headless (aunque Playwright es bueno mitigando esto).`},{id:"001_test_playwright-concept-4",name:"Context Managers (`with ... as ...`)",explanation:`En Python, un "context manager" es un objeto que define los mtodos '__enter__()' y '__exit__()'. La sentencia 'with' se usa para envolver la ejecucin de un bloque de cdigo con mtodos definidos por un context manager.
Propsito Principal: Gestin de Recursos.
- Asegura que los recursos se configuren adecuadamente antes de que el bloque de cdigo se ejecute ('__enter__()').
- Garantiza que los recursos se liberen o limpien despus de que el bloque de cdigo termine, incluso si ocurren errores ('__exit__()').

Ejemplos Comunes:
- Manejo de archivos: 'with open("file.txt") as f:' asegura que el archivo se cierre automticamente.
- Conexiones de red, bloqueos (locks), y en este script, la instancia de Playwright y el navegador:
  'with sync_playwright() as p:' asegura que la API de Playwright se inicie y se cierre correctamente.
  'with p.chromium.launch() as browser:' asegura que el navegador se cierre.

Beneficios: Cdigo ms limpio, legible y menos propenso a fugas de recursos.`},{id:"001_test_playwright-concept-5",name:"Manejo Bsico de Excepciones (`try-except`)",explanation:`El manejo de excepciones es cmo Python lidia con errores que ocurren durante la ejecucin de un programa. Sin l, un error detendra el script abruptly.
Estructura Bsica:
- 'try': El bloque de cdigo que podra generar un error se coloca aqu.
- 'except <TipoDeError> as <variable_error>': Si ocurre un error del tipo especificado en el bloque 'try', el cdigo en este bloque 'except' se ejecuta. Se pueden tener mltiples bloques 'except' para diferentes tipos de errores. Si no se especifica '<TipoDeError>', captura cualquier excepcin (generalmente no recomendado para todos los casos).
- 'else': (Opcional) Se ejecuta si el bloque 'try' se completa sin generar ninguna excepcin.
- 'finally': (Opcional) Se ejecuta siempre, haya o no haya habido una excepcin. til para limpieza de recursos.

En este script:
- Se usa 'try-except ImportError' para verificar si Playwright est instalado.
- Se usa 'try-except Exception as e' para capturar errores generales al lanzar navegadores o durante la ejecucin de Playwright, imprimiendo mensajes descriptivos. Esto ayuda a diagnosticar problemas como la no instalacin de los binarios del navegador.`}],sourceCode:`
from playwright.sync_api import sync_playwright, Playwright # INTERACTIVE_SEGMENT_TARGET: 001-import-playwright
import sys

def run_test():
    print(f"Intentando usar Playwright con Python en: {sys.executable}")
    version_disponible = False
    try:
        # Intentar obtener la versin del paquete playwright instalado si est disponible
        # Esto se hace mejor con 'pip show playwright' desde la CLI.
        # Aqu solo confirmamos que podemos importar mdulos especficos.
        import playwright.sync_api
        print(f"Mdulo playwright.sync_api importado correctamente.")
        version_disponible = True # Asumimos que si importa, algo est bien.
    except ImportError:
        print("Error: No se pudo importar playwright.sync_api. La biblioteca Playwright de Python no parece estar instalada correctamente.")
        return
    except Exception as e_ver:
        print(f"No se pudo determinar la versin de la biblioteca Playwright mediante importacin: {e_ver}")
        version_disponible = True # An as, procedemos con la prueba funcional

    if not version_disponible:
         print("No se pudo confirmar la instalacin de la biblioteca Playwright.")
         return

    try:
        with sync_playwright() as playwright_instance: # INTERACTIVE_SEGMENT_TARGET: 001-with-context
            print("Playwright Sync API iniciada.")

            # Probar Chromium
            try:
                browser_chromium = playwright_instance.chromium.launch(headless=True) # INTERACTIVE_SEGMENT_TARGET: 001-launch-chromium
                print("Chromium lanzado exitosamente.")
                browser_chromium.close()
                print("Chromium cerrado.")
            except Exception as e_chromium:
                print(f"Error al lanzar/cerrar Chromium: {e_chromium}")
                print("Asegrate de que Chromium est instalado (ej. 'python -m playwright install chromium')")

            # Puedes descomentar las siguientes secciones si tambin quieres probar Firefox y WebKit
            # Probar Firefox
            # try:
            #     browser_firefox = playwright_instance.firefox.launch(headless=True)
            #     print("Firefox lanzado exitosamente.")
            #     browser_firefox.close()
            #     print("Firefox cerrado.")
            # except Exception as e_firefox:
            #     print(f"Error al lanzar/cerrar Firefox: {e_firefox}")
            #     print("Asegrate de que Firefox est instalado (ej. 'python -m playwright install firefox')")

            # Probar WebKit
            # try:
            #     browser_webkit = playwright_instance.webkit.launch(headless=True)
            #     print("WebKit lanzado exitosamente.")
            #     browser_webkit.close()
            #     print("WebKit cerrado.")
            # except Exception as e_webkit:
            #     print(f"Error al lanzar/cerrar WebKit: {e_webkit}")
            #     print("Asegrate de que WebKit est instalado (ej. 'python -m playwright install webkit')")

        print("\\nPrueba de Playwright completada exitosamente.")

    except Exception as e: # INTERACTIVE_SEGMENT_TARGET: 001-general-exception
        print(f"Error general al usar Playwright: {e}")
        if "Executable doesn't exist" in str(e) or "BrowserType.launch: Executable" in str(e):
            print("Esto usualmente significa que los navegadores no estn instalados o Playwright no puede encontrarlos.")
            print("Ejecuta 'python -m playwright install' en tu terminal (con el entorno Conda activo).")
        elif "No module named 'playwright'" in str(e): # Aunque ya lo verificamos
             print("Esto significa que la biblioteca Playwright de Python no est instalada en este entorno.")
             print("Ejecuta 'pip install playwright --break-system-packages' o revisa tu instalacin.")
        else:
            print("Ocurri un error inesperado durante la prueba funcional.")


if __name__ == "__main__":
    run_test()
`,interactiveSegments:[{id:"001-import-playwright",label:"Importacin de Playwright",matcher:/# INTERACTIVE_SEGMENT_TARGET: 001-import-playwright/,explanation:"Esta lnea es crucial. Importa `sync_playwright`, la funcin principal para usar la API sncrona de Playwright, y `Playwright`, la clase que representa la instancia de Playwright. Sin esto, no se pueden utilizar las funcionalidades de automatizacin del navegador.",relatedConceptIds:["001_test_playwright-concept-1"]},{id:"001-with-context",label:"Gestor de Contexto 'with sync_playwright()'",matcher:/# INTERACTIVE_SEGMENT_TARGET: 001-with-context/,explanation:"Aqu se utiliza un gestor de contexto (`with` statement). `sync_playwright()` inicializa la API sncrona de Playwright. El gestor de contexto asegura que los recursos de Playwright (como la conexin al driver del navegador) se configuren correctamente al inicio y se liberen limpiamente al final, incluso si ocurren errores. `playwright_instance` es el objeto a travs del cual se accede a los navegadores.",relatedConceptIds:["001_test_playwright-concept-1","001_test_playwright-concept-4"]},{id:"001-launch-chromium",label:"Lanzar Navegador Chromium",matcher:/# INTERACTIVE_SEGMENT_TARGET: 001-launch-chromium/,explanation:"Esta lnea lanza una instancia del navegador Chromium. `playwright_instance.chromium` accede al manejador del navegador Chromium. `.launch()` lo inicia. `headless=True` significa que el navegador se ejecutar en segundo plano, sin una interfaz grfica visible, lo cual es ideal para automatizacin y pruebas en servidores.",relatedConceptIds:["001_test_playwright-concept-1","001_test_playwright-concept-3"]},{id:"001-general-exception",label:"Manejo de Excepciones Generales",matcher:/# INTERACTIVE_SEGMENT_TARGET: 001-general-exception/,explanation:"Este bloque `except` captura cualquier error general que pueda ocurrir durante la inicializacin o uso de Playwright (que no haya sido capturado por un `except` ms especfico). La variable `e` contiene la informacin del error, que luego se imprime. Esto es til para diagnosticar problemas, como la falta de instalacin de los navegadores (`python -m playwright install`).",relatedConceptIds:["001_test_playwright-concept-5"]}]},{id:"002_dof_web_scraper",title:"002_dof_web_scraper.py",generalPurpose:"Script inicial para extraer URLs de la pgina principal del DOF (sin paginacin).",detailedExplanation:`Este script representa el primer paso en la recoleccin de datos del Diario Oficial
de la Federacin. Se enfoca en realizar una bsqueda de un trmino especfico
proporcionado por el usuario en la pgina principal del DOF. Utiliza Playwright para
automatizar la navegacin, localizar el campo de bsqueda, ingresar el trmino y
enviar el formulario. Despus de la bsqueda, espera a que la pgina de resultados
cargue e intenta extraer los enlaces a las notas individuales. Crucialmente,
introduce una lgica para detectar una pgina de "ATENTO AVISO" que el DOF a veces
presenta, evitando procesarla errneamente.`,keyConcepts:[{id:"002_dof_web_scraper-concept-0",name:"Web Scraping (Fundamentos, tica)",explanation:`El Web Scraping (raspado web) es el proceso de extraer informacin de sitios web de forma automatizada.
Fundamentos:
1.  Obtener el contenido HTML de la pgina (usando bibliotecas como Playwright, Requests, Scrapy).
2.  Analizar (parsear) el HTML para encontrar los datos deseados (usando selectores CSS, XPath, o bibliotecas como BeautifulSoup).
3.  Extraer y estructurar los datos.
4.  Almacenar los datos (ej. CSV, base de datos, JSON).

tica y Legalidad:
-   \`robots.txt\`: Revisa este archivo en el sitio web; indica qu partes del sitio los webmasters no quieren que los bots accedan. Respetarlo es crucial.
-   Trminos de Servicio (ToS): Algunos sitios prohben explcitamente el scraping.
-   Carga del Servidor: Realiza solicitudes a un ritmo razonable para no sobrecargar el servidor. Usa retardos.
-   Datos Personales y Copyright: Ten cuidado con la extraccin y uso de datos personales o material protegido por derechos de autor.
-   Identificacin: Considera identificar tu bot en el User-Agent.

Este script utiliza Playwright para obtener el HTML dinmico (renderizado por JavaScript) y extraer enlaces.`},{id:"002_dof_web_scraper-concept-1",name:"Selectores CSS y XPath",explanation:`Los selectores son patrones que permiten identificar y seleccionar elementos especficos en un documento HTML o XML. Son fundamentales para el web scraping.

Selectores CSS:
-   Basados en la sintaxis de las hojas de estilo en cascada (CSS).
-   Generalmente ms simples y legibles para tareas comunes.
-   Ejemplos:
    -   \`input#textobusqueda\`: Selecciona un elemento <input> con el id="textobusqueda".
    -   \`a.enlaces\`: Selecciona todos los elementos <a> con la clase "enlaces".
    -   \`div > p\`: Selecciona todos los prrafos <p> que son hijos directos de un <div>.
    -   \`td[valign="top"]\`: Selecciona celdas <td> que tienen el atributo 'valign' igual a "top".

XPath (XML Path Language):
-   Lenguaje de consulta ms potente y flexible, diseado para navegar por elementos y atributos en documentos XML (y HTML, que es similar).
-   Puede seleccionar elementos basados en relaciones complejas (padres, hermanos, ancestros, etc.) y contenido.
-   Ejemplos:
    -   \`//input[@id="textobusqueda"]\`: Similar al CSS \`input#textobusqueda\`.
    -   \`//a[contains(@href, "nota_detalle.php")]\`: Selecciona enlaces <a> cuyo atributo 'href' contiene "nota_detalle.php".
    -   \`//td/a\`: Selecciona todos los enlaces <a> que son hijos directos de una celda <td>.

Playwright soporta ambos tipos de selectores, as como selectores basados en texto visible y roles ARIA.`},{id:"002_dof_web_scraper-concept-2",name:"Interaccin con Formularios Web (`page.fill`, `page.press`)",explanation:`Playwright proporciona mtodos intuitivos para interactuar con formularios web:
-   \`page.fill(selector, valor)\`:
    -   Localiza un elemento de entrada (como <input>, <textarea>) usando el 'selector' proporcionado.
    -   Rellena el campo con el 'valor' especificado.
    -   Ejemplo en el script: \`page.fill(campo_busqueda_selector, termino_busqueda)\`

-   \`page.press(selector, tecla)\`:
    -   Localiza un elemento usando el 'selector'.
    -   Simula la pulsacin de una 'tecla' especfica en ese elemento.
    -   Teclas comunes: "Enter", "ArrowDown", "Tab", "Escape", etc.
    -   Ejemplo en el script: \`page.press(campo_busqueda_selector, "Enter")\` para enviar el formulario de bsqueda.

Otras interacciones comunes con formularios:
-   \`page.click(selector)\`: Para hacer clic en botones (ej. type="submit") o checkboxes/radio buttons.
-   \`page.check(selector)\` / \`page.uncheck(selector)\`: Para checkboxes.
-   \`page.select_option(selector, value)\`: Para seleccionar opciones en un <select>.`},{id:"002_dof_web_scraper-concept-3",name:"Esperas en Playwright (`wait_for_selector`, `wait_for_load_state`)",explanation:'Las aplicaciones web modernas cargan contenido dinmicamente. Interactuar con un elemento antes de que exista o sea visible/interactuable causa errores. Playwright maneja esto con:\n1.  Auto-Esperas (Auto-Waits): La mayora de las acciones de Playwright (como `click()`, `fill()`) esperan automticamente a que el elemento objetivo cumpla ciertas condiciones (ej. visible, habilitado) antes de actuar. Esto reduce la necesidad de esperas explcitas.\n\n2.  Esperas Explcitas: Para condiciones ms complejas o para sincronizar con el estado de la pgina.\n    -   `page.wait_for_selector(selector, **kwargs)`:\n        -   Espera hasta que un elemento que coincide con el \'selector\' aparezca en el DOM y (opcionalmente) cumpla ciertas condiciones de estado.\n        -   `state="visible"`: Espera a que el elemento sea visible.\n        -   `state="attached"`: Espera a que est en el DOM (puede ser invisible).\n        -   `timeout`: Tiempo mximo de espera en milisegundos.\n        -   Ejemplo: `page.wait_for_selector(campo_busqueda_selector, state="visible", timeout=30000)`\n\n    -   `page.wait_for_load_state(estado, **kwargs)`:\n        -   Espera a que la pgina alcance un cierto estado de carga.\n        -   `estado="load"`: Espera al evento \'load\' del DOM (todos los recursos iniciales cargados).\n        -   `estado="domcontentloaded"`: Espera a que el HTML est completamente cargado y parseado (sin esperar a stylesheets, images, subframes). Es ms rpido.\n        -   `estado="networkidle"`: Espera hasta que no haya ms de X conexiones de red activas durante Y ms. til para pginas con muchas peticiones AJAX post-carga.\n        -   Ejemplo: `page.wait_for_load_state(\'networkidle\', timeout=30000)`\n\n    -   `page.wait_for_url(url, **kwargs)`: Espera a que la URL de la pgina coincida.\n    -   `page.wait_for_timeout(milisegundos)`: Pausa explcita (generalmente menos recomendada que las esperas condicionales).'},{id:"002_dof_web_scraper-concept-4",name:"Extraccin de Atributos y Texto (`get_attribute`, `inner_text`)",explanation:'Una vez que se localiza un elemento en la pgina, se puede extraer informacin de l:\n\n-   `elemento.get_attribute(nombre_atributo)`:\n    -   Devuelve el valor del atributo especificado para el elemento.\n    -   Si el atributo no existe, devuelve `None` (en Python).\n    -   Ejemplo: Para un enlace `<a href="pagina.html">Texto</a>`, `elemento_enlace.get_attribute("href")` devolvera "pagina.html".\n    -   Se usa en el script para obtener la URL de los enlaces: `href = elemento_enlace.get_attribute("href")`\n\n-   `elemento.inner_text()`:\n    -   Devuelve el texto contenido dentro del elemento y sus descendientes, similar a lo que un usuario vera.\n    -   Excluye el texto de elementos ocultos por CSS (si el elemento mismo es visible).\n    -   Realiza cierta normalizacin de espacios.\n    -   Ejemplo: Para `<p> Hola <b>Mundo</b> </p>`, `elemento_parrafo.inner_text()` podra devolver "Hola Mundo".\n    -   Se usa en el script para obtener el texto visible del enlace: `texto_enlace = elemento_enlace.inner_text().strip()...`\n\nOtros mtodos relacionados:\n-   `elemento.text_content()`: Similar a `Node.textContent` en JavaScript. Devuelve todo el texto dentro del elemento, incluyendo el de elementos ocultos.\n-   `elemento.inner_html()`: Devuelve el HTML contenido dentro del elemento.\n-   `page.title()`: Devuelve el ttulo de la pgina (`<title>...`).'},{id:"002_dof_web_scraper-concept-5",name:"Manejo de URLs (relativas vs. absolutas, `urllib.parse.urljoin`)",explanation:"Cuando se hace web scraping, los enlaces (`href` en etiquetas `<a>`) pueden ser de dos tipos:\n\n1.  URLs Absolutas:\n    -   Una URL completa que incluye el protocolo (http/https), el nombre de dominio y la ruta.\n    -   Ejemplo: `https://www.ejemplo.com/pagina/documento.html`\n    -   Son directamente navegables.\n\n2.  URLs Relativas:\n    -   Una URL que no especifica el protocolo ni el dominio; se interpreta en relacin con la URL de la pgina actual.\n    -   Ejemplos:\n        -   `/seccion/otra_pagina.html` (relativa a la raz del dominio)\n        -   `item.html` (relativa al directorio actual)\n        -   `../otra_carpeta/recurso.pdf` (navega hacia arriba en la jerarqua de directorios)\n    -   No son directamente navegables sin resolverlas contra una URL base.\n\n`urllib.parse.urljoin(base_url, relative_url)`:\n-   Una funcin de la biblioteca estndar de Python (`urllib.parse`) que combina una URL base con una URL relativa para formar una URL absoluta.\n-   Es la forma robusta y correcta de construir URLs completas.\n-   `base_url`: La URL de la pgina actual donde se encontr el enlace relativo (ej. `page.url` de Playwright).\n-   `relative_url`: El valor del atributo `href` que podra ser relativo.\n-   Ejemplo en el script: `enlace_absoluto = urljoin(current_page_url, href)`\n    Esto asegura que todos los enlaces recolectados sean absolutos y utilizables independientemente de dnde se encontraron."},{id:"002_dof_web_scraper-concept-6",name:"Anlisis de Flujo de Navegacin de Sitios Web",explanation:`Antes de escribir un script de scraping, es crucial entender cmo un usuario (o un bot) interactuara con el sitio web para obtener la informacin deseada. Esto implica:
1.  Inspeccin Manual: Usar las herramientas de desarrollador del navegador (F12) para:
    -   Identificar las URLs de las pginas clave (inicio, bsqueda, resultados, detalle).
    -   Observar las peticiones de red (Network tab) para ver cmo se cargan los datos (HTML directo, XHR/Fetch para AJAX).
    -   Inspeccionar el DOM (Elements tab) para encontrar los selectores CSS o XPath de los elementos de inters (campos de bsqueda, botones, datos a extraer, enlaces de paginacin).

2.  Mapeo del Proceso:
    -   Pgina de inicio: Hay un formulario de bsqueda? Cules son sus campos?
    -   Envo de bsqueda: Cmo se enva (Enter, botn)? A qu URL redirige?
    -   Pgina de resultados: Cmo se estructuran los resultados? Cmo se identifican los enlaces a las pginas de detalle? Hay paginacin?
    -   Pgina de detalle: Dnde est el contenido principal a extraer?

3.  Manejo de Casos Especiales:
    -   Qu pasa si no hay resultados?
    -   Hay pop-ups, captchas, o pginas intermedias (como la de "ATENTO AVISO" en este script)?
    -   El sitio requiere login?

Este anlisis previo gua el diseo del scraper, la eleccin de selectores, y la lgica de navegacin y extraccin. En el script, se identific la necesidad de buscar un trmino, enviar el formulario, y luego, crucialmente, verificar si se llega a una pgina de aviso o a una pgina de resultados real antes de intentar extraer enlaces.`}],sourceCode:`
import csv
from playwright.sync_api import sync_playwright, TimeoutError as PlaywrightTimeoutError
import os
import time
from urllib.parse import urljoin

def buscar_en_dof_y_extraer_enlaces_local(termino_busqueda: str, nombre_archivo_csv: str):
    with sync_playwright() as p:
        print("Lanzando el navegador Chromium...")
        browser = None
        page = None
        try:
            browser = p.chromium.launch(headless=True) 
            page = browser.new_page()
            print("Navegador y pgina creados.")
        except Exception as e:
            print(f"Error al lanzar el navegador: {e}")
            return

        try:
            print(f"Navegando a https://www.dof.gob.mx/...")
            page.goto("https://www.dof.gob.mx/", timeout=60000) # INTERACTIVE_SEGMENT_TARGET: 002-goto-dof
            print("Pgina del DOF cargada.")

            print(f"Ingresando '{termino_busqueda}' en el campo de bsqueda...")
            campo_busqueda_selector = "input#textobusqueda"
            page.wait_for_selector(campo_busqueda_selector, state="visible", timeout=30000) # INTERACTIVE_SEGMENT_TARGET: 002-wait-search-field
            page.fill(campo_busqueda_selector, termino_busqueda) # INTERACTIVE_SEGMENT_TARGET: 002-fill-search
            print(f"Trmino '{termino_busqueda}' ingresado.")

            print("Realizando la bsqueda...")
            page.press(campo_busqueda_selector, "Enter") # INTERACTIVE_SEGMENT_TARGET: 002-press-enter
            print("Bsqueda enviada. Esperando navegacin...")
            
            try:
                page.wait_for_load_state('networkidle', timeout=30000) 
                print(f"Navegacin completada. URL actual: {page.url}")
            except PlaywrightTimeoutError:
                print("Timeout esperando que la red se calme despus de la bsqueda. Continuando de todas formas...")
            except Exception as e_nav:
                print(f"Error durante la espera de navegacin post-bsqueda: {e_nav}. Continuando...")

            aviso_selector_texto = "text=Su solicitud no pudo ser procesada correctamente"
            es_pagina_de_aviso = False
            try:
                page.wait_for_selector(aviso_selector_texto, timeout=10000) # INTERACTIVE_SEGMENT_TARGET: 002-check-atento-aviso
                es_pagina_de_aviso = True
                print("ALERTA! Se detect la pgina de 'ATENTO AVISO'.")
                # ... (cdigo de guardado de HTML de aviso)
            except PlaywrightTimeoutError:
                print("No se detect la pgina de 'ATENTO AVISO'.")
                es_pagina_de_aviso = False
            
            if es_pagina_de_aviso:
                print("Terminando el script debido a la pgina de 'ATENTO AVISO'.")
                return 

            selector_resultados_principales = 'td > a[href*="nota_detalle.php"]' # INTERACTIVE_SEGMENT_TARGET: 002-result-selector
            try:
                page.wait_for_selector(selector_resultados_principales, state="visible", timeout=60000)
            except PlaywrightTimeoutError:
                print(f"TIMEOUT: No se encontraron enlaces con el selector '{selector_resultados_principales}'.")
                # ... (cdigo de guardado de HTML y screenshot sin resultados)
                return 

            enlaces_elementos = page.query_selector_all(selector_resultados_principales) # INTERACTIVE_SEGMENT_TARGET: 002-extract-links
            enlaces_extraidos = []
            if enlaces_elementos:
                current_page_url = page.url
                for i, elemento_enlace in enumerate(enlaces_elementos):
                    href = elemento_enlace.get_attribute("href")
                    texto_enlace = elemento_enlace.inner_text().strip().replace('\\n', ' ').replace('\\r', ' ')
                    if href and texto_enlace: 
                        enlace_absoluto = urljoin(current_page_url, href) # INTERACTIVE_SEGMENT_TARGET: 002-urljoin
                        enlaces_extraidos.append({"texto": texto_enlace, "url": enlace_absoluto})
            
            if enlaces_extraidos:
                # ... (cdigo para guardar en CSV)
                with open(nombre_archivo_csv, mode='w', newline='', encoding='utf-8') as archivo_csv: # INTERACTIVE_SEGMENT_TARGET: 002-save-csv
                    escritor_csv = csv.DictWriter(archivo_csv, fieldnames=["texto", "url"])
                    escritor_csv.writeheader()
                    escritor_csv.writerows(enlaces_extraidos)
                print(f"Enlaces guardados en '{nombre_archivo_csv}'.")

        except PlaywrightTimeoutError as e_timeout:
            print(f"TIMEOUT durante el scraping: {e_timeout}")
            # ... (manejo de errores con screenshots)
        except Exception as e:
            print(f"Error INESPERADO durante el scraping: {e}")
            # ... (manejo de errores con screenshots)
        finally:
            if browser and browser.is_connected():
                browser.close()

if __name__ == "__main__":
    termino_a_buscar = "acuerdo energas limpias"
    nombre_del_archivo = "resultados_dof.csv"
    buscar_en_dof_y_extraer_enlaces_local(termino_a_buscar, nombre_del_archivo)
`,interactiveSegments:[{id:"002-goto-dof",label:"Navegar a la pgina del DOF",matcher:/# INTERACTIVE_SEGMENT_TARGET: 002-goto-dof/,explanation:"El script comienza navegando a la URL principal del Diario Oficial de la Federacin. `page.goto()` es el comando de Playwright para cargar una nueva pgina.",relatedConceptIds:["001_test_playwright-concept-1"]},{id:"002-wait-search-field",label:"Esperar campo de bsqueda",matcher:/# INTERACTIVE_SEGMENT_TARGET: 002-wait-search-field/,explanation:"Antes de interactuar con el campo de bsqueda, el script espera explcitamente a que est visible en la pgina usando `page.wait_for_selector()`. Esto evita errores si la pgina carga lentamente.",relatedConceptIds:["002_dof_web_scraper-concept-3"]},{id:"002-fill-search",label:"Rellenar trmino de bsqueda",matcher:/# INTERACTIVE_SEGMENT_TARGET: 002-fill-search/,explanation:"`page.fill()` se usa para escribir el `termino_busqueda` proporcionado en el campo de bsqueda, identificado por `campo_busqueda_selector`.",relatedConceptIds:["002_dof_web_scraper-concept-2"]},{id:"002-press-enter",label:"Enviar bsqueda (Enter)",matcher:/# INTERACTIVE_SEGMENT_TARGET: 002-press-enter/,explanation:"Se simula la pulsacin de la tecla 'Enter' en el campo de bsqueda para enviar el formulario, usando `page.press()`.",relatedConceptIds:["002_dof_web_scraper-concept-2"]},{id:"002-check-atento-aviso",label:"Verificar pgina 'ATENTO AVISO'",matcher:/# INTERACTIVE_SEGMENT_TARGET: 002-check-atento-aviso/,explanation:"El DOF a veces muestra una pgina de aviso si la bsqueda es invlida. Este bloque usa `page.wait_for_selector()` con un timeout corto para detectar si dicha pgina apareci. Es una parte crucial del anlisis de flujo de navegacin.",relatedConceptIds:["002_dof_web_scraper-concept-3","002_dof_web_scraper-concept-6"]},{id:"002-result-selector",label:"Selector para resultados",matcher:/# INTERACTIVE_SEGMENT_TARGET: 002-result-selector/,explanation:'Este es el selector CSS (`td > a[href*="nota_detalle.php"]`) usado para identificar los enlaces a las notas de detalle en la pgina de resultados. Es especfico para la estructura HTML del DOF.',relatedConceptIds:["002_dof_web_scraper-concept-1"]},{id:"002-extract-links",label:"Extraer todos los enlaces de resultados",matcher:/# INTERACTIVE_SEGMENT_TARGET: 002-extract-links/,explanation:"`page.query_selector_all()` devuelve una lista de todos los elementos que coinciden con el `selector_resultados_principales`. Luego se itera sobre esta lista para extraer el `href` y el texto de cada enlace.",relatedConceptIds:["002_dof_web_scraper-concept-4"]},{id:"002-urljoin",label:"Construir URL absoluta",matcher:/# INTERACTIVE_SEGMENT_TARGET: 002-urljoin/,explanation:"`urllib.parse.urljoin()` se utiliza para convertir URLs relativas (encontradas en los atributos `href`) a URLs absolutas, usando la URL de la pgina actual como base. Esto asegura que los enlaces sean siempre funcionales.",relatedConceptIds:["002_dof_web_scraper-concept-5"]},{id:"002-save-csv",label:"Guardar enlaces en CSV",matcher:/# INTERACTIVE_SEGMENT_TARGET: 002-save-csv/,explanation:"Los enlaces extrados (texto y URL) se guardan en un archivo CSV usando `csv.DictWriter` para un fcil almacenamiento y uso posterior.",relatedConceptIds:["003_dof_web_scraper_next-concept-4"]}]},{id:"003_dof_web_scraper_next",title:"003_dof_web_scraper_next.py",generalPurpose:"Recolecta URLs del DOF, manejando la paginacin para obtener mltiples resultados y guardarlos en un CSV.",detailedExplanation:`Este script evoluciona el scraper anterior aadiendo la capacidad de manejar la
paginacin, permitiendo recolectar un conjunto de datos ms extenso. Busca y hace
clic en el elemento "Siguiente Pgina" (identificado como una imagen con 'alt="siguiente"'
dentro de un enlace) en un bucle hasta alcanzar un mximo de URLs o no encontrar ms
pginas. Los enlaces recolectados se guardan en un archivo CSV.`,keyConcepts:[{id:"003_dof_web_scraper_next-concept-0",name:"Manejo de Paginacin en Web Scraping",explanation:'La paginacin es comn en sitios web para dividir grandes conjuntos de resultados en mltiples pginas. Para scrapear todos los datos, es necesario navegar estas pginas.\nEstrategias Comunes:\n1.  Identificar el enlace/botn "Siguiente":\n    -   Usar selectores para encontrar el elemento que lleva a la siguiente pgina (ej. un `<a>` con texto "Siguiente", "Next", ">", o una imagen especfica como en este script `img[alt="siguiente"]`).\n    -   Hacer clic en l repetidamente.\n2.  Iterar sobre nmeros de pgina:\n    -   Si las URLs tienen un patrn como `/resultados?pagina=1`, `/resultados?pagina=2`, se puede generar estas URLs directamente.\n3.  Detectar contenido "infinito" (Infinite Scroll):\n    -   Requiere simular el scroll hacia abajo para cargar ms contenido, y observar las peticiones de red que traen nuevos datos (a menudo XHR/Fetch).\n\nEste script usa la primera estrategia: busca un enlace especfico (`SELECTOR_SIGUIENTE_PAGINA`) y hace clic en l dentro de un bucle `while`.'},{id:"003_dof_web_scraper_next-concept-1",name:"Localizadores Avanzados (Playwright Locators, `:has()`)",explanation:'Playwright ofrece "Locators" (localizadores), que son objetos que representan una forma de encontrar elementos en la pgina. Son ms potentes que los selectores de cadena porque:\n-   Son estrictos: Se aseguran de que la accin apunte a un solo elemento (a menos que se use `query_selector_all` o similar).\n-   Soportan auto-espera: Las acciones sobre localizadores esperan a que el elemento est listo.\n-   Permiten encadenamiento y filtrado.\n\nPseudo-clase CSS `:has()`:\n-   Es un selector CSS que permite seleccionar un elemento si contiene (o "tiene") ciertos otros elementos dentro de l que cumplen una condicin.\n-   Sintaxis: `elemento_padre:has(elemento_hijo_condicion)`\n-   Ejemplo en el script: `SELECTOR_SIGUIENTE_PAGINA = \'a:has(img[alt="siguiente"])\'`\n    -   Esto selecciona un elemento `<a>` (enlace) SIEMPRE Y CUANDO contenga (`has`) un elemento `<img>` (imagen) cuyo atributo `alt` sea igual a "siguiente".\n    -   Es una forma muy precisa de identificar el enlace correcto para la paginacin, en lugar de depender solo de la clase del `<a>` o el `alt` de la imagen por separado.\n\nPlaywright soporta `:has()` y otros selectores avanzados, haciendo la localizacin de elementos ms robusta.'},{id:"003_dof_web_scraper_next-concept-2",name:"Bucles de Navegacin y Condiciones de Parada",explanation:`Para scrapear mltiples pginas (paginacin) o seguir una serie de enlaces, se usan bucles. Es crucial definir condiciones de parada claras para evitar bucles infinitos y controlar la cantidad de datos recolectados.

Estructura del Bucle de Navegacin (ej. para paginacin):
1.  Iniciar en la primera pgina de resultados.
2.  Dentro de un bucle \`while\`:
    a.  Extraer los datos de la pgina actual.
    b.  Verificar si se ha alcanzado la condicin de parada (ej. nmero mximo de URLs recolectadas, lmite de pginas a procesar). Si es as, salir del bucle (\`break\`).
    c.  Buscar el elemento "Siguiente Pgina".
    d.  Si se encuentra y es clickeable:
        i.  Hacer clic en l.
        ii. Esperar a que la nueva pgina cargue.
        iii. Incrementar el contador de pgina actual.
        iv. Continuar el bucle.
    e.  Si no se encuentra el elemento "Siguiente Pgina" (o no es clickeable), asumir que es la ltima pgina y salir del bucle.

Condiciones de Parada en este script:
-   \`len(todos_los_enlaces_recolectados) < max_urls_a_recolectar\`: El bucle contina mientras no se haya alcanzado el mximo de URLs deseado.
-   Si no se encuentran ms enlaces en la pgina actual (\`if not enlaces_esta_pagina and pagina_actual > 1\`).
-   Si el botn/enlace "Siguiente Pgina" no se encuentra, no es visible, o no est habilitado (\`siguiente_pagina_locator.is_visible()\`, \`siguiente_pagina_locator.is_enabled()\`).
-   Si ocurre un error al intentar hacer clic en "Siguiente Pgina".
-   Si se detecta la pgina de "ATENTO AVISO".`},{id:"003_dof_web_scraper_next-concept-3",name:"Gestin de Estado (ej. `urls_ya_vistas` para evitar duplicados)",explanation:`Durante el web scraping, especialmente con paginacin o al seguir enlaces complejos, es posible encontrar la misma URL o el mismo tem de datos mltiples veces. Para evitar procesar o guardar duplicados, se necesita gestionar el estado de lo que ya se ha visto.

En este script, se usa \`urls_ya_vistas = set()\`:
-   Un \`set\` (conjunto) de Python es una coleccin desordenada de elementos nicos.
-   Antes de agregar una URL recin extrada a la lista principal \`todos_los_enlaces_recolectados\`, se verifica si ya est en \`urls_ya_vistas\`:
    \`if enlace_info["url"] not in urls_ya_vistas:\`
-   Si no est, se agrega a ambas: a la lista de resultados y al conjunto \`urls_ya_vistas.add(enlace_info["url"])\`.
-   Si ya est en \`urls_ya_vistas\`, se ignora.

Beneficios:
-   Evita datos duplicados en el archivo CSV final.
-   Puede ayudar a detectar y romper bucles de redireccin o patrones de paginacin anmalos si se combina con otras lgicas.
-   Hace el conteo de URLs nicas recolectadas ms preciso.

Otras formas de gestin de estado podran incluir:
-   IDs de tems ya procesados.
-   Hashes del contenido de los tems.
-   Almacenamiento persistente (ej. base de datos) para crawls muy largos que pueden interrumpirse y reanudarse.`},{id:"003_dof_web_scraper_next-concept-4",name:"Almacenamiento en CSV (`csv.DictWriter`)",explanation:"CSV (Comma-Separated Values) es un formato de archivo simple para almacenar datos tabulares. Cada lnea es un registro de datos, y cada registro consiste en uno o ms campos, separados por comas.\n\nEl mdulo `csv` de Python facilita la lectura y escritura de archivos CSV.\n`csv.DictWriter`:\n-   Crea un objeto que mapea diccionarios de Python a filas CSV.\n-   Es conveniente cuando los datos estn estructurados como una lista de diccionarios, donde cada diccionario representa una fila y las claves del diccionario son los encabezados de columna.\n-   Uso en el script:\n    1.  Definir los nombres de campo (encabezados de columna): `fieldnames=[\"texto\", \"url\"]`.\n    2.  Abrir el archivo CSV en modo escritura (`w`): `with open(ruta_archivo_csv, mode='w', newline='', encoding='utf-8') as archivo_csv:`.\n        -   `newline=''` es importante para evitar filas en blanco adicionales en algunos sistemas operativos.\n        -   `encoding='utf-8'` es bueno para manejar caracteres internacionales.\n    3.  Crear la instancia de `DictWriter`: `escritor_csv = csv.DictWriter(archivo_csv, fieldnames=fieldnames)`.\n    4.  Escribir la fila de encabezado: `escritor_csv.writeheader()`.\n    5.  Escribir las filas de datos (lista de diccionarios): `escritor_csv.writerows(todos_los_enlaces_recolectados)`.\n\nAlternativas: `csv.writer` (para listas de listas), bibliotecas como Pandas para manejo de datos ms complejo y exportacin a CSV."},{id:"003_dof_web_scraper_next-concept-5",name:"User-Agent Spoofing",explanation:`El User-Agent es una cadena de texto que el navegador enva al servidor web con cada solicitud. Identifica el tipo y versin del navegador, sistema operativo, y a veces otros detalles.
Ejemplo: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.85 Safari/537.36"

User-Agent Spoofing (Suplantacin del User-Agent):
-   Consiste en modificar esta cadena para que el scraper parezca un navegador real o diferente.
-   Algunos sitios web pueden bloquear o dar contenido diferente a User-Agents desconocidos o asociados comnmente con bots (como el User-Agent por defecto de bibliotecas como \`requests\` en Python, o a veces incluso el de herramientas de automatizacin).
-   Playwright, por defecto, usa un User-Agent correspondiente al navegador que est controlando, lo cual ya es bastante bueno. Sin embargo, a veces se puede personalizar an ms.

Implementacin en el script:
-   \`context = browser.new_context(user_agent="...")\`: Se crea un nuevo contexto de navegador y se especifica explcitamente una cadena de User-Agent comn de un navegador Chrome en Windows.
-   \`page = context.new_page()\`: Las pginas creadas desde este contexto usarn el User-Agent especificado.

Consideraciones ticas:
-   Si bien puede ayudar a acceder a contenido, el spoofing excesivo o para eludir medidas de seguridad especficas puede ir en contra de los trminos de servicio del sitio.
-   Es preferible combinarlo con un comportamiento de scraping respetuoso (baja frecuencia de solicitudes, respeto a \`robots.txt\`).`}],sourceCode:`
import csv
from playwright.sync_api import sync_playwright, Page, TimeoutError as PlaywrightTimeoutError
import os
import time
from urllib.parse import urljoin
from typing import List, Dict, Optional

# --- Constantes y Configuracin ---
BASE_URL = "https://www.dof.gob.mx/"
CAMPO_BUSQUEDA_SELECTOR = "input#textobusqueda"

SELECTOR_SIGUIENTE_PAGINA = 'a:has(img[alt="siguiente"])' # INTERACTIVE_SEGMENT_TARGET: 003-next-page-selector
AVISO_SELECTOR_TEXTO = "text=Su solicitud no pudo ser procesada correctamente"
SELECTOR_RESULTADOS_PRINCIPALES = 'a[href*="nota_detalle.php"]'


def extraer_enlaces_de_pagina(page: Page) -> List[Dict[str, str]]:
    # ... (similar al script 002, enfocado en la extraccin de esta pgina)
    enlaces_extraidos_pagina = []
    try:
        page.wait_for_selector(f"{SELECTOR_RESULTADOS_PRINCIPALES}:visible", timeout=20000)
    except PlaywrightTimeoutError:
        return []
    enlaces_elementos = page.query_selector_all(SELECTOR_RESULTADOS_PRINCIPALES)
    if enlaces_elementos:
        current_page_url = page.url
        for elemento_enlace in enlaces_elementos:
            href = elemento_enlace.get_attribute("href")
            texto_enlace = elemento_enlace.inner_text().strip().replace('\\n', ' ').replace('\\r', ' ')
            if href and texto_enlace:
                enlace_absoluto = urljoin(current_page_url, href)
                enlaces_extraidos_pagina.append({"texto": texto_enlace, "url": enlace_absoluto})
    return enlaces_extraidos_pagina


def buscar_en_dof_con_paginacion(termino_busqueda: str, nombre_archivo_csv: str, max_urls_a_recolectar: int):
    todos_los_enlaces_recolectados: List[Dict[str, str]] = []
    urls_ya_vistas = set() # INTERACTIVE_SEGMENT_TARGET: 003-urls-seen-set

    with sync_playwright() as p:
        browser = p.chromium.launch(headless=True) 
        context = browser.new_context( # INTERACTIVE_SEGMENT_TARGET: 003-user-agent
            user_agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.85 Safari/537.36"
        )
        page = context.new_page()
        
        page.goto(BASE_URL, timeout=60000)
        page.wait_for_selector(CAMPO_BUSQUEDA_SELECTOR, state="visible", timeout=30000)
        page.fill(CAMPO_BUSQUEDA_SELECTOR, termino_busqueda)
        page.press(CAMPO_BUSQUEDA_SELECTOR, "Enter")
        try:
            page.wait_for_load_state('domcontentloaded', timeout=45000)
        except PlaywrightTimeoutError:
            print("Timeout esperando carga despus de la bsqueda inicial.")
            
        pagina_actual = 1
        while len(todos_los_enlaces_recolectados) < max_urls_a_recolectar: # INTERACTIVE_SEGMENT_TARGET: 003-pagination-loop
            # ... (cdigo para detectar pgina de aviso omitido por brevedad) ...

            enlaces_esta_pagina = extraer_enlaces_de_pagina(page) # INTERACTIVE_SEGMENT_TARGET: 003-extract-current-page

            if not enlaces_esta_pagina and pagina_actual == 1:
                print("La primera pgina de bsqueda no arroj resultados.")
                break 
            if not enlaces_esta_pagina and pagina_actual > 1 :
                print("No se encontraron ms enlaces en esta pgina. Fin de resultados.")
                break

            nuevos_enlaces_agregados_count = 0
            for enlace_info in enlaces_esta_pagina:
                if enlace_info["url"] not in urls_ya_vistas: # INTERACTIVE_SEGMENT_TARGET: 003-check-duplicates
                    if len(todos_los_enlaces_recolectados) < max_urls_a_recolectar:
                        todos_los_enlaces_recolectados.append(enlace_info)
                        urls_ya_vistas.add(enlace_info["url"])
                        nuevos_enlaces_agregados_count +=1
                    else:
                        break 
            
            if len(todos_los_enlaces_recolectados) >= max_urls_a_recolectar:
                print(f"Se alcanz el mximo de {max_urls_a_recolectar} URLs.")
                break

            siguiente_pagina_locator = page.locator(SELECTOR_SIGUIENTE_PAGINA)
            try:
                if siguiente_pagina_locator.is_visible(timeout=10000):
                    if siguiente_pagina_locator.is_enabled(timeout=1000):
                        siguiente_pagina_locator.click() # INTERACTIVE_SEGMENT_TARGET: 003-click-next
                        page.wait_for_load_state('domcontentloaded', timeout=30000)
                        pagina_actual += 1
                        time.sleep(1) 
                    else:
                        print("Botn 'Siguiente Pgina' no habilitado (ltima pgina?).")
                        break
                else:
                    print("Botn 'Siguiente Pgina' no encontrado. Fin de paginacin.")
                    break
            except PlaywrightTimeoutError:
                print("Timeout buscando 'Siguiente Pgina'. Fin de paginacin.")
                break
            except Exception as e_click_siguiente:
                print(f"Error al hacer clic en 'Siguiente Pgina': {e_click_siguiente}. Fin.")
                break
        
        # ... (cdigo para guardar CSV y cerrar navegador omitido por brevedad) ...
        if todos_los_enlaces_recolectados:
            with open(nombre_archivo_csv, mode='w', newline='', encoding='utf-8') as archivo_csv:
                escritor_csv = csv.DictWriter(archivo_csv, fieldnames=["texto", "url"])
                escritor_csv.writeheader()
                escritor_csv.writerows(todos_los_enlaces_recolectados)
            print(f"Enlaces guardados en '{nombre_archivo_csv}'.")
        if browser and browser.is_connected():
            browser.close()

if __name__ == "__main__":
    termino_busqueda_main = "decreto" 
    nombre_archivo_main = "resultados_dof_paginado.csv"
    max_urls_main = 50 
    buscar_en_dof_con_paginacion(termino_busqueda_main, nombre_archivo_main, max_urls_main)
`,interactiveSegments:[{id:"003-next-page-selector",label:"Selector para 'Siguiente Pgina'",matcher:/# INTERACTIVE_SEGMENT_TARGET: 003-next-page-selector/,explanation:"Este selector CSS avanzado `a:has(img[alt=\"siguiente\"])` se utiliza para localizar el enlace de 'Siguiente Pgina'. Selecciona un tag `<a>` que contenga un tag `<img>` con el atributo `alt` igual a 'siguiente'.",relatedConceptIds:["003_dof_web_scraper_next-concept-1"]},{id:"003-urls-seen-set",label:"Conjunto de URLs Vistas",matcher:/# INTERACTIVE_SEGMENT_TARGET: 003-urls-seen-set/,explanation:"`urls_ya_vistas = set()` inicializa un conjunto para llevar un registro de las URLs ya recolectadas. Esto es crucial para evitar duplicados en los resultados finales.",relatedConceptIds:["003_dof_web_scraper_next-concept-3"]},{id:"003-user-agent",label:"Establecer User-Agent",matcher:/# INTERACTIVE_SEGMENT_TARGET: 003-user-agent/,explanation:"Se crea un nuevo contexto de navegador con un User-Agent especfico. Esto puede ayudar a que el scraper parezca un navegador estndar y evite bloqueos simples basados en User-Agent.",relatedConceptIds:["003_dof_web_scraper_next-concept-5"]},{id:"003-pagination-loop",label:"Bucle de Paginacin",matcher:/# INTERACTIVE_SEGMENT_TARGET: 003-pagination-loop/,explanation:"Este bucle `while` controla el proceso de paginacin. Contina mientras el nmero de URLs recolectadas sea menor que `max_urls_a_recolectar` y se puedan encontrar ms pginas.",relatedConceptIds:["003_dof_web_scraper_next-concept-0","003_dof_web_scraper_next-concept-2"]},{id:"003-extract-current-page",label:"Extraer enlaces de pgina actual",matcher:/# INTERACTIVE_SEGMENT_TARGET: 003-extract-current-page/,explanation:"La funcin `extraer_enlaces_de_pagina(page)` se llama para obtener todos los enlaces relevantes de la pgina cargada actualmente.",relatedConceptIds:["002_dof_web_scraper-concept-4"]},{id:"003-check-duplicates",label:"Verificar URLs duplicadas",matcher:/# INTERACTIVE_SEGMENT_TARGET: 003-check-duplicates/,explanation:'Antes de aadir una URL a la lista de resultados, se comprueba si `enlace_info["url"]` ya existe en `urls_ya_vistas`. Si no, se aade a ambas colecciones.',relatedConceptIds:["003_dof_web_scraper_next-concept-3"]},{id:"003-click-next",label:"Clic en 'Siguiente Pgina'",matcher:/# INTERACTIVE_SEGMENT_TARGET: 003-click-next/,explanation:"Si el localizador de 'Siguiente Pgina' es visible y est habilitado, se hace clic en l con `siguiente_pagina_locator.click()` para navegar a la siguiente tanda de resultados.",relatedConceptIds:["003_dof_web_scraper_next-concept-0","002_dof_web_scraper-concept-2"]}]},{id:"004_procesar_urls_dof",title:"004_procesar_urls_dof.py",generalPurpose:"Visita cada URL recolectada del CSV y guarda el contenido textual completo de la nota del DOF en archivos .txt individuales.",detailedExplanation:`Este script toma el CSV de URLs del paso anterior. Para cada URL, navega a la pgina
de detalle de la nota del DOF y extrae el contenido textual principal del documento
(identificado por el selector 'div#DivDetalleNota'). El texto extrado se limpia
mnimamente y se guarda en un archivo '.txt' individual, en una carpeta nombrada
segn el trmino de bsqueda original. Incluye un retardo aleatorio entre
solicitudes para ser corts con el servidor.`,keyConcepts:[{id:"004_procesar_urls_dof-concept-0",name:"Procesamiento de Datos en Pipeline",explanation:`Un pipeline de procesamiento de datos es una secuencia de pasos donde la salida de un paso se convierte en la entrada del siguiente. Esto permite modularizar tareas complejas en componentes ms pequeos y manejables.
En este proyecto DOF Scraper y RAG:
1.  Script 003 (o 002): Recolecta URLs y las guarda en un CSV. (Salida: \`resultados_dof_paginado.csv\`)
2.  Script 004 (este script): Lee el CSV de URLs (Entrada), visita cada URL, extrae el contenido completo y lo guarda en archivos .txt. (Salida: Carpeta con archivos .txt)
3.  Script 005: Lee los archivos .txt (Entrada), genera resmenes y los guarda. (Salida: Carpeta con resmenes .txt)
4.  Script 007: Lee los archivos .txt originales (Entrada), los fragmenta, genera embeddings y crea una base de datos vectorial. (Salida: Base de datos LanceDB)
Y as sucesivamente.

Ventajas:
-   Modularidad: Cada script tiene una responsabilidad clara.
-   Reusabilidad: Los componentes individuales pueden ser reutilizados.
-   Depuracin: Es ms fcil aislar y corregir problemas en un paso especfico.
-   Escalabilidad: Se pueden optimizar o escalar partes individuales del pipeline.
-   Persistencia Intermedia: Guardar resultados intermedios (como el CSV de URLs o los .txt) permite reanudar el proceso desde un punto intermedio si algo falla, sin tener que empezar desde cero.`},{id:"004_procesar_urls_dof-concept-1",name:"Lectura de Archivos CSV (`csv.DictReader`)",explanation:'As como `csv.DictWriter` escribe diccionarios a CSV, `csv.DictReader` lee archivos CSV y mapea la informacin de cada fila a un diccionario.\n`csv.DictReader`:\n-   Trata la primera fila del CSV como los encabezados de columna (claves del diccionario).\n-   Cada fila subsiguiente se convierte en un diccionario donde las claves son los encabezados y los valores son los datos de esa fila.\n-   Es ms conveniente que `csv.reader` (que devuelve listas) cuando se quiere acceder a los datos por nombre de columna.\n\nUso en el script:\n1.  Abrir el archivo CSV en modo lectura (`r`): `with open(archivo_csv_completo, mode=\'r\', newline=\'\', encoding=\'utf-8\') as f_csv:`.\n2.  Crear una instancia de `DictReader`: `lector_csv = csv.DictReader(f_csv)`.\n3.  Iterar sobre `lector_csv` para obtener cada fila como un diccionario:\n    `for fila in lector_csv:`\n    -   Dentro del bucle, `fila` es un diccionario. Por ejemplo, `fila["url"]` y `fila["texto"]` acceden a los valores de las columnas "url" y "texto" respectivamente.\n    -   `enlaces_a_procesar.append(fila)` guarda estos diccionarios para su procesamiento posterior.\n\nEsto permite al script tomar las URLs y sus textos asociados (que pueden usarse para nombrar archivos) del CSV generado por el script anterior.'},{id:"004_procesar_urls_dof-concept-2",name:"Extraccin de Contenido Especfico (identificar el contenedor principal)",explanation:`Una vez que el script navega a una pgina de detalle de una nota del DOF, el objetivo es extraer el cuerpo principal del texto del documento.
Esto implica:
1.  Inspeccin del DOM: Usar las herramientas de desarrollador del navegador en una pgina de detalle tpica para identificar el elemento HTML que envuelve el contenido principal de la nota.
    -   Buscar un \`<div>\`, \`<article>\`, o seccin similar con un ID o clase distintiva.
    -   En este caso, se identific que el contenido est dentro de un \`div\` con el id "DivDetalleNota".
    -   Por lo tanto, el selector es: \`SELECTOR_CONTENIDO_NOTA = "div#DivDetalleNota"\`

2.  Localizacin y Extraccin con Playwright:
    -   \`contenido_elemento = page.locator(SELECTOR_CONTENIDO_NOTA)\`: Se obtiene un localizador para este div.
    -   \`if not contenido_elemento.is_visible(timeout=20000)\`: Se verifica si el contenedor existe y es visible. Esto es importante porque si el selector es incorrecto o la pgina no carg como se esperaba, intentar extraer texto de un elemento no existente causara un error.
    -   \`texto_nota = contenido_elemento.inner_text()\`: Si el contenedor es visible, se extrae todo el texto interno, que corresponde al contenido de la nota.

3.  Limpieza Mnima:
    -   \`texto_nota = re.sub(r'\\s\\s+', ' ', texto_nota)\`: Reemplaza mltiples espacios en blanco con uno solo.
    -   \`texto_nota = texto_nota.strip()\`: Elimina espacios en blanco al inicio y al final del texto.

Este proceso asegura que se capture el texto relevante de la pgina, excluyendo cabeceras, pies de pgina, mens de navegacin, etc.`},{id:"004_procesar_urls_dof-concept-3",name:"Sanitizacin de Nombres de Archivo/Carpeta (`re.sub`)",explanation:"Los sistemas operativos tienen restricciones sobre los caracteres que se pueden usar en nombres de archivos y carpetas (ej. `/`, `\\`, `:`, `*`, `?`, `\"`, `<`, `>`, `|` suelen ser problemticos). Adems, los espacios pueden ser inconvenientes en algunos contextos.\nLa \"sanitizacin\" es el proceso de modificar una cadena de texto para que sea un nombre de archivo/carpeta vlido y til.\n\n`re.sub(patron, reemplazo, cadena)`:\n-   Funcin del mdulo `re` (expresiones regulares) de Python.\n-   Busca todas las ocurrencias de `patron` en `cadena` y las reemplaza con `reemplazo`.\n\nImplementacin en `sanitizar_nombre()`:\n1.  `nombre = nombre.lower()`: Convierte a minsculas para consistencia.\n2.  `nombre = re.sub(r'\\s+', '_', nombre)`: Reemplaza una o ms ocurrencias de caracteres de espacio en blanco (`\\s+`) con un guion bajo (`_`).\n3.  `if es_carpeta: nombre = re.sub(r'[^\\w-]', '', nombre)`:\n    -   Si es para un nombre de carpeta, elimina (`''`) cualquier carcter que NO sea (`^`) alfanumrico (`\\w`, incluye letras, nmeros y guion bajo) o un guion (`-`). Esto es ms restrictivo.\n4.  `else: nombre = re.sub(r'[^\\w.-]', '', nombre)`:\n    -   Si es para un nombre de archivo, permite tambin puntos (`.`) para las extensiones.\n5.  `nombre = nombre[:150]`: Trunca el nombre a 150 caracteres para evitar problemas con lmites de longitud de ruta en algunos sistemas.\n6.  `if not nombre: return \"documento_sin_titulo\"`: Si despus de sanitizar queda vaco, devuelve un nombre por defecto.\n\nEsto asegura que los nombres de archivo (derivados del ttulo de la nota) y la carpeta contenedora (derivada del trmino de bsqueda) sean vlidos y seguros para el sistema de archivos."},{id:"004_procesar_urls_dof-concept-4",name:"Operaciones de Sistema de Archivos (crear directorios, escribir archivos)",explanation:'El mdulo `os` de Python proporciona funciones para interactuar con el sistema operativo, incluyendo operaciones de sistema de archivos.\n\nOperaciones Usadas en el Script:\n1.  Creacin de Directorios:\n    -   `nombre_carpeta_base = sanitizar_nombre(...) + "_colectados"`: Se define el nombre de la carpeta.\n    -   `script_dir = os.path.dirname(__file__) if "__file__" in locals() else "."`: Obtiene la ruta del directorio donde se est ejecutando el script.\n    -   `ruta_carpeta_base = os.path.join(script_dir, nombre_carpeta_base)`: Construye la ruta completa a la nueva carpeta. `os.path.join` es la forma correcta de unir componentes de ruta de forma independiente del sistema operativo.\n    -   `if not os.path.exists(ruta_carpeta_base):`: Verifica si la carpeta ya existe.\n    -   `os.makedirs(ruta_carpeta_base)`: Crea la carpeta. `makedirs` crea directorios intermedios si no existen (a diferencia de `mkdir`).\n\n2.  Escritura de Archivos:\n    -   `nombre_archivo_txt = sanitizar_nombre(texto_titulo_original) + ".txt"`: Se define el nombre del archivo de texto.\n    -   `ruta_archivo_txt = os.path.join(ruta_carpeta_base, nombre_archivo_txt)`: Se construye la ruta completa al archivo.\n    -   `with open(ruta_archivo_txt, "w", encoding="utf-8") as f_txt:`: Abre el archivo en modo escritura (`w`). Si el archivo no existe, se crea. Si existe, se sobrescribe. `encoding="utf-8"` es crucial para manejar correctamente diversos caracteres.\n    -   `f_txt.write(contenido_texto)`: Escribe el contenido extrado al archivo.\n\nOtras funciones comunes de `os` y `os.path`: `os.listdir()`, `os.remove()`, `os.path.isfile()`, `os.path.isdir()`.'},{id:"004_procesar_urls_dof-concept-5",name:"Web Scraping tico (retardos)",explanation:'Al realizar web scraping, es fundamental ser "corts" con el servidor web para evitar sobrecargarlo. Una alta frecuencia de solicitudes desde una misma IP puede:\n-   Degradar el rendimiento del sitio para otros usuarios.\n-   Disparar medidas de seguridad que bloqueen la IP del scraper.\n-   Ser considerado un comportamiento abusivo.\n\nIntroducir Retardos (Delays):\n-   Una prctica comn es aadir una pausa (`time.sleep()`) entre solicitudes.\n-   `import time`\n-   `import random`\n-   `MIN_DELAY_SECONDS = 1.0`\n-   `MAX_DELAY_SECONDS = 3.0`\n\nImplementacin en el script:\n-   `tiempo_espera = random.uniform(MIN_DELAY_SECONDS, MAX_DELAY_SECONDS)`: Genera un nmero flotante aleatorio entre el mnimo y mximo de segundos especificados. Usar un retardo aleatorio en lugar de uno fijo puede hacer que el patrn de solicitudes parezca menos robtico.\n-   `time.sleep(tiempo_espera)`: Pausa la ejecucin del script durante el `tiempo_espera` calculado.\n-   Este retardo se aplica *despus* de procesar cada URL y *antes* de solicitar la siguiente:\n    `if i + 1 < len(enlaces_a_procesar): time.sleep(tiempo_espera)`\n\nEsto ayuda a distribuir la carga en el servidor del DOF y reduce la probabilidad de ser bloqueado. La duracin adecuada del retardo depende del sitio web y de la cantidad de datos a extraer.'}],sourceCode:`
import csv
import os
import re 
from playwright.sync_api import sync_playwright, Page, TimeoutError as PlaywrightTimeoutError
from typing import List, Dict, Optional
import time
import random 

SELECTOR_CONTENIDO_NOTA = "div#DivDetalleNota" # INTERACTIVE_SEGMENT_TARGET: 004-content-selector
MIN_DELAY_SECONDS = 1.0
MAX_DELAY_SECONDS = 3.0

def sanitizar_nombre(nombre: str, es_carpeta=False) -> str: # INTERACTIVE_SEGMENT_TARGET: 004-sanitize-name
    nombre = nombre.lower()
    nombre = re.sub(r'\\s+', '_', nombre)
    if es_carpeta:
        nombre = re.sub(r'[^\\w-]', '', nombre)
    else:
        nombre = re.sub(r'[^\\w.-]', '', nombre)
    nombre = nombre[:150]
    if not nombre:
        return "documento_sin_titulo"
    return nombre

def extraer_contenido_de_nota(page: Page, url: str) -> Optional[str]:
    print(f"  Visitando URL: {url}")
    try:
        page.goto(url, timeout=60000, wait_until='domcontentloaded')
        contenido_elemento = page.locator(SELECTOR_CONTENIDO_NOTA)
        if not contenido_elemento.is_visible(timeout=20000): # INTERACTIVE_SEGMENT_TARGET: 004-check-content-visible
            # ... (cdigo de manejo de error si no es visible)
            return None
        texto_nota = contenido_elemento.inner_text() # INTERACTIVE_SEGMENT_TARGET: 004-extract-inner-text
        texto_nota = re.sub(r'\\s\\s+', ' ', texto_nota) 
        texto_nota = texto_nota.strip()
        return texto_nota
    except PlaywrightTimeoutError:
        print(f"  TIMEOUT al cargar o encontrar contenido en: {url}")
    except Exception as e:
        print(f"  Error al procesar URL {url}: {e}")
    return None

def procesar_urls_y_guardar_contenido(archivo_csv_entrada: str, termino_busqueda_original: str):
    nombre_carpeta_base = sanitizar_nombre(termino_busqueda_original, es_carpeta=True) + "_colectados"
    script_dir = os.path.dirname(__file__) if "__file__" in locals() else "."
    ruta_carpeta_base = os.path.join(script_dir, nombre_carpeta_base)
    
    if not os.path.exists(ruta_carpeta_base):
        os.makedirs(ruta_carpeta_base) # INTERACTIVE_SEGMENT_TARGET: 004-create-folder
        print(f"Carpeta creada: {ruta_carpeta_base}")

    archivo_csv_completo = os.path.join(script_dir, archivo_csv_entrada)
    enlaces_a_procesar: List[Dict[str, str]] = []
    with open(archivo_csv_completo, mode='r', newline='', encoding='utf-8') as f_csv: # INTERACTIVE_SEGMENT_TARGET: 004-read-csv
        lector_csv = csv.DictReader(f_csv)
        for fila in lector_csv:
            enlaces_a_procesar.append(fila)
    
    if not enlaces_a_procesar: return
    
    with sync_playwright() as p:
        browser = p.chromium.launch(headless=True) 
        context = browser.new_context(
             user_agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"
        )
        page = context.new_page()
        archivos_guardados_count = 0
        for i, enlace_info in enumerate(enlaces_a_procesar):
            url_nota = enlace_info.get("url")
            texto_titulo_original = enlace_info.get("texto", "documento_desconocido")
            if not url_nota: continue

            contenido_texto = extraer_contenido_de_nota(page, url_nota)

            if contenido_texto:
                nombre_archivo_txt = sanitizar_nombre(texto_titulo_original) + ".txt"
                ruta_archivo_txt = os.path.join(ruta_carpeta_base, nombre_archivo_txt)
                try:
                    with open(ruta_archivo_txt, "w", encoding="utf-8") as f_txt: # INTERACTIVE_SEGMENT_TARGET: 004-write-txt
                        f_txt.write(f"URL: {url_nota}\\n")
                        f_txt.write(f"TTULO ORIGINAL: {texto_titulo_original}\\n\\n")
                        f_txt.write("-------------------- CONTENIDO --------------------\\n\\n")
                        f_txt.write(contenido_texto)
                    archivos_guardados_count += 1
                except Exception as e_write:
                    print(f"  Error al escribir archivo {ruta_archivo_txt}: {e_write}")
            
            if i + 1 < len(enlaces_a_procesar):
                tiempo_espera = random.uniform(MIN_DELAY_SECONDS, MAX_DELAY_SECONDS) # INTERACTIVE_SEGMENT_TARGET: 004-random-delay
                time.sleep(tiempo_espera)
        browser.close()
        print(f"\\nProcesamiento finalizado. Se guardaron {archivos_guardados_count} archivos.")

if __name__ == "__main__":
    archivo_csv_con_urls = "resultados_dof_paginado.csv" 
    termino_busqueda_usado = "decreto" 
    # ... (resto del main)
    procesar_urls_y_guardar_contenido(archivo_csv_con_urls, termino_busqueda_usado) 
`,interactiveSegments:[{id:"004-content-selector",label:"Selector de Contenido Principal",matcher:/# INTERACTIVE_SEGMENT_TARGET: 004-content-selector/,explanation:"El selector CSS `div#DivDetalleNota` se usa para identificar el elemento `<div>` que contiene el texto principal de la nota del DOF en su pgina de detalle.",relatedConceptIds:["004_procesar_urls_dof-concept-2","002_dof_web_scraper-concept-1"]},{id:"004-sanitize-name",label:"Funcin para Sanitizar Nombres",matcher:/# INTERACTIVE_SEGMENT_TARGET: 004-sanitize-name/,explanation:"La funcin `sanitizar_nombre` toma una cadena y la limpia para que sea un nombre de archivo o carpeta vlido, eliminando caracteres problemticos y reemplazando espacios.",relatedConceptIds:["004_procesar_urls_dof-concept-3"]},{id:"004-check-content-visible",label:"Verificar Visibilidad del Contenido",matcher:/# INTERACTIVE_SEGMENT_TARGET: 004-check-content-visible/,explanation:"Antes de extraer texto, `contenido_elemento.is_visible()` comprueba si el contenedor principal es realmente visible en la pgina. Esto evita errores si el selector es incorrecto o la pgina no carg bien.",relatedConceptIds:["004_procesar_urls_dof-concept-2","002_dof_web_scraper-concept-3"]},{id:"004-extract-inner-text",label:"Extraer Texto del Contenido",matcher:/# INTERACTIVE_SEGMENT_TARGET: 004-extract-inner-text/,explanation:"`contenido_elemento.inner_text()` extrae todo el texto visible dentro del elemento `DivDetalleNota`, que corresponde al contenido de la nota oficial.",relatedConceptIds:["004_procesar_urls_dof-concept-2","002_dof_web_scraper-concept-4"]},{id:"004-create-folder",label:"Crear Carpeta de Salida",matcher:/# INTERACTIVE_SEGMENT_TARGET: 004-create-folder/,explanation:"`os.makedirs(ruta_carpeta_base)` crea el directorio donde se guardarn los archivos .txt. Se verifica primero si ya existe para evitar errores.",relatedConceptIds:["004_procesar_urls_dof-concept-4"]},{id:"004-read-csv",label:"Leer URLs del Archivo CSV",matcher:/# INTERACTIVE_SEGMENT_TARGET: 004-read-csv/,explanation:"El script abre el archivo CSV generado por el script anterior y usa `csv.DictReader` para leer cada fila como un diccionario, obteniendo las URLs a procesar.",relatedConceptIds:["004_procesar_urls_dof-concept-1","004_procesar_urls_dof-concept-0"]},{id:"004-write-txt",label:"Escribir Contenido a Archivo .txt",matcher:/# INTERACTIVE_SEGMENT_TARGET: 004-write-txt/,explanation:"Para cada URL procesada, el contenido textual extrado se guarda en un nuevo archivo `.txt`. El nombre del archivo se deriva del ttulo original de la nota, sanitizado previamente.",relatedConceptIds:["004_procesar_urls_dof-concept-4"]},{id:"004-random-delay",label:"Retardo Aleatorio entre Solicitudes",matcher:/# INTERACTIVE_SEGMENT_TARGET: 004-random-delay/,explanation:"`time.sleep(random.uniform(MIN_DELAY_SECONDS, MAX_DELAY_SECONDS))` introduce una pausa aleatoria entre el procesamiento de cada URL. Esto es una prctica de scraping tico para no sobrecargar el servidor.",relatedConceptIds:["004_procesar_urls_dof-concept-5"]}]},{id:"005_generar_resumenes_dof",title:"005_generar_resumenes_dof.py",generalPurpose:"Lee los archivos .txt de contenido completo y utiliza la API de Groq para generar un resumen de cada documento.",detailedExplanation:`Toma los archivos de texto completos y emplea un Modelo de Lenguaje Grande (LLM) a
travs de la API de Groq (configurado para Llama-4-Scout) para crear resmenes.
El texto se trunca usando \`tiktoken\` para no exceder los lmites de contexto del LLM.
Construye un prompt especfico para la tarea de resumen. El script gestiona la
interaccin con la API de Groq, incluyendo la carga de claves API desde \`.env\` y
el manejo de lmites de la API (RPM, TPM). Los resmenes se guardan en una nueva
estructura de carpetas. Implementa renombrado de carpetas "OLD".`,keyConcepts:[{id:"005_generar_resumenes_dof-concept-0",name:"Modelos de Lenguaje Grandes (LLMs)",explanation:`Los Modelos de Lenguaje Grandes (LLMs, por sus siglas en ingls Large Language Models) son modelos de inteligencia artificial entrenados con enormes cantidades de datos de texto.
Caractersticas Principales:
-   Capacidad de Comprensin y Generacin: Pueden entender el lenguaje natural y generar texto coherente y contextualmente relevante.
-   Versatilidad: Se utilizan para una amplia gama de tareas como traduccin, resumen, respuesta a preguntas, generacin de cdigo, escritura creativa, etc.
-   Modelos Pre-entrenados: Generalmente, se parte de un modelo base pre-entrenado por organizaciones como OpenAI (GPT), Google (Gemini, PaLM), Meta (Llama), Anthropic (Claude), Mistral AI.
-   Fine-tuning (Ajuste Fino): Pueden ser adaptados (fine-tuned) a tareas o dominios especficos con conjuntos de datos ms pequeos y especializados.
-   Interaccin mediante Prompts: Se interacta con ellos dndoles instrucciones en lenguaje natural (prompts).

En este script, se usa un LLM (Llama-4-Scout a travs de Groq) para la tarea especfica de resumir documentos del DOF.`},{id:"005_generar_resumenes_dof-concept-1",name:"APIs de LLMs (Groq)",explanation:`Muchas organizaciones que desarrollan LLMs los ofrecen a travs de APIs (Interfaces de Programacin de Aplicaciones). Esto permite a los desarrolladores integrar las capacidades de los LLMs en sus propias aplicaciones sin necesidad de alojar o gestionar los modelos ellos mismos.

Groq:
-   Es una empresa que ofrece acceso a LLMs de cdigo abierto (como Llama, Mixtral) a travs de una API, destacndose por su alta velocidad de inferencia (tokens por segundo) gracias a su hardware especializado (LPUs - Language Processing Units).
-   Proporciona una SDK (Software Development Kit) en Python (la biblioteca \`groq\`) para facilitar la interaccin con su API.
-   Requiere una Clave API (API Key) para autenticacin y seguimiento del uso.

Funcionamiento Tpico de una API de LLM:
1.  Obtener una API Key del proveedor.
2.  Instalar la biblioteca cliente del proveedor (ej. \`pip install groq\`).
3.  En el cdigo:
    -   Configurar el cliente con la API Key.
    -   Seleccionar un modelo disponible en la plataforma.
    -   Enviar una solicitud (request) con el prompt y otros parmetros (temperatura, max_tokens, etc.).
    -   Recibir una respuesta (response) que contiene el texto generado por el LLM.
    -   Manejar posibles errores y lmites de la API.

Este script usa la API de Groq para enviar el contenido de los documentos y recibir resmenes generados por \`meta-llama/Llama-4-Scout-17B-16E-Instruct\`.`},{id:"005_generar_resumenes_dof-concept-2",name:"Ingeniera de Prompts para Resmenes",explanation:`La ingeniera de prompts ("prompt engineering") es el arte y la ciencia de disear entradas (prompts) efectivas para que un LLM genere la salida deseada. Para la tarea de resumen:
Principios Clave:
1.  Claridad y Especificidad: Indicar claramente la tarea. En lugar de "Resume esto", usar "Genera un resumen conciso en un solo prrafo que capture la esencia y los puntos ms importantes del siguiente documento."
2.  Rol del LLM: Asignar un rol al LLM puede mejorar la calidad. Ej: "Eres un asistente experto en la extraccin de informacin clave de documentos oficiales mexicanos."
3.  Formato de Salida: Especificar el formato deseado si es necesario (ej. "en un solo prrafo", "en vietas").
4.  Restricciones y Guas:
    -   Indicar qu evitar: "Evita frases introductorias como 'El documento habla de...'".
    -   Indicar en qu enfocarse: "Ve directamente a los hechos y el propsito principal."
5.  Contexto: Proveer el texto a resumir de forma clara, a menudo delimitado. Ej: \`--- INICIO DEL DOCUMENTO ---\\n{texto_documento}\\n--- FIN DEL DOCUMENTO ---\`
6.  Iteracin: Probar diferentes prompts y ajustar segn los resultados.

El prompt usado en este script (\`prompt_resumen\`) aplica varios de estos principios para guiar al LLM de Groq a generar resmenes concisos y factuales de los documentos del DOF.`},{id:"005_generar_resumenes_dof-concept-3",name:"Tokenizacin para LLMs (`tiktoken`), Lmites de Contexto, Truncado",explanation:`Tokenizacin:
-   Los LLMs no procesan texto como caracteres o palabras directamente, sino como "tokens". Un token puede ser una palabra, parte de una palabra (subpalabra), o un carcter de puntuacin.
-   Diferentes LLMs usan diferentes tokenizadores. \`tiktoken\` es una biblioteca de OpenAI (usada aqu) que permite tokenizar texto segn los esquemas de varios modelos (ej. \`cl100k_base\` para GPT-3.5/4 y algunos modelos Llama).
-   \`obtener_conteo_tokens_tiktoken()\` cuenta cuntos tokens tiene un texto.

Lmites de Contexto (Context Window):
-   Cada LLM tiene un "lmite de contexto" o "ventana de contexto", que es la cantidad mxima de tokens (entrada + salida) que puede procesar en una sola interaccin.
-   Ej: Un modelo puede tener un lmite de 4096 tokens, otro de 16K, 32K, 128K, etc.
-   Si el texto de entrada ms el texto de salida esperado excede este lmite, la API generalmente dar un error o truncar la entrada/salida.

Truncado:
-   Cuando un documento es demasiado largo para caber en la ventana de contexto del LLM, una estrategia simple es truncarlo: cortar el texto para que no exceda un nmero mximo de tokens.
-   \`truncar_texto_por_tokens()\` en el script hace esto:
    1.  Tokeniza el texto.
    2.  Si el nmero de tokens excede \`MAX_TOKENS_PARA_ENVIAR_MODELO\`, corta la lista de tokens.
    3.  Decodifica los tokens truncados de nuevo a texto.
-   Desventaja del truncado simple: Se puede perder informacin importante al final del documento. Otras estrategias incluyen resumir por partes, o tcnicas ms avanzadas de RAG.

Este script usa \`tiktoken\` para contar y truncar los documentos del DOF antes de enviarlos a Groq, asegurando que no se exceda \`MAX_TOKENS_PARA_ENVIAR_MODELO\`.`},{id:"005_generar_resumenes_dof-concept-4",name:"Manejo de Lmites de API (Rate Limiting)",explanation:'Los proveedores de API de LLMs imponen lmites de uso (rate limits) para asegurar la disponibilidad del servicio para todos los usuarios y gestionar la carga en sus sistemas.\nTipos Comunes de Lmites:\n-   RPM (Requests Per Minute): Nmero mximo de solicitudes API que puedes hacer en un minuto.\n-   TPM (Tokens Per Minute): Nmero mximo de tokens (entrada + salida) que puedes procesar en un minuto.\n-   Algunos servicios pueden tener lmites diarios o por segundo.\n\nManejo de Lmites en el Script (`verificar_y_esperar_limites_api`):\n1.  Seguimiento Local:\n    -   `solicitudes_en_minuto_actual`: Contador de solicitudes hechas.\n    -   `tokens_procesados_en_minuto_actual`: Contador de tokens procesados.\n    -   `inicio_minuto_actual`: Marca de tiempo de cundo comenz la "ventana" del minuto actual.\n2.  Reseteo por Minuto: Si ha pasado ms de 60 segundos desde `inicio_minuto_actual`, se resetean los contadores.\n3.  Verificacin Antes de la Solicitud:\n    -   Comprueba si la solicitud actual por s sola es muy grande y podra necesitar esperar al siguiente minuto.\n    -   Si `solicitudes_en_minuto_actual` >= `LIMITE_SOLICITUDES_POR_MINUTO`: Espera hasta que termine el minuto actual.\n    -   Si `tokens_procesados_en_minuto_actual` + tokens_proyectados_para_esta_solicitud > `LIMITE_TOKENS_POR_MINUTO_PROCESADOS`: Espera.\n4.  Actualizacin Despus de la Solicitud: Incrementa `solicitudes_en_minuto_actual` y `tokens_procesados_en_minuto_actual`.\n5.  Reintentos con Backoff Exponencial (no implementado explcitamente en esta funcin pero s en `generar_resumen_con_groq`): Si una API devuelve un error de rate limit (ej. HTTP 429), esperar un tiempo y reintentar, aumentando el tiempo de espera en cada reintento.\n\nEste script implementa una gestin proactiva de los lmites de RPM y TPM definidos para la API de Groq, adems de reintentos en caso de error.'},{id:"005_generar_resumenes_dof-concept-5",name:"Variables de Entorno (`python-dotenv`)",explanation:'Las variables de entorno son variables cuyo valor se establece fuera del programa, en el entorno del sistema operativo o en un archivo especial, y estn disponibles para el programa en tiempo de ejecucin.\nSon comnmente usadas para:\n-   Configuraciones especficas del entorno (desarrollo, pruebas, produccin).\n-   Credenciales sensibles como claves API, contraseas de base de datos.\n\n`python-dotenv`:\n-   Es una biblioteca de Python que carga variables de entorno desde un archivo llamado `.env` (por defecto) ubicado en el directorio raz del proyecto.\n-   El archivo `.env` es un archivo de texto simple con pares `CLAVE=VALOR`, uno por lnea.\n-   Ejemplo de `.env`:\n    GROQ_API_KEY="tu_clave_api_aqui"\n-   IMPORTANTE: El archivo `.env` NUNCA debe ser subido a sistemas de control de versiones (ej. Git). Se debe agregar a `.gitignore`.\n\nUso en el script:\n1.  `from dotenv import load_dotenv`: Importa la funcin.\n2.  `load_dotenv()`: Carga las variables del archivo `.env` al entorno.\n3.  `GROQ_API_KEY = os.getenv("GROQ_API_KEY")`: Accede al valor de la variable de entorno `GROQ_API_KEY` usando `os.getenv()`. Si la variable no est definida, `os.getenv()` devuelve `None`.\n\nBeneficios:\n-   Seguridad: Mantiene las credenciales fuera del cdigo fuente.\n-   Flexibilidad: Fcil cambiar configuraciones sin modificar el cdigo.\n-   Portabilidad: Cada desarrollador o entorno de despliegue puede tener su propio archivo `.env`.'},{id:"005_generar_resumenes_dof-concept-6",name:"Gestin de Carpetas (`shutil.move`)",explanation:"El mdulo `shutil` (shell utilities) en Python proporciona funciones de alto nivel para operaciones de archivos y colecciones de archivos, como copiar, mover, renombrar y eliminar.\n\n`shutil.move(origen, destino)`:\n-   Mueve un archivo o directorio (recursivamente) desde `origen` a `destino`.\n-   Si `destino` es un directorio existente, `origen` se mueve dentro de ese directorio.\n-   Si `destino` especifica un nombre de archivo en un directorio existente, `origen` se renombra a `destino`.\n-   Si `origen` y `destino` estn en el mismo sistema de archivos, `os.rename()` se usa internamente (generalmente atmico). Si estn en sistemas de archivos diferentes, `origen` se copia y luego se elimina.\n\nUso en la funcin `renombrar_carpeta_si_existe()`:\n-   Este script crea una carpeta para guardar los resmenes (ej. `decreto_colectados_resumen`).\n-   Si el script se ejecuta varias veces, para evitar conflictos o mezclar resultados de ejecuciones anteriores, la funcin `renombrar_carpeta_si_existe` verifica si la carpeta de resmenes ya existe.\n-   Si existe, la renombra aadiendo un sufijo `_OLD_XXX` (ej. `decreto_colectados_resumen_OLD_001`).\n    `shutil.move(ruta_carpeta, nueva_ruta_old)`\n-   Esto preserva los resultados de ejecuciones anteriores y permite que el script actual cree una nueva carpeta limpia para los nuevos resmenes.\n\nEs una forma de gestionar los artefactos de salida del script de manera organizada."}],sourceCode:`
import os
import csv
import re
import time
import tiktoken
from groq import Groq
from dotenv import load_dotenv # INTERACTIVE_SEGMENT_TARGET: 005-import-dotenv
from typing import Optional, List, Dict
import shutil 

load_dotenv() # INTERACTIVE_SEGMENT_TARGET: 005-load-dotenv

GROQ_API_KEY = os.getenv("GROQ_API_KEY") # INTERACTIVE_SEGMENT_TARGET: 005-get-apikey
MODELO_GROQ = "meta-llama/Llama-4-Scout-17B-16E-Instruct" 
ENCODING_TIKTOKEN = "cl100k_base" 

LIMITE_SOLICITUDES_POR_MINUTO = 30
LIMITE_TOKENS_POR_MINUTO_PROCESADOS = 30000 
MAX_TOKENS_PARA_ENVIAR_MODELO = 25000 
MAX_COMPLETION_TOKENS_RESUMEN = 768 
TEMPERATURE_RESUMEN = 0.4 
MAX_API_REINTENTOS = 3
TIEMPO_ESPERA_REINTENTO_SEGUNDOS = 10
PAUSA_MINIMA_ENTRE_SOLICITUDES_SEGUNDOS = 2.0 

solicitudes_en_minuto_actual = 0
tokens_procesados_en_minuto_actual = 0
inicio_minuto_actual = time.time()

def sanitizar_nombre(nombre: str, es_carpeta=False) -> str:
    # ... (funcin de sanitizacin)
    nombre = nombre.lower()
    nombre = re.sub(r'\\s+', '_', nombre)
    if es_carpeta: nombre = re.sub(r'[^\\w-]', '', nombre)
    else: nombre = re.sub(r'[^\\w.-]', '', nombre)
    nombre = nombre[:150]
    if not nombre:
        if es_carpeta: return "documentos_sin_nombre_busqueda"
        return "documento_sin_titulo"
    return nombre

def renombrar_carpeta_si_existe(ruta_carpeta: str): # INTERACTIVE_SEGMENT_TARGET: 005-rename-folder
    if os.path.exists(ruta_carpeta):
        i = 1
        while True:
            nueva_ruta_old = f"{ruta_carpeta}_OLD_{i:03d}"
            if not os.path.exists(nueva_ruta_old):
                try:
                    shutil.move(ruta_carpeta, nueva_ruta_old) # INTERACTIVE_SEGMENT_TARGET: 005-shutil-move
                except Exception as e:
                    raise 
                break
            i += 1

def obtener_conteo_tokens_tiktoken(texto: str, encoding_nombre: str = ENCODING_TIKTOKEN) -> int:
    try:
        encoding = tiktoken.get_encoding(encoding_nombre)
        return len(encoding.encode(texto))
    except Exception: 
        return len(texto.split()) 

def truncar_texto_por_tokens(texto: str, encoding_nombre: str, max_tokens: int) -> str: # INTERACTIVE_SEGMENT_TARGET: 005-truncate-text
    try:
        encoding = tiktoken.get_encoding(encoding_nombre)
        tokens = encoding.encode(texto)
        if len(tokens) > max_tokens:
            tokens_truncados = tokens[:max_tokens]
            texto_truncado = encoding.decode(tokens_truncados)
            return texto_truncado
        return texto
    except Exception as e:
        # ... (fallback a truncado por caracteres)
        max_chars = max_tokens * 3 
        if len(texto) > max_chars: return texto[:max_chars]
        return texto

def verificar_y_esperar_limites_api(tokens_entrada_prompt: int): # INTERACTIVE_SEGMENT_TARGET: 005-rate-limit-check
    global solicitudes_en_minuto_actual, tokens_procesados_en_minuto_actual, inicio_minuto_actual
    # ... (lgica de manejo de lmites de API detallada en la explicacin del concepto)
    tiempo_actual = time.time()
    if tiempo_actual - inicio_minuto_actual >= 60:
        solicitudes_en_minuto_actual = 0; tokens_procesados_en_minuto_actual = 0; inicio_minuto_actual = tiempo_actual
    # ... (ms verificaciones de RPM y TPM) ...
    if solicitudes_en_minuto_actual >= LIMITE_SOLICITUDES_POR_MINUTO:
        # ... esperar ...
        pass # Simplificado para brevedad
    if tokens_procesados_en_minuto_actual + tokens_entrada_prompt + MAX_COMPLETION_TOKENS_RESUMEN > LIMITE_TOKENS_POR_MINUTO_PROCESADOS:
        # ... esperar ...
        pass # Simplificado para brevedad


def generar_resumen_con_groq(cliente_groq: Groq, texto_documento: str) -> Optional[str]:
    global solicitudes_en_minuto_actual, tokens_procesados_en_minuto_actual

    prompt_resumen = ( # INTERACTIVE_SEGMENT_TARGET: 005-summary-prompt
        "Eres un asistente experto en la extraccin de informacin clave de documentos oficiales mexicanos. "
        "Tu tarea es generar un resumen muy conciso, en un solo prrafo, que capture la esencia y los puntos ms importantes del siguiente documento. "
        "Evita frases introductorias como 'El documento habla de...' o 'Este texto es sobre...'. Ve directamente a los hechos y el propsito principal."
        f"\\n\\n--- INICIO DEL DOCUMENTO ---\\n{texto_documento}\\n--- FIN DEL DOCUMENTO ---\\n\\n"
        "RESUMEN CONCISO EN UN PRRAFO:"
    )
    tokens_prompt_estimados = obtener_conteo_tokens_tiktoken(prompt_resumen)
    verificar_y_esperar_limites_api(tokens_prompt_estimados)

    for intento in range(MAX_API_REINTENTOS):
        try:
            stream = cliente_groq.chat.completions.create( # INTERACTIVE_SEGMENT_TARGET: 005-groq-api-call
                model=MODELO_GROQ,
                messages=[{"role": "user", "content": prompt_resumen}],
                temperature=TEMPERATURE_RESUMEN,
                max_tokens=MAX_COMPLETION_TOKENS_RESUMEN,
                stream=True,
            )
            resumen_completo = "".join([chunk.choices[0].delta.content or "" for chunk in stream])
            # ... (actualizar contadores de lmites)
            solicitudes_en_minuto_actual += 1
            # ...
            return resumen_completo.strip() if resumen_completo.strip() else None
        except Exception as e:
            # ... (manejo de reintentos y errores)
            if "rate limit" in str(e).lower() or "429" in str(e).lower():
                # ... esperar y posiblemente resetear contadores ...
                pass
            elif intento < MAX_API_REINTENTOS - 1:
                time.sleep(TIEMPO_ESPERA_REINTENTO_SEGUNDOS)
            else:
                return None
    return None

def procesar_documentos_para_resumen(carpeta_textos_entrada: str, termino_busqueda_original: str):
    if not GROQ_API_KEY: return
    cliente_groq = Groq()
    # ... (lgica de creacin/renombrado de carpetas) ...
    
    # Leer archivos .txt y procesarlos
    for i, nombre_archivo in enumerate(archivos_txt_encontrados): # Suponiendo que archivos_txt_encontrados est definido
        # ... (leer contenido del archivo .txt) ...
        texto_documento_completo = "..." # Extrado del archivo
        if not texto_documento_completo: continue

        texto_para_modelo = truncar_texto_por_tokens(
            texto_documento_completo, ENCODING_TIKTOKEN, MAX_TOKENS_PARA_ENVIAR_MODELO
        )
        resumen = generar_resumen_con_groq(cliente_groq, texto_para_modelo)
        if resumen:
            # ... (guardar resumen en archivo) ...
            pass
        if i + 1 < len(archivos_txt_encontrados): # Suponiendo archivos_txt_encontrados
             time.sleep(PAUSA_MINIMA_ENTRE_SOLICITUDES_SEGUNDOS) # INTERACTIVE_SEGMENT_TARGET: 005-pause-between-docs

if __name__ == "__main__":
    # ... (configuracin del script)
    # Suponiendo que archivos_txt_encontrados es una lista de archivos a procesar
    archivos_txt_encontrados = [] # Placeholder, debe ser llenado en la lgica real de procesar_documentos_para_resumen
    procesar_documentos_para_resumen("carpeta_entrada", "termino_busqueda")
`,interactiveSegments:[{id:"005-import-dotenv",label:"Importar python-dotenv",matcher:/# INTERACTIVE_SEGMENT_TARGET: 005-import-dotenv/,explanation:"Se importa la biblioteca `dotenv` para cargar variables de entorno desde un archivo `.env`.",relatedConceptIds:["005_generar_resumenes_dof-concept-5"]},{id:"005-load-dotenv",label:"Cargar Variables de Entorno",matcher:/# INTERACTIVE_SEGMENT_TARGET: 005-load-dotenv/,explanation:"`load_dotenv()` lee el archivo `.env` y carga las variables definidas all en el entorno del script, hacindolas accesibles a travs de `os.getenv()`.",relatedConceptIds:["005_generar_resumenes_dof-concept-5"]},{id:"005-get-apikey",label:"Obtener Clave API de Groq",matcher:/# INTERACTIVE_SEGMENT_TARGET: 005-get-apikey/,explanation:'`os.getenv("GROQ_API_KEY")` recupera la clave API de Groq desde las variables de entorno. Es crucial para autenticarse con la API de Groq.',relatedConceptIds:["005_generar_resumenes_dof-concept-1","005_generar_resumenes_dof-concept-5"]},{id:"005-rename-folder",label:"Renombrar Carpeta Existente",matcher:/# INTERACTIVE_SEGMENT_TARGET: 005-rename-folder/,explanation:"La funcin `renombrar_carpeta_si_existe` se usa para mover una carpeta de resmenes anterior (si existe) a un nuevo nombre con el sufijo '_OLD_XXX', preservando resultados previos.",relatedConceptIds:["005_generar_resumenes_dof-concept-6"]},{id:"005-shutil-move",label:"Mover Carpeta con shutil.move",matcher:/# INTERACTIVE_SEGMENT_TARGET: 005-shutil-move/,explanation:"`shutil.move(origen, destino)` es la funcin que efectivamente renombra (mueve) la carpeta de resmenes existente a la nueva ubicacin '_OLD_XXX'.",relatedConceptIds:["005_generar_resumenes_dof-concept-6"]},{id:"005-truncate-text",label:"Truncar Texto por Tokens",matcher:/# INTERACTIVE_SEGMENT_TARGET: 005-truncate-text/,explanation:"La funcin `truncar_texto_por_tokens` usa `tiktoken` para asegurar que el texto enviado al LLM no exceda `MAX_TOKENS_PARA_ENVIAR_MODELO`, cortndolo si es necesario.",relatedConceptIds:["005_generar_resumenes_dof-concept-3"]},{id:"005-rate-limit-check",label:"Verificar Lmites de API",matcher:/# INTERACTIVE_SEGMENT_TARGET: 005-rate-limit-check/,explanation:"Antes de cada llamada a la API, `verificar_y_esperar_limites_api` comprueba si se han alcanzado los lmites de solicitudes o tokens por minuto (RPM/TPM) y espera si es necesario.",relatedConceptIds:["005_generar_resumenes_dof-concept-4"]},{id:"005-summary-prompt",label:"Prompt para Resumen",matcher:/# INTERACTIVE_SEGMENT_TARGET: 005-summary-prompt/,explanation:"Este es el prompt diseado para instruir al LLM de Groq sobre cmo generar el resumen. Incluye el rol, la tarea, restricciones y el formato del documento.",relatedConceptIds:["005_generar_resumenes_dof-concept-0","005_generar_resumenes_dof-concept-2"]},{id:"005-groq-api-call",label:"Llamada a la API de Groq",matcher:/# INTERACTIVE_SEGMENT_TARGET: 005-groq-api-call/,explanation:"`cliente_groq.chat.completions.create()` enva la solicitud al modelo LLM especificado en Groq, con el prompt y otros parmetros como temperatura y mximo de tokens para la respuesta.",relatedConceptIds:["005_generar_resumenes_dof-concept-1"]},{id:"005-pause-between-docs",label:"Pausa entre Documentos",matcher:/# INTERACTIVE_SEGMENT_TARGET: 005-pause-between-docs/,explanation:"Se introduce una pequea pausa (`PAUSA_MINIMA_ENTRE_SOLICITUDES_SEGUNDOS`) despus de procesar cada documento para ser corts con la API y ayudar a gestionar los lmites de tasa.",relatedConceptIds:["005_generar_resumenes_dof-concept-4"]}]},{id:"006_contar_tokens_dof",title:"006_contar_tokens_dof.py",generalPurpose:"Analiza archivos de texto y cuenta tokens usando tiktoken (mtodo OpenAI).",detailedExplanation:'Este script es una utilidad para cuantificar el tamao de los documentos (originales\no resmenes) en trminos de tokens, usando `tiktoken` y el encoding `"cl100k_base"`\n(relevante para modelos OpenAI y algunos Llama). Lee archivos `.txt`, extrae el\ncontenido principal y cuenta los tokens. Los resultados se guardan en un CSV.\nEsto es til para estimar costos de API y planificar estrategias de RAG.',keyConcepts:[{id:"006_contar_tokens_dof-concept-0",name:"Tokenizacin (especfica de OpenAI/tiktoken)",explanation:'La tokenizacin es el proceso de convertir una secuencia de texto en una secuencia de tokens. Los LLMs operan sobre estos tokens.\n`tiktoken` es la biblioteca de tokenizacin de OpenAI. Permite:\n-   Obtener el tokenizador (encoding) para un modelo especfico (ej. "gpt-4", "text-embedding-ada-002").\n-   Codificar texto a una lista de IDs de tokens: `encoding.encode("hola mundo")` -> `[123, 456]`.\n-   Decodificar una lista de IDs de tokens de vuelta a texto: `encoding.decode([123, 456])` -> `"hola mundo"`.\n-   Contar el nmero de tokens que un texto ocupara para un modelo dado: `len(encoding.encode(texto))`.\n\nImportancia:\n-   Conocer el nmero de tokens es crucial para gestionar los lmites de contexto de los LLMs.\n-   Muchos modelos de API cobran por el nmero de tokens procesados (entrada + salida).\n-   Ayuda a disear estrategias de fragmentacin (chunking) para RAG.\n\nEste script usa `tiktoken` para analizar el tamao (en tokens) de los documentos del DOF, lo cual es til para la planificacin de los pasos siguientes que involucran LLMs (resumen, embedding, generacin RAG).'},{id:"006_contar_tokens_dof-concept-1",name:"Encodings de `tiktoken` (`cl100k_base`)",explanation:'Un "encoding" en el contexto de `tiktoken` se refiere al esquema especfico de tokenizacin que usa un modelo de lenguaje. Diferentes familias de modelos (o incluso versiones) pueden usar diferentes encodings.\n`cl100k_base`:\n-   Es el nombre del encoding utilizado por varios modelos modernos de OpenAI, incluyendo:\n    -   Modelos GPT-3.5 Turbo\n    -   Modelos GPT-4\n    -   Modelos de embedding como `text-embedding-ada-002` y `text-embedding-3-small` / `text-embedding-3-large`.\n-   Tambin es el encoding base para algunos modelos de la familia Llama y otros modelos de cdigo abierto, lo que lo hace bastante verstil.\n\nObtencin del Encoding:\n-   `encoding = tiktoken.get_encoding("cl100k_base")`: Carga el tokenizador especfico.\n-   Si se usa un nombre de modelo, `tiktoken` puede inferir el encoding: `encoding = tiktoken.encoding_for_model("gpt-4")`.\n\nPor qu es importante el encoding correcto?\n-   Usar el encoding incorrecto resultar en un conteo de tokens errneo y puede llevar a problemas al interactuar con el LLM (ej. enviar ms tokens de los que el modelo realmente ve, o viceversa).\n-   La forma en que se dividen las palabras en subpalabras vara entre encodings.\n\nEste script usa `cl100k_base` porque es un encoding comn y relevante para los modelos que se podran usar en las etapas posteriores del pipeline RAG (como embeddings de OpenAI o LLMs basados en Llama/GPT).'},{id:"006_contar_tokens_dof-concept-2",name:"Anlisis de Corpus de Texto",explanation:`Un "corpus" de texto es una coleccin grande y estructurada de textos. En este proyecto, la coleccin de archivos \`.txt\` con el contenido de las notas del DOF forma un corpus.
Anlisis de Corpus:
-   Implica examinar el corpus para entender sus propiedades estadsticas y lingsticas.
-   En el contexto de LLMs y RAG, un anlisis importante es el tamao de los documentos:
    -   Distribucin de longitudes de documentos (en tokens).
    -   Nmero de documentos muy largos o muy cortos.
    -   Promedio de tokens por documento.
-   Esta informacin es vital para:
    -   Estrategias de Fragmentacin (Chunking): Cul es el tamao de chunk ptimo? Cunto overlap se necesita?
    -   Estimacin de Costos de API: Si se van a procesar todos los documentos con un LLM (ej. para embeddings o resmenes), el conteo total de tokens da una idea del costo.
    -   Seleccin de Modelos: Algunos modelos tienen ventanas de contexto ms grandes que otros.
    -   Optimizacin de Prompts: Si los documentos son consistentemente largos, se podra necesitar un enfoque de resumen iterativo o RAG sobre resmenes.

Este script realiza una parte de este anlisis: cuenta los tokens para cada documento y los guarda en un CSV. Este CSV podra luego ser analizado ms a fondo (ej. con Pandas) para obtener estadsticas descriptivas sobre el tamao del corpus documental del DOF recolectado.`},{id:"006_contar_tokens_dof-concept-3",name:"Estimacin de Uso de API basada en Tokens",explanation:`Muchos servicios de API de LLMs (como OpenAI, Groq, Anthropic) basan su precio en el nmero de tokens procesados. Generalmente, hay costos separados para:
-   Tokens de Entrada (Input Tokens): Los tokens que componen el prompt enviado al modelo.
-   Tokens de Salida (Output Tokens/Completion Tokens): Los tokens que el modelo genera como respuesta.

Ejemplo:
-   Un modelo podra costar $0.001 por cada 1000 tokens de entrada y $0.002 por cada 1000 tokens de salida.

Importancia de la Estimacin:
-   Presupuesto: Permite prever los costos de un proyecto que usa LLMs extensivamente.
-   Optimizacin: Motiva a:
    -   Hacer prompts ms concisos (menos tokens de entrada).
    -   Pedir al LLM respuestas ms cortas si es apropiado (menos tokens de salida).
    -   Elegir modelos con una buena relacin costo/rendimiento para la tarea.
    -   Implementar estrategias de caching para evitar reprocesar las mismas solicitudes.

El script \`006_contar_tokens_dof.py\` ayuda en esta estimacin al:
1.  Contar los tokens de los documentos originales (que seran entrada para resmenes o embeddings).
2.  Si se aplica a los resmenes generados por \`005_generar_resumenes_dof.py\`, contara los tokens de esos resmenes (que podran ser entrada para un sistema RAG).

Con estos conteos, se puede multiplicar por las tarifas del proveedor de API para estimar los costos de procesar todo el corpus documental, por ejemplo, para generar embeddings para todos los fragmentos o resmenes.`}],sourceCode:`
import os
import csv
import re
import tiktoken 

def sanitizar_nombre(nombre: str, es_carpeta=False) -> str:
    # ... (funcin de sanitizacin)
    nombre = nombre.lower()
    nombre = re.sub(r'\\s+', '_', nombre)
    if es_carpeta: nombre = re.sub(r'[^\\w-]', '', nombre) 
    else: nombre = re.sub(r'[^\\w.-]', '', nombre) 
    nombre = nombre[:150] 
    if not nombre: 
        if es_carpeta: return "documentos_sin_nombre_busqueda"
        return "documento_sin_titulo"
    return nombre

def limpiar_nombre_para_documento(nombre_archivo_txt: str) -> str:
    # ... (funcin de limpieza de nombre)
    nombre_sin_extension = nombre_archivo_txt.rsplit('.txt', 1)[0]
    nombre_legible = nombre_sin_extension.replace('_', ' ')
    return ' '.join(word.capitalize() for word in nombre_legible.split())


def contar_tokens_openai(texto: str, modelo_encoding: str = "cl100k_base") -> int: # INTERACTIVE_SEGMENT_TARGET: 006-count-tokens-func
    try:
        encoding = tiktoken.get_encoding(modelo_encoding) # INTERACTIVE_SEGMENT_TARGET: 006-get-encoding
        tokens = encoding.encode(texto) # INTERACTIVE_SEGMENT_TARGET: 006-encode-text
        return len(tokens)
    except Exception as e:
        print(f"Error al tokenizar con tiktoken (modelo {modelo_encoding}): {e}")
        return 0

def contar_tokens_en_archivo_openai(ruta_archivo_txt: str, modelo_encoding: str = "cl100k_base") -> int:
    try:
        with open(ruta_archivo_txt, 'r', encoding='utf-8') as f:
            lineas = f.readlines()
        
        contenido_principal = []
        capturando_contenido = False
        for linea in lineas: # INTERACTIVE_SEGMENT_TARGET: 006-extract-file-content
            if "-------------------- CONTENIDO --------------------" in linea:
                capturando_contenido = True
                continue 
            if capturando_contenido:
                contenido_principal.append(linea)
        
        texto_completo = "".join(contenido_principal).strip()
        if not texto_completo: return 0
        return contar_tokens_openai(texto_completo, modelo_encoding)
    except Exception as e:
        print(f"Error leyendo o procesando el archivo {ruta_archivo_txt}: {e}")
        return 0

def generar_csv_conteo_tokens_openai(carpeta_textos: str, archivo_csv_salida: str, modelo_encoding: str = "cl100k_base"):
    if not os.path.isdir(carpeta_textos): return
    datos_tokens = []
    for nombre_archivo in os.listdir(carpeta_textos): # INTERACTIVE_SEGMENT_TARGET: 006-iterate-files
        if nombre_archivo.endswith(".txt"):
            ruta_completa_archivo = os.path.join(carpeta_textos, nombre_archivo)
            nombre_documento = limpiar_nombre_para_documento(nombre_archivo)
            cantidad_tokens = contar_tokens_en_archivo_openai(ruta_completa_archivo, modelo_encoding)
            if cantidad_tokens > 0 :
                datos_tokens.append({"nombre_documento": nombre_documento, "cantidad_tokens_openai": cantidad_tokens})

    if not datos_tokens: return
    with open(archivo_csv_salida, mode='w', newline='', encoding='utf-8') as f_csv: # INTERACTIVE_SEGMENT_TARGET: 006-write-csv
        campos = ["nombre_documento", "cantidad_tokens_openai"] 
        escritor_csv = csv.DictWriter(f_csv, fieldnames=campos)
        escritor_csv.writeheader()
        escritor_csv.writerows(datos_tokens)
    print(f"\\nArchivo CSV con conteo de tokens (OpenAI) guardado en: {archivo_csv_salida}")

if __name__ == "__main__":
    # ... (configuracin del script)
    ruta_carpeta_documentos = "..." # Debe ser definida
    nombre_archivo_csv_salida = "..." # Debe ser definido
    # generar_csv_conteo_tokens_openai(ruta_carpeta_documentos, nombre_archivo_csv_salida)
`,interactiveSegments:[{id:"006-count-tokens-func",label:"Funcin para Contar Tokens",matcher:/# INTERACTIVE_SEGMENT_TARGET: 006-count-tokens-func/,explanation:"La funcin `contar_tokens_openai` es el ncleo de la tokenizacin. Toma un texto y el nombre de un encoding (por defecto `cl100k_base`) y devuelve el nmero de tokens.",relatedConceptIds:["006_contar_tokens_dof-concept-0"]},{id:"006-get-encoding",label:"Obtener Encoding de Tiktoken",matcher:/# INTERACTIVE_SEGMENT_TARGET: 006-get-encoding/,explanation:"`tiktoken.get_encoding(modelo_encoding)` carga el tokenizador especfico (encoding) necesario para contar los tokens correctamente segn el modelo de referencia.",relatedConceptIds:["006_contar_tokens_dof-concept-1"]},{id:"006-encode-text",label:"Codificar Texto a Tokens",matcher:/# INTERACTIVE_SEGMENT_TARGET: 006-encode-text/,explanation:"`encoding.encode(texto)` convierte la cadena de texto en una lista de IDs de tokens. La longitud de esta lista (`len(tokens)`) es el conteo de tokens.",relatedConceptIds:["006_contar_tokens_dof-concept-0"]},{id:"006-extract-file-content",label:"Extraer Contenido Relevante del Archivo",matcher:/# INTERACTIVE_SEGMENT_TARGET: 006-extract-file-content/,explanation:"Este bucle lee las lneas del archivo `.txt` y extrae solo el texto que aparece despus del delimitador `-------------------- CONTENIDO --------------------`, asumiendo una estructura especfica para los archivos de contenido.",relatedConceptIds:["006_contar_tokens_dof-concept-2"]},{id:"006-iterate-files",label:"Iterar sobre Archivos de Texto",matcher:/# INTERACTIVE_SEGMENT_TARGET: 006-iterate-files/,explanation:"El script recorre todos los archivos en la `carpeta_textos` especificada, procesando aquellos que terminan en `.txt` para contar sus tokens.",relatedConceptIds:["006_contar_tokens_dof-concept-2","004_procesar_urls_dof-concept-4"]},{id:"006-write-csv",label:"Escribir Resultados a CSV",matcher:/# INTERACTIVE_SEGMENT_TARGET: 006-write-csv/,explanation:"Los resultados (nombre del documento y cantidad de tokens) se almacenan en un archivo CSV para fcil anlisis posterior, utilizando `csv.DictWriter`.",relatedConceptIds:["006_contar_tokens_dof-concept-3","003_dof_web_scraper_next-concept-4"]}]},{id:"007_crear_bd_lancedb_dof",title:"007_crear_bd_lancedb_dof.py",generalPurpose:"Crea la base de datos vectorial en LanceDB con embeddings (Ollama bge-m3) de fragmentos de documentos.",detailedExplanation:"Este script es crucial para la fase de recuperacin del RAG. Toma los textos completos\nde los documentos, los fragmenta en chunks con traslape (usando `tiktoken` para\ncontrolar el tamao), genera embeddings para cada chunk usando Ollama con el modelo\n`bge-m3`, y los almacena en una base de datos vectorial LanceDB. Define un esquema\npara la tabla usando `LanceModel` y crea un ndice IVF_PQ para bsquedas eficientes.\nGuarda metadatos como el nombre del archivo original y el ID del fragmento.",keyConcepts:[{id:"007_crear_bd_lancedb_dof-concept-0",name:"Embeddings de Texto (bge-m3)",explanation:`Un embedding de texto es una representacin vectorial (una lista de nmeros) de un fragmento de texto en un espacio de alta dimensionalidad.
Propsito: Capturar el significado semntico del texto. Textos con significados similares tendrn vectores (embeddings) cercanos en este espacio vectorial.
Cmo se Generan: Mediante modelos de lenguaje entrenados especficamente para esta tarea (modelos de embedding). Estos modelos aprenden a mapear texto a vectores durante su entrenamiento.

\`bge-m3\` (BAAI General Embedding):
-   Es un modelo de embedding de texto de alto rendimiento desarrollado por el Beijing Academy of Artificial Intelligence (BAAI).
-   Es multilinge y conocido por su buen desempeo en tareas de recuperacin semntica.
-   Puede ser ejecutado localmente usando herramientas como Ollama.
-   Produce embeddings de una dimensionalidad especfica (ej. 1024 dimensiones para \`bge-m3-base\`, que es el que se usa aqu implcitamente con \`bge-m3\` en Ollama).

En este script:
-   Cada fragmento (chunk) de los documentos del DOF se convierte en un embedding usando \`bge-m3\` a travs de Ollama.
-   Estos embeddings son los que se almacenan en LanceDB para permitir la bsqueda por similitud semntica.`},{id:"007_crear_bd_lancedb_dof-concept-1",name:"Ollama (servicio local de modelos)",explanation:'Ollama es una herramienta que facilita la ejecucin de modelos de lenguaje grandes (LLMs) y modelos de embedding de forma local en tu propia mquina.\nCaractersticas:\n-   Sencillez: Permite descargar y ejecutar modelos populares (Llama, Mistral, Phi, y modelos de embedding como `bge-m3`, `nomic-embed-text`) con comandos simples.\n-   API Local: Expone una API compatible con la API de OpenAI, lo que facilita la integracin con bibliotecas existentes (como `langchain`, `llama-index`, o la biblioteca `ollama` para Python).\n-   Privacidad: Los datos procesados localmente no se envan a servidores de terceros.\n-   Costo: Gratuito (aparte del costo del hardware y electricidad).\n-   Experimentacin: Ideal para probar diferentes modelos y configuraciones sin incurrir en costos de API.\n\nUso en el script:\n-   `import ollama`\n-   `ollama.embeddings(model="bge-m3", prompt=texto)`: Enva el `texto` al servicio local de Ollama (que debe estar corriendo) para generar un embedding usando el modelo `bge-m3`.\n-   La respuesta contiene el vector de embedding.\n\nRequiere tener Ollama instalado y el modelo deseado descargado (ej. `ollama pull bge-m3`).'},{id:"007_crear_bd_lancedb_dof-concept-2",name:"Bases de Datos Vectoriales (LanceDB)",explanation:`Las bases de datos vectoriales (Vector Databases) estn diseadas especficamente para almacenar, gestionar y realizar bsquedas eficientes sobre vectores de alta dimensionalidad, como los embeddings de texto o imgenes.
Caractersticas Clave:
-   Almacenamiento Eficiente: Optimizadas para manejar grandes cantidades de vectores.
-   Bsqueda por Similitud (ANN - Approximate Nearest Neighbor): Permiten encontrar rpidamente los vectores en la base de datos que son ms similares a un vector de consulta dado. Esto es mucho ms rpido que calcular la similitud con cada vector individualmente (bsqueda exacta o k-NN).
-   Indexacin Vectorial: Utilizan algoritmos de indexacin especializados (ej. IVF_PQ, HNSW) para acelerar las bsquedas ANN.
-   Metadatos: Permiten almacenar metadatos junto con los vectores (ej. el texto original del fragmento, ID del documento).
-   Escalabilidad.

LanceDB:
-   Es una base de datos vectorial open-source, sin servidor (serverless), diseada para ser embebida en aplicaciones Python y otros lenguajes.
-   Se basa en el formato de archivo Lance, optimizado para analtica y machine learning.
-   Caractersticas:
    -   Fcil de usar e integrar.
    -   Persistente en disco (no solo en memoria).
    -   Soporta filtrado de metadatos junto con la bsqueda vectorial.
    -   Integracin con Pydantic para la definicin de esquemas.
    -   Permite la creacin de ndices como IVF_PQ.

En este script, LanceDB se usa para:
1.  Crear una tabla con un esquema que incluye el embedding (\`vector\`) y metadatos.
2.  Aadir los embeddings de los fragmentos de documentos.
3.  Crear un ndice para bsquedas rpidas por similitud coseno.`},{id:"007_crear_bd_lancedb_dof-concept-3",name:"Fragmentacin (Chunking) y Superposicin (Overlap)",explanation:`Los LLMs y modelos de embedding tienen lmites de contexto (cuntos tokens pueden procesar a la vez). Los documentos largos necesitan ser divididos en fragmentos ms pequeos ("chunks") antes de generar embeddings o procesarlos con un LLM.

Fragmentacin (Chunking):
-   Proceso de dividir un texto largo en trozos de tamao manejable.
-   Tamao del Chunk (\`CHUNK_SIZE_TOKENS\`): Se define en trminos de tokens (ej. 1000 tokens). La eleccin del tamao depende del modelo de embedding, la naturaleza del contenido y la granularidad deseada para la recuperacin.
-   \`fragmentador_texto_con_traslape()\` en el script usa \`tiktoken\` para dividir el texto basado en el conteo de tokens.

Superposicin (Overlap):
-   Al dividir el texto, parte del final de un chunk se repite al inicio del siguiente chunk.
-   Tamao del Overlap (\`CHUNK_OVERLAP_TOKENS\`): Cantidad de tokens que se superponen (ej. 150 tokens).
-   Propsito: Ayuda a mantener la coherencia y el contexto semntico entre fragmentos adyacentes. Sin overlap, una idea o frase que se extienda a travs del lmite de dos chunks podra perderse o interpretarse incorrectamente al embedir cada chunk por separado.

Ejemplo (simplificado por palabras, no tokens):
Texto: "El perro marrn rpido salta sobre el zorro perezoso."
Chunk size: 6 palabras, Overlap: 2 palabras
Chunk 1: "El perro marrn rpido salta sobre"
Chunk 2: "salta sobre el zorro perezoso." (El overlap es "salta sobre")

El script \`007\` usa esta tcnica para preparar los documentos del DOF para la generacin de embeddings.`},{id:"007_crear_bd_lancedb_dof-concept-4",name:"Esquemas en LanceDB (`LanceModel`, `Vector`)",explanation:'LanceDB utiliza una integracin con Pydantic (o su propio sistema similar `LanceModel`) para definir el esquema (la estructura) de los datos que se almacenarn en una tabla.\n`LanceModel`:\n-   Es una clase base similar a `pydantic.BaseModel`. Se hereda de ella para definir un nuevo esquema.\n-   Cada campo de la clase representa una columna en la tabla de LanceDB, con su tipo de dato correspondiente.\n-   Ejemplo de definicin de esquema en el script:\n    `class DocumentoFragmento(LanceModel):`\n        `id: str`                      # Columna \'id\' de tipo string\n        `texto: str`                   # Columna \'texto\' (el fragmento) de tipo string\n        `vector: LanceVector(actual_dimension_usar)` # Columna \'vector\' de tipo embedding\n        `nombre_archivo_original: str` # Metadato: nombre del archivo fuente\n        `indice_fragmento_en_doc: int`# Metadato: ndice del fragmento\n\n`LanceVector(dimension)`:\n-   Es un tipo especial proporcionado por LanceDB para campos que almacenarn vectores (embeddings).\n-   Se debe especificar la `dimension` del vector (ej. 1024 para `bge-m3`).\n-   Es crucial que la dimensin en el esquema coincida con la dimensin de los embeddings que se van a insertar; de lo contrario, ocurrirn errores. El script intenta determinar esta dimensin dinmicamente.\n\nAl crear una tabla en LanceDB:\n-   `db.create_table(nombre_tabla_lancedb, schema=DocumentoFragmento, mode="overwrite")`\n-   Se pasa la clase `DocumentoFragmento` (que define el esquema) al mtodo `create_table`.\n-   `mode="overwrite"` indica que si la tabla ya existe, se eliminar y se crear una nueva. Otras opciones son "create" (falla si existe) o "append" (si el esquema coincide).'},{id:"007_crear_bd_lancedb_dof-concept-5",name:"Indexacin Vectorial (IVF_PQ), Mtricas de Distancia",explanation:`La indexacin vectorial es crucial para realizar bsquedas de similitud rpidas (ANN) en grandes conjuntos de datos vectoriales. Sin un ndice, se tendra que comparar el vector de consulta con todos los vectores de la base de datos (bsqueda exhaustiva), lo cual es lento.

IVF_PQ (Inverted File Index with Product Quantization):
-   Es un algoritmo popular de indexacin para ANN.
-   IVF (Inverted File Index):
    1.  Agrupamiento (Clustering): Los vectores de la base de datos se agrupan en \`k\` clsteres (particiones). Se elige un centroide para cada clster.
    2.  Bsqueda: Dado un vector de consulta, primero se encuentran los clsteres ms cercanos a l. Luego, la bsqueda se limita solo a los vectores dentro de esos pocos clsteres, en lugar de toda la base de datos.
-   PQ (Product Quantization):
    -   Tcnica de compresin de vectores para reducir el uso de memoria y acelerar los clculos de distancia.
    -   Divide cada vector en sub-vectores ms pequeos.
    -   Cuantiza (aproxima) estos sub-vectores usando un conjunto de centroides precalculados para cada grupo de sub-vectores.

Mtricas de Distancia:
-   Para determinar qu tan "cercanos" o "similares" son dos vectores, se usan mtricas de distancia.
-   Distancia Coseno (Cosine Distance) / Similitud Coseno (Cosine Similarity):
    -   Mide el coseno del ngulo entre dos vectores.
    -   Similitud Coseno: Vara de -1 (opuestos) a 1 (idnticos). 0 significa ortogonales.
    -   Distancia Coseno: A menudo se calcula como \`1 - Similitud Coseno\`. Vara de 0 (idnticos) a 2 (opuestos). Menor distancia es mejor.
    -   Es comnmente usada para embeddings de texto porque es insensible a la magnitud del vector, enfocndose en la orientacin.
-   Distancia Euclidiana (L2 Distance):
    -   La distancia "en lnea recta" entre dos puntos (vectores) en el espacio. Menor distancia es mejor.

En el script:
-   \`tabla.create_index(metric="cosine", ...)\`
    -   Crea un ndice en la columna \`vector\` usando la mtrica de distancia coseno.
    -   LanceDB maneja los detalles de IVF_PQ internamente. Parmetros como \`num_partitions\` y \`num_sub_vectors\` pueden ajustarse, pero LanceDB tambin puede usar valores por defecto razonables.`},{id:"007_crear_bd_lancedb_dof-concept-6",name:"Persistencia de BD Vectorial",explanation:'La persistencia se refiere a la capacidad de una base de datos de guardar los datos de forma duradera, de modo que no se pierdan cuando la aplicacin se cierra o el sistema se reinicia.\nPara LanceDB:\n-   Cuando se conecta a LanceDB, se especifica un directorio en el sistema de archivos:\n    `db = lancedb.connect(directorio_bd_lance)`\n    (ej. `directorio_bd_lance = "./lance_db_store_bge_m3"`)\n-   LanceDB almacena todas las tablas, datos (incluyendo los vectores) y metadatos dentro de este directorio en el disco.\n-   Esto significa que:\n    1.  Once que el script `007_crear_bd_lancedb_dof.py` termina de crear la base de datos y la tabla, los datos persisten en la carpeta especificada.\n    2.  Otros scripts (como `008_consultar_bd_lancedb_terminal.py` o `009_rag_dof_ollama_groq_deepseek.py`) pueden luego conectarse al mismo directorio para abrir y consultar la tabla existente sin necesidad de reconstruirla cada vez.\n    `db = lancedb.connect(directorio_bd)`\n    `table = db.open_table(nombre_de_la_tabla)`\n\nEsto es fundamental para cualquier aplicacin RAG, ya que la construccin de la base de datos de embeddings (especialmente para corpus grandes) puede ser un proceso que consume mucho tiempo y recursos, y solo necesita hacerse una vez (o peridicamente cuando los documentos fuente se actualizan).'}],sourceCode:`
import os
import re
import time
import lancedb
from lancedb.pydantic import LanceModel, Vector as LanceVector 
import ollama
import tiktoken
import numpy as np
from typing import List, Dict, Optional, Generator
import hashlib

MODELO_EMBEDDING_OLLAMA = "bge-m3" # INTERACTIVE_SEGMENT_TARGET: 007-ollama-model
DIMENSION_EMBEDDING = 1024 
CHUNK_SIZE_TOKENS = 1000 # INTERACTIVE_SEGMENT_TARGET: 007-chunk-size
CHUNK_OVERLAP_TOKENS = 150 # INTERACTIVE_SEGMENT_TARGET: 007-chunk-overlap
ENCODING_TIKTOKEN_CHUNKING = "cl100k_base"

def sanitizar_nombre(nombre: str, es_carpeta=False) -> str:
    # ... (funcin de sanitizacin)
    return nombre # Simplificado

def sanitizar_nombre_tabla_lancedb(nombre: str) -> str:
    # ... (funcin de sanitizacin para nombre de tabla)
    return nombre # Simplificado

def obtener_conteo_tokens_tiktoken(texto: str, encoding_nombre: str = ENCODING_TIKTOKEN_CHUNKING) -> int:
    # ... (funcin de conteo de tokens)
    try: return len(tiktoken.get_encoding(encoding_nombre).encode(texto))
    except: return len(texto.split())


def fragmentador_texto_con_traslape(texto_completo: str, # INTERACTIVE_SEGMENT_TARGET: 007-chunker-func
                                   chunk_size: int = CHUNK_SIZE_TOKENS,
                                   chunk_overlap: int = CHUNK_OVERLAP_TOKENS,
                                   encoding_nombre: str = ENCODING_TIKTOKEN_CHUNKING) -> Generator[str, None, None]:
    if not texto_completo.strip(): return
    try: encoding = tiktoken.get_encoding(encoding_nombre)
    except: return
    tokens_totales = encoding.encode(texto_completo)
    longitud_total_tokens = len(tokens_totales)
    if longitud_total_tokens == 0: return
    inicio = 0
    while inicio < longitud_total_tokens:
        fin = min(inicio + chunk_size, longitud_total_tokens)
        fragmento_tokens = tokens_totales[inicio:fin]
        fragmento_texto = encoding.decode(fragmento_tokens)
        if fragmento_texto.strip(): yield fragmento_texto.strip()
        if fin == longitud_total_tokens: break
        avance = chunk_size - chunk_overlap
        inicio += avance if avance > 0 else chunk_size 

def generar_id_fragmento(nombre_archivo: str, indice_fragmento: int) -> str:
    hash_nombre = hashlib.md5(nombre_archivo.encode()).hexdigest()[:8]
    return f"{hash_nombre}_frag_{indice_fragmento}"

def obtener_embedding_ollama_para_bd(texto: str, modelo: str = MODELO_EMBEDDING_OLLAMA) -> Optional[List[float]]: # INTERACTIVE_SEGMENT_TARGET: 007-get-embedding
    try:
        response = ollama.embeddings(model=modelo, prompt=texto)
        return response.get('embedding')
    except Exception as e:
        print(f"    Error al generar embedding con Ollama: {e}")
        return None

def crear_base_de_datos_lance(carpeta_documentos_txt: str,
                               nombre_tabla_lancedb: str,
                               directorio_bd_lance: str = "./lance_db"):
    if not os.path.isdir(directorio_bd_lance): os.makedirs(directorio_bd_lance)
    db = lancedb.connect(directorio_bd_lance) # INTERACTIVE_SEGMENT_TARGET: 007-lancedb-connect

    actual_dimension_usar = DIMENSION_EMBEDDING 
    test_embedding = obtener_embedding_ollama_para_bd("texto de prueba")
    if test_embedding: actual_dimension_usar = len(test_embedding)
    
    class DocumentoFragmento(LanceModel): # INTERACTIVE_SEGMENT_TARGET: 007-lancedb-schema
        id: str
        texto: str
        vector: LanceVector(actual_dimension_usar) 
        nombre_archivo_original: str
        indice_fragmento_en_doc: int

    try:
        tabla = db.create_table(nombre_tabla_lancedb, schema=DocumentoFragmento, mode="overwrite") # INTERACTIVE_SEGMENT_TARGET: 007-lancedb-create-table
    except Exception as e: return

    if not os.path.isdir(carpeta_documentos_txt): return
    datos_para_lote = [] 
    for nombre_archivo in sorted(os.listdir(carpeta_documentos_txt)):
        if nombre_archivo.endswith(".txt"):
            # ... (leer contenido del archivo)
            texto_documento_completo = "..." # Extrado
            if not texto_documento_completo: continue
            for i, fragmento_texto in enumerate(fragmentador_texto_con_traslape(texto_documento_completo)):
                embedding_vector = obtener_embedding_ollama_para_bd(fragmento_texto)
                if embedding_vector and len(embedding_vector) == actual_dimension_usar:
                    id_frag = generar_id_fragmento(nombre_archivo, i)
                    datos_para_lote.append({
                        "id": id_frag, "texto": fragmento_texto, "vector": embedding_vector,
                        "nombre_archivo_original": nombre_archivo, "indice_fragmento_en_doc": i
                    })
                time.sleep(0.02) 
            if len(datos_para_lote) >= 100: 
                if datos_para_lote: tabla.add(datos_para_lote); datos_para_lote = [] # INTERACTIVE_SEGMENT_TARGET: 007-lancedb-add-data
    if datos_para_lote: tabla.add(datos_para_lote)

    if tabla.count_rows() > 0:
        try:
            tabla.create_index(metric="cosine", replace=True) # INTERACTIVE_SEGMENT_TARGET: 007-lancedb-create-index
            print("ndice IVF_PQ creado.")
        except Exception as e_index:
            print(f"Error al crear ndice: {e_index}")
    print(f"Base de datos LanceDB guardada en: {directorio_bd_lance}")

if __name__ == "__main__":
    # ... (configuracin del script)
    # crear_base_de_datos_lance("carpeta_entrada", "nombre_tabla", "./lancedb_store")
    pass
`,interactiveSegments:[{id:"007-ollama-model",label:"Modelo de Embedding Ollama",matcher:/# INTERACTIVE_SEGMENT_TARGET: 007-ollama-model/,explanation:"Se define `bge-m3` como el modelo de embedding que se utilizar a travs de Ollama para convertir fragmentos de texto en vectores numricos.",relatedConceptIds:["007_crear_bd_lancedb_dof-concept-0","007_crear_bd_lancedb_dof-concept-1"]},{id:"007-chunk-size",label:"Tamao del Fragmento (Chunk)",matcher:/# INTERACTIVE_SEGMENT_TARGET: 007-chunk-size/,explanation:"`CHUNK_SIZE_TOKENS` (1000 tokens) define el tamao mximo de cada fragmento de texto que se generar a partir de los documentos originales.",relatedConceptIds:["007_crear_bd_lancedb_dof-concept-3"]},{id:"007-chunk-overlap",label:"Superposicin de Fragmentos",matcher:/# INTERACTIVE_SEGMENT_TARGET: 007-chunk-overlap/,explanation:"`CHUNK_OVERLAP_TOKENS` (150 tokens) especifica cuntos tokens del final de un fragmento se repetirn al inicio del siguiente para mantener el contexto semntico.",relatedConceptIds:["007_crear_bd_lancedb_dof-concept-3"]},{id:"007-chunker-func",label:"Funcin de Fragmentacin de Texto",matcher:/# INTERACTIVE_SEGMENT_TARGET: 007-chunker-func/,explanation:"La funcin `fragmentador_texto_con_traslape` es responsable de dividir el texto de los documentos en fragmentos ms pequeos, usando `tiktoken` y considerando el tamao del chunk y el overlap.",relatedConceptIds:["007_crear_bd_lancedb_dof-concept-3","005_generar_resumenes_dof-concept-3"]},{id:"007-get-embedding",label:"Obtener Embedding de Ollama",matcher:/# INTERACTIVE_SEGMENT_TARGET: 007-get-embedding/,explanation:"`obtener_embedding_ollama_para_bd` llama a `ollama.embeddings` para generar el vector de embedding para un fragmento de texto dado, usando el modelo `bge-m3`.",relatedConceptIds:["007_crear_bd_lancedb_dof-concept-0","007_crear_bd_lancedb_dof-concept-1"]},{id:"007-lancedb-connect",label:"Conectar a LanceDB",matcher:/# INTERACTIVE_SEGMENT_TARGET: 007-lancedb-connect/,explanation:"`lancedb.connect(directorio_bd_lance)` establece una conexin (o crea si no existe) con la base de datos LanceDB en el directorio especificado, donde se almacenarn los datos.",relatedConceptIds:["007_crear_bd_lancedb_dof-concept-2","007_crear_bd_lancedb_dof-concept-6"]},{id:"007-lancedb-schema",label:"Definir Esquema LanceDB",matcher:/# INTERACTIVE_SEGMENT_TARGET: 007-lancedb-schema/,explanation:"La clase `DocumentoFragmento(LanceModel)` define la estructura (esquema) de los datos que se guardarn en la tabla de LanceDB, incluyendo campos para ID, texto, el vector de embedding y metadatos.",relatedConceptIds:["007_crear_bd_lancedb_dof-concept-2","007_crear_bd_lancedb_dof-concept-4"]},{id:"007-lancedb-create-table",label:"Crear Tabla en LanceDB",matcher:/# INTERACTIVE_SEGMENT_TARGET: 007-lancedb-create-table/,explanation:'`db.create_table()` crea una nueva tabla en LanceDB con el nombre y esquema especificados. `mode="overwrite"` indica que si la tabla ya existe, ser reemplazada.',relatedConceptIds:["007_crear_bd_lancedb_dof-concept-2","007_crear_bd_lancedb_dof-concept-4"]},{id:"007-lancedb-add-data",label:"Aadir Datos a LanceDB",matcher:/# INTERACTIVE_SEGMENT_TARGET: 007-lancedb-add-data/,explanation:"`tabla.add(datos_para_lote)` inserta los datos de los fragmentos (incluyendo sus embeddings) en la tabla de LanceDB. Se hace en lotes para mayor eficiencia.",relatedConceptIds:["007_crear_bd_lancedb_dof-concept-2"]},{id:"007-lancedb-create-index",label:"Crear ndice Vectorial",matcher:/# INTERACTIVE_SEGMENT_TARGET: 007-lancedb-create-index/,explanation:'`tabla.create_index(metric="cosine")` construye un ndice vectorial (IVF_PQ por defecto) sobre la columna de vectores, utilizando la mtrica de distancia coseno. Esto acelera significativamente las bsquedas por similitud.',relatedConceptIds:["007_crear_bd_lancedb_dof-concept-2","007_crear_bd_lancedb_dof-concept-5"]}]},{id:"008_consultar_bd_lancedb_terminal",title:"008_consultar_bd_lancedb_terminal.py",generalPurpose:"Aplicacin de terminal para probar la recuperacin de LanceDB (solo embeddings).",detailedExplanation:`Proporciona una interfaz de lnea de comandos para interactuar con la base de datos
LanceDB. El usuario ingresa una pregunta, se genera su embedding con Ollama ('bge-m3'),
y se buscan los fragmentos ms similares en LanceDB. Muestra los fragmentos
recuperados y sus metadatos (incluyendo la distancia). Es una herramienta para
diagnosticar la calidad de la recuperacin antes de la generacin de respuesta.`,keyConcepts:[{id:"008_consultar_bd_lancedb_terminal-concept-0",name:"Bsqueda por Similitud Vectorial (Aplicada)",explanation:`La bsqueda por similitud vectorial es el ncleo de la fase de recuperacin en RAG y en muchos sistemas de bsqueda semntica.
Proceso:
1.  Vector de Consulta: La pregunta del usuario (o cualquier texto de consulta) se convierte primero en un vector de embedding usando el *mismo* modelo de embedding que se us para crear los vectores en la base de datos (en este caso, \`bge-m3\` va Ollama).
    \`pregunta_embedding = obtener_embedding_ollama_pregunta(pregunta_texto)\`
2.  Bsqueda en LanceDB:
    -   El vector de consulta se enva a la base de datos vectorial.
    -   \`results = table.search(query_vector_list).limit(k).to_list()\`
    -   LanceDB usa su ndice vectorial (ej. IVF_PQ) y la mtrica de distancia especificada (ej. coseno) para encontrar los \`k\` vectores en la tabla que son ms "cercanos" (ms similares) al vector de consulta.
3.  Resultados:
    -   La bsqueda devuelve una lista de los fragmentos ms similares.
    -   Cada resultado incluye:
        -   El vector del fragmento (generalmente no se muestra al usuario).
        -   Los metadatos almacenados con el vector (ej. el texto del fragmento, ID, nombre del archivo original, ndice del fragmento).
        -   Una puntuacin de distancia o similitud (\`_distance\` en LanceDB).

Este script implementa este proceso, permitiendo al usuario ingresar preguntas y ver los fragmentos de texto que LanceDB considera ms relevantes semnticamente.`},{id:"008_consultar_bd_lancedb_terminal-concept-1",name:"Interpretacin de Distancia/Similitud",explanation:`Cuando una base de datos vectorial devuelve resultados de una bsqueda por similitud, incluye una puntuacin que indica qu tan similar es cada resultado al vector de consulta.
Interpretacin:
-   Distancia Coseno (\`cosine\` en LanceDB, a menudo \`1 - similitud_coseno\`):
    -   Rango: 0 a 2.
    -   **Menor es mejor**: Un valor cercano a 0 significa que los vectores son muy similares (apuntan en la misma direccin). Un valor cercano a 1 significa que son ortogonales (no relacionados). Un valor cercano a 2 significa que son opuestos.
    -   Este es el valor que LanceDB devuelve en el campo \`_distance\` cuando la tabla se index con \`metric="cosine"\`.
-   Similitud Coseno Pura:
    -   Rango: -1 a 1.
    -   **Mayor es mejor**: Un valor cercano a 1 significa muy similares. Cercano a -1, muy opuestos. Cercano a 0, no relacionados.
-   Distancia Euclidiana (L2):
    -   Rango: 0 a infinito.
    -   **Menor es mejor**: Un valor de 0 significa que los vectores son idnticos. Cuanto mayor la distancia, menos similares.

En el script:
-   \`print(f"  Distancia (menor es mejor): {frag_info['_distance']:.4f}")\`
    -   Muestra el campo \`_distance\` devuelto por LanceDB. Como el ndice se cre con \`metric="cosine"\`, esta es la distancia coseno (1 - similitud).
-   Es importante saber qu mtrica se us para la indexacin para interpretar correctamente las puntuaciones. Los resultados de \`table.search()\` ya vienen ordenados por relevancia segn esta mtrica (los ms relevantes primero).

Umbrales (Thresholds):
-   A veces, se puede aplicar un umbral de distancia/similitud para filtrar resultados que no son lo suficientemente relevantes, aunque este script no lo hace y simplemente toma los \`k\` mejores.`},{id:"008_consultar_bd_lancedb_terminal-concept-2",name:"Fase de Recuperacin en RAG",explanation:`RAG (Retrieval Augmented Generation) es una arquitectura para LLMs que combina:
1.  Recuperacin (Retrieval): Encontrar informacin relevante de una base de conocimiento externa.
2.  Generacin (Generation): Usar un LLM para generar una respuesta basada en la pregunta del usuario Y la informacin recuperada.

Este script (\`008_consultar_bd_lancedb_terminal.py\`) se enfoca exclusivamente en la **Fase de Recuperacin**:
-   Base de Conocimiento: La base de datos LanceDB que contiene los embeddings de los fragmentos de los documentos del DOF.
-   Entrada: Una pregunta del usuario.
-   Proceso:
    a.  Convertir la pregunta del usuario en un embedding.
    b.  Buscar en LanceDB los fragmentos de texto cuyos embeddings son ms similares al embedding de la pregunta.
-   Salida: Una lista de los fragmentos de texto ms relevantes (y sus metadatos).

Por qu es importante la Recuperacin:
-   Proporciona al LLM (en la fase de generacin posterior, ej. script 009) contexto factual y especfico de la base de conocimiento.
-   Ayuda a reducir las "alucinaciones" del LLM (inventar informacin).
-   Permite que el LLM responda sobre datos que no estaban en su conjunto de entrenamiento original (ej. documentos recientes del DOF).
-   Permite citar fuentes.

La calidad de la fase de recuperacin es crtica para la calidad general de un sistema RAG. Si se recuperan fragmentos irrelevantes, el LLM probablemente generar una respuesta pobre o incorrecta.`},{id:"008_consultar_bd_lancedb_terminal-concept-3",name:"Desarrollo de CLI para Pruebas",explanation:`CLI (Command-Line Interface) o Interfaz de Lnea de Comandos es una forma de interactuar con un programa usando comandos de texto en una terminal o consola.
Para el Desarrollo y Pruebas:
-   Las CLIs son herramientas valiosas para probar componentes individuales de un sistema ms grande antes de integrarlos completamente o construir una interfaz grfica de usuario (GUI) compleja.
-   Permiten una interaccin rpida y directa con la lgica del backend.

Este script implementa una CLI simple para:
1.  Aceptar una pregunta del usuario: \`input("\\nIntroduce tu pregunta...")\`.
2.  Invocar la lgica de bsqueda en LanceDB: \`buscar_fragmentos_similares_lance(...)\`.
3.  Mostrar los resultados (fragmentos recuperados y sus metadatos) de forma legible en la terminal.
4.  Permitir al usuario hacer mltiples preguntas en un bucle \`while True:\`.
5.  Ofrecer una forma de salir (\`salir\`).

Beneficios de una CLI para este caso:
-   Diagnstico Rpido: Permite evaluar rpidamente la calidad de la recuperacin de LanceDB. Los fragmentos devueltos son relevantes para la pregunta? Son correctas las distancias?
-   Iteracin: Fcil probar diferentes tipos de preguntas y ver cmo responde el sistema de recuperacin.
-   Aislamiento: Prueba la fase de recuperacin independientemente de la fase de generacin del LLM, lo que ayuda a identificar dnde podran estar los problemas en un pipeline RAG completo.
-   Simplicidad: Ms rpido de desarrollar que una GUI completa para propsitos de prueba.

Es una prctica comn en el desarrollo de software crear pequeas herramientas CLI para probar y depurar mdulos o servicios.`}],sourceCode:`
import os
import re
import lancedb
import ollama 
import numpy as np
from sklearn.metrics.pairwise import cosine_similarity 
from typing import List, Dict, Optional

MODELO_EMBEDDING_OLLAMA = "bge-m3" 
DIMENSION_EMBEDDING = 1024 
NUM_FRAGMENTOS_A_RECUPERAR = 4 

def sanitizar_nombre(nombre: str, es_carpeta=False) -> str: 
    # ... (funcin de sanitizacin)
    return nombre # Simplificado

def obtener_embedding_ollama_pregunta(texto: str, modelo: str = MODELO_EMBEDDING_OLLAMA) -> Optional[np.ndarray]: # INTERACTIVE_SEGMENT_TARGET: 008-get-query-embedding
    try:
        response = ollama.embeddings(model=modelo, prompt=texto)
        embedding = response.get('embedding')
        if embedding: return np.array(embedding)
        return None
    except Exception as e:
        print(f"Error al generar embedding para la pregunta: {e}")
        return None

def buscar_fragmentos_similares_lance(db_path: str, table_name: str, pregunta_texto: str, k: int = NUM_FRAGMENTOS_A_RECUPERAR) -> List[Dict]: # INTERACTIVE_SEGMENT_TARGET: 008-search-lance-func
    try:
        db = lancedb.connect(db_path)
        table = db.open_table(table_name) # INTERACTIVE_SEGMENT_TARGET: 008-open-lance-table
    except Exception as e: return []

    pregunta_embedding = obtener_embedding_ollama_pregunta(pregunta_texto)
    if pregunta_embedding is None: return []

    try:
        query_vector_list = pregunta_embedding.tolist()
        results = table.search(query_vector_list).limit(k).to_list() # INTERACTIVE_SEGMENT_TARGET: 008-lance-search
        return results
    except Exception as e:
        print(f"Error durante la bsqueda en LanceDB: {e}")
        return []

if __name__ == "__main__":
    termino_busqueda_usado = "decreto" 
    script_dir = os.path.dirname(__file__) if "__file__" in locals() else "."
    directorio_bd = os.path.join(script_dir, "lancedb_store_bge_m3") 
    nombre_de_la_tabla = sanitizar_nombre(termino_busqueda_usado, es_carpeta=False) 

    # ... (verificacin inicial de la tabla)

    while True: # INTERACTIVE_SEGMENT_TARGET: 008-cli-loop
        pregunta_usuario = input("\\nIntroduce tu pregunta (o 'salir'):\\n> ")
        if pregunta_usuario.lower() == 'salir': break
        if not pregunta_usuario.strip(): continue

        fragmentos_recuperados = buscar_fragmentos_similares_lance(directorio_bd, nombre_de_la_tabla, pregunta_usuario)

        if fragmentos_recuperados:
            print("\\n--- Fragmentos Recuperados ---")
            for i, frag_info in enumerate(fragmentos_recuperados):
                # ... (imprimir detalles del fragmento)
                if '_distance' in frag_info: # INTERACTIVE_SEGMENT_TARGET: 008-show-distance
                    print(f"  Distancia (menor es mejor): {frag_info['_distance']:.4f}")
                # ...
            print("-----------------------------")
        else:
            print("No se encontraron fragmentos relevantes.")
    print("\\nSaliendo.")
`,interactiveSegments:[{id:"008-get-query-embedding",label:"Generar Embedding para Pregunta",matcher:/# INTERACTIVE_SEGMENT_TARGET: 008-get-query-embedding/,explanation:"La funcin `obtener_embedding_ollama_pregunta` toma el texto de la pregunta del usuario y utiliza Ollama con el modelo `bge-m3` para convertirla en un vector numrico (embedding).",relatedConceptIds:["007_crear_bd_lancedb_dof-concept-0","007_crear_bd_lancedb_dof-concept-1","008_consultar_bd_lancedb_terminal-concept-0"]},{id:"008-search-lance-func",label:"Funcin de Bsqueda en LanceDB",matcher:/# INTERACTIVE_SEGMENT_TARGET: 008-search-lance-func/,explanation:"`buscar_fragmentos_similares_lance` encapsula la lgica para conectar a LanceDB, generar el embedding de la pregunta y realizar la bsqueda por similitud.",relatedConceptIds:["008_consultar_bd_lancedb_terminal-concept-0","008_consultar_bd_lancedb_terminal-concept-2"]},{id:"008-open-lance-table",label:"Abrir Tabla LanceDB Existente",matcher:/# INTERACTIVE_SEGMENT_TARGET: 008-open-lance-table/,explanation:"`db.open_table(table_name)` accede a la tabla que fue creada y poblada por el script anterior (`007_crear_bd_lancedb_dof.py`). La persistencia de LanceDB es clave aqu.",relatedConceptIds:["007_crear_bd_lancedb_dof-concept-2","007_crear_bd_lancedb_dof-concept-6"]},{id:"008-lance-search",label:"Realizar Bsqueda por Similitud",matcher:/# INTERACTIVE_SEGMENT_TARGET: 008-lance-search/,explanation:"`table.search(query_vector_list).limit(k).to_list()` es el comando que ejecuta la bsqueda por similitud en LanceDB. Compara el `query_vector_list` (embedding de la pregunta) con los vectores en la tabla y devuelve los `k` ms similares.",relatedConceptIds:["008_consultar_bd_lancedb_terminal-concept-0","007_crear_bd_lancedb_dof-concept-5"]},{id:"008-cli-loop",label:"Bucle Principal de la CLI",matcher:/# INTERACTIVE_SEGMENT_TARGET: 008-cli-loop/,explanation:"Este bucle `while True` permite al usuario ingresar mltiples preguntas en la terminal. El programa espera una entrada, procesa la pregunta y muestra los resultados, hasta que el usuario escribe 'salir'.",relatedConceptIds:["008_consultar_bd_lancedb_terminal-concept-3"]},{id:"008-show-distance",label:"Mostrar Distancia de Similitud",matcher:/# INTERACTIVE_SEGMENT_TARGET: 008-show-distance/,explanation:"Para cada fragmento recuperado, se imprime el valor de `_distance`. En LanceDB con mtrica coseno, una distancia menor indica mayor similitud entre el fragmento y la pregunta.",relatedConceptIds:["008_consultar_bd_lancedb_terminal-concept-1"]}]},{id:"009_rag_dof_ollama_groq_deepseek",title:"009_rag_dof_ollama_groq_deepseek.py",generalPurpose:"Aplicacin RAG completa: recupera de LanceDB y genera respuesta con Groq (Deepseek).",detailedExplanation:`Script final que implementa el pipeline RAG completo. Una pregunta del usuario se
convierte en embedding (Ollama 'bge-m3') para buscar fragmentos relevantes en LanceDB.
Adicionalmente, recupera los resmenes pre-generados de los documentos fuente de esos
fragmentos. Resmenes y fragmentos forman un contexto enriquecido que se enva, junto
con la pregunta y un prompt de sistema, al LLM 'deepseek-r1-distill-llama-70b' va Groq
para generar una respuesta. Gestiona lmites de API de Groq y muestra el prompt
completo y los fragmentos fuente al usuario.`,keyConcepts:[{id:"009_rag_dof_ollama_groq_deepseek-concept-0",name:"Pipeline RAG Completo (Integracin)",explanation:"Este script integra los componentes previamente desarrollados en un pipeline de RAG (Retrieval Augmented Generation) completo:\n1.  Entrada del Usuario: Recibe una pregunta del usuario.\n2.  Fase de Recuperacin (Retrieval):\n    a.  Generacin de Embedding para la Pregunta: La pregunta se convierte en un vector de embedding usando Ollama con `bge-m3` (funcin `obtener_embedding_ollama_pregunta`).\n    b.  Bsqueda en Base de Datos Vectorial: Se buscan en LanceDB los fragmentos de documentos (`documentos_contexto`) cuyos embeddings son ms similares al embedding de la pregunta (funcin `buscar_fragmentos_similares_lance`).\n3.  Enriquecimiento del Contexto (Context Augmentation):\n    a.  Lectura de Resmenes: Para cada documento original de donde provienen los fragmentos recuperados, se intenta leer un resumen pre-generado (del script 005, funcin `leer_resumen_de_archivo`).\n    b.  Construccin del Contexto para el LLM: Se combinan los resmenes (si estn disponibles y son nicos por documento) y los textos de los fragmentos recuperados para formar una cadena de texto de contexto. Se aplican lmites de tokens a cada parte (`MAX_TOKENS_POR_RESUMEN_EN_CONTEXTO`, `MAX_TOKENS_POR_FRAGMENTO_EN_CONTEXTO`).\n4.  Fase de Generacin (Generation):\n    a.  Construccin del Prompt Completo: Se crea un prompt detallado que incluye:\n        i.  Instrucciones para el LLM (rol, cmo usar el contexto, qu hacer si la informacin no est).\n        ii. La pregunta original del usuario.\n        iii. El contexto enriquecido (resmenes y fragmentos).\n    b.  Llamada al LLM: Se enva este prompt completo a un LLM generativo (aqu, `deepseek-r1-distill-llama-70b` a travs de la API de Groq) para generar una respuesta (funcin `generar_respuesta_con_rag_groq`).\n    c.  Manejo de Lmites de API: Se gestionan los rate limits de Groq.\n5.  Salida: Se presenta la respuesta generada por el LLM al usuario, y opcionalmente, los fragmentos fuente.\n\nEste pipeline permite al LLM generar respuestas ms informadas y basadas en el contenido especfico de los documentos del DOF, en lugar de depender nicamente de su conocimiento general pre-entrenado."},{id:"009_rag_dof_ollama_groq_deepseek-concept-1",name:"Enriquecimiento del Contexto (Resmenes + Fragmentos)",explanation:`Para que el LLM genere la mejor respuesta posible en un sistema RAG, es crucial proporcionarle un contexto rico y relevante. Este script emplea una estrategia de enriquecimiento del contexto combinando dos tipos de informacin:
1.  Fragmentos Especficos Recuperados:
    -   Son los trozos de texto (chunks) directamente recuperados de LanceDB porque sus embeddings son muy similares al embedding de la pregunta del usuario.
    -   Proporcionan detalles precisos y pasajes exactos que probablemente contienen la respuesta.
    -   Limitacin: Pueden carecer de una visin general del documento del que provienen si la pregunta es ms amplia.
    -   En el script: \`texto_fragmento = doc.get('texto', '')\`.

2.  Resmenes de Documentos Fuente:
    -   Son los resmenes generados previamente por el script \`005_generar_resumenes_dof.py\` para cada documento completo del cual se extrajo un fragmento relevante.
    -   Se leen de la carpeta de resmenes: \`resumen_texto = leer_resumen_de_archivo(...)\`.
    -   Proporcionan una visin general del propsito y contenido principal de los documentos de donde provienen los fragmentos.
    -   Ayudan al LLM a entender el contexto ms amplio de los fragmentos especficos.
    -   Limitacin: Pueden omitir detalles especficos que estn en los fragmentos pero no en el resumen.

Combinacin:
-   El script primero intenta aadir los resmenes de los documentos fuente (asegurndose de no repetir resmenes si mltiples fragmentos vienen del mismo documento).
-   Luego, aade los fragmentos especficos.
-   Se aplican lmites de tokens a cada resumen y fragmento (\`MAX_TOKENS_POR_RESUMEN_EN_CONTEXTO\`, \`MAX_TOKENS_POR_FRAGMENTO_EN_CONTEXTO\`) para no exceder el lmite de contexto total del LLM generador.

Esta combinacin de resmenes (contexto general) y fragmentos (contexto especfico) tiene como objetivo dar al LLM una base de informacin ms completa para generar respuestas precisas y bien contextualizadas.`},{id:"009_rag_dof_ollama_groq_deepseek-concept-2",name:"Construccin Avanzada de Prompts para RAG",explanation:`El prompt enviado al LLM generativo en un sistema RAG es uno de los componentes ms crticos. Un buen prompt gua al LLM para que use el contexto proporcionado de manera efectiva y genere respuestas tiles.
Componentes de un Prompt RAG Avanzado (como el usado en \`generar_respuesta_con_rag_groq\`):
1.  Definicin del Rol (Role Setting):
    -   "Eres un asistente experto en responder preguntas sobre documentos del Diario Oficial de la Federacin (DOF) de Mxico."
    -   Esto ayuda al LLM a adoptar el tono y el conocimiento especializado adecuado.
2.  Instruccin Principal y Restriccin de Fuente (Grounding Instruction):
    -   "Tu respuesta debe basarse ESTRICTAMENTE en la informacin contenida en los siguientes resmenes y fragmentos de documentos proporcionados."
    -   Esto es crucial para evitar que el LLM use su conocimiento general (y potencialmente alucine) y lo obliga a basarse en la evidencia.
3.  Descripcin del Contexto Proporcionado:
    -   "Primero se presentan resmenes generales de los documentos relevantes, seguidos de fragmentos especficos."
    -   Ayuda al LLM a entender la estructura de la informacin que se le da.
4.  Instrucciones de Comportamiento y Formato:
    -   "S directo y factual."
5.  Manejo de Informacin Faltante (Fallback Instruction):
    -   "Si la informacin necesaria para responder la pregunta no est presente en los fragmentos, debes indicar claramente: 'La informacin especfica para responder a su pregunta no se encuentra en los fragmentos de documentos proporcionados.'"
    -   Esto previene que el LLM invente respuestas cuando el contexto no es suficiente.
6.  Prohibicin de Invencin:
    -   "No inventes informacin ni hagas suposiciones ms all del texto dado."
7.  Estructura Clara de Entrada:
    -   \`PREGUNTA DEL USUARIO:\\n{pregunta_usuario}\\n\\n\`
    -   \`CONTEXTO (RESMENES Y FRAGMENTOS DE DOCUMENTOS RELEVANTES):\\n{contexto_str}\\n\\n\`
    -   \`RESPUESTA (basada nicamente en el contexto anterior):\`
    -   El uso de delimitadores claros y etiquetas ayuda al LLM a parsear el prompt correctamente.

La iteracin y el refinamiento del prompt son clave para optimizar el rendimiento de un sistema RAG. El prompt de este script es un buen punto de partida, pero podra ajustarse an ms segn los resultados observados.`},{id:"009_rag_dof_ollama_groq_deepseek-concept-3",name:"Generacin de Respuestas Basadas en Evidencia",explanation:`Un objetivo fundamental de los sistemas RAG es asegurar que las respuestas generadas por el LLM estn firmemente ancladas en la informacin (evidencia) recuperada de la base de conocimiento. Esto contrasta con el uso de LLMs de forma aislada, donde pueden generar respuestas basadas en su entrenamiento general, que podra estar desactualizado o ser incorrecto para un dominio especfico.

Cmo se Promueve en el Script:
1.  Contexto Explcito: El LLM recibe la pregunta del usuario JUNTO CON los fragmentos y resmenes recuperados. Este contexto *es* la evidencia.
2.  Instrucciones en el Prompt: El prompt instruye explcitamente al LLM:
    -   "Tu respuesta debe basarse ESTRICTAMENTE en la informacin contenida en los siguientes resmenes y fragmentos..."
    -   "No inventes informacin ni hagas suposiciones ms all del texto dado."
3.  Manejo de Informacin Faltante: Si la evidencia no contiene la respuesta, se le indica al LLM que lo admita ("La informacin especfica... no se encuentra...").

Beneficios:
-   Mayor Precisin y Fiabilidad: Las respuestas son ms propensas a ser correctas y relevantes para el corpus documental especfico.
-   Reduccin de Alucinaciones: Al obligar al LLM a usar el contexto, se reduce la probabilidad de que invente hechos.
-   Transparencia y Verificabilidad (aunque no implementado completamente en la UI de este script): Idealmente, un sistema RAG tambin mostrara las fuentes (fragmentos) usadas para generar la respuesta, permitiendo al usuario verificar la informacin. Este script s muestra los fragmentos recuperados en la terminal despus de la respuesta del LLM.

El modelo LLM elegido (\`deepseek-r1-distill-llama-70b\` en este caso) tambin juega un papel; algunos modelos son mejores siguiendo instrucciones y mantenindose dentro del contexto proporcionado que otros.`},{id:"009_rag_dof_ollama_groq_deepseek-concept-4",name:"Presentacin de Fuentes al Usuario",explanation:`En un sistema RAG robusto y amigable para el usuario, no solo se proporciona la respuesta generada por el LLM, sino tambin las fuentes (los fragmentos de texto recuperados) que se usaron para construir esa respuesta.
Beneficios:
-   Transparencia: El usuario entiende de dnde proviene la informacin.
-   Verificabilidad: El usuario puede consultar los fragmentos originales para confirmar la exactitud de la respuesta o para obtener ms detalles.
-   Confianza: Aumenta la confianza del usuario en el sistema.
-   Exploracin Adicional: Permite al usuario profundizar en los documentos fuente si lo desea.

Implementacin en este Script (para la CLI):
-   Despus de que el LLM genera la respuesta y esta se muestra al usuario, el script imprime una seccin:
    \`"--- Fragmentos de Documentos Originales Usados para Contextualizar (base de la recuperacin) ---"\`
-   Luego, itera sobre \`fragmentos_recuperados\` y muestra para cada uno:
    -   ID del fragmento.
    -   Nombre del archivo original.
    -   ndice del fragmento en el documento.
    -   Distancia de similitud.
    -   Los primeros 250 caracteres del texto del fragmento.

En una Interfaz Grfica de Usuario (GUI):
-   Esto podra presentarse de forma ms interactiva, como enlaces a los documentos completos, la capacidad de expandir/colapsar fragmentos, o resaltar las partes del fragmento que el LLM us ms directamente (aunque esto ltimo es ms avanzado).

Aunque la "presentacin" aqu es a travs de la consola, el principio de mostrar las fuentes es un aspecto importante del diseo de sistemas RAG centrados en el usuario.`},{id:"009_rag_dof_ollama_groq_deepseek-concept-5",name:"Iteracin y Ajuste de Sistemas RAG",explanation:`Construir un sistema RAG efectivo raramente es un proceso de "una sola vez". Generalmente requiere mltiples ciclos de iteracin y ajuste para optimizar su rendimiento.
Aspectos Comunes a Iterar y Ajustar:
1.  Calidad de los Datos Fuente: Son los documentos originales limpios y bien estructurados?
2.  Estrategia de Fragmentacin (Chunking):
    -   Tamao del Chunk: Demasiado pequeo (pierde contexto)? Demasiado grande (diluye la informacin relevante, excede lmites)?
    -   Overlap: Es suficiente para mantener la coherencia?
3.  Modelo de Embedding:
    -   Diferentes modelos (\`bge-m3\`, \`text-embedding-ada-002\`, etc.) tienen diferentes fortalezas y debilidades. Probar varios puede ser necesario.
    -   La dimensionalidad es la adecuada?
4.  Base de Datos Vectorial y Parmetros de Bsqueda:
    -   El ndice est bien configurado?
    -   Nmero de Fragmentos a Recuperar (\`k\`): Recuperar muy pocos (pierde informacin)? Demasiados (introduce ruido y excede el contexto del LLM generador)?
    -   Umbrales de similitud para filtrar resultados.
5.  Modelo de Lenguaje Generativo (LLM):
    -   Elegir el LLM adecuado para la tarea y el presupuesto (ej. GPT-4, Llama, Deepseek, Mixtral).
    -   Parmetros de generacin: Temperatura (creatividad vs. factualidad), max_tokens para la respuesta.
6.  Ingeniera de Prompts:
    -   Refinar continuamente el prompt del sistema enviado al LLM generador para mejorar la calidad, factualidad y formato de las respuestas.
7.  Enriquecimiento del Contexto:
    -   Es til incluir resmenes adems de fragmentos? Se deberan incluir otros metadatos?
    -   Cmo se ordenan y presentan los fragmentos al LLM?
8.  Evaluacin:
    -   Definir mtricas para evaluar la calidad de la recuperacin y la generacin (ej. relevancia de los fragmentos, exactitud de la respuesta, cobertura).
    -   Usar conjuntos de preguntas y respuestas de prueba.

Este script representa una configuracin especfica del pipeline RAG. Para un sistema de produccin, se realizaran experimentos y ajustes en estos componentes para lograr el mejor rendimiento posible para el caso de uso especfico de consulta de documentos del DOF.`}],sourceCode:`
import os
import re
import time
import json
import numpy as np
import ollama
import lancedb
from groq import Groq
from dotenv import load_dotenv
from typing import List, Dict, Optional, Tuple
import tiktoken

load_dotenv()

MODELO_EMBEDDING_OLLAMA = "bge-m3" # INTERACTIVE_SEGMENT_TARGET: 009-ollama-model
MODELO_GENERACION_GROQ = "deepseek-r1-distill-llama-70b" # INTERACTIVE_SEGMENT_TARGET: 009-groq-model
GROQ_API_KEY = os.getenv("GROQ_API_KEY")
# ... (otras constantes)
NUM_DOCUMENTOS_RELEVANTES_K = 4

def obtener_embedding_ollama_pregunta(texto: str, modelo: str = MODELO_EMBEDDING_OLLAMA) -> Optional[np.ndarray]:
    # ... (funcin para obtener embedding de la pregunta)
    try:
        response = ollama.embeddings(model=modelo, prompt=texto)
        return np.array(response.get('embedding')) if response.get('embedding') else None
    except: return None

def buscar_fragmentos_similares_lance(db_path: str, table_name: str, pregunta_texto: str, k: int = NUM_DOCUMENTOS_RELEVANTES_K) -> List[Dict]: # INTERACTIVE_SEGMENT_TARGET: 009-retrieve-fragments
    # ... (funcin para buscar en LanceDB)
    try:
        db = lancedb.connect(db_path); table = db.open_table(table_name)
        pregunta_embedding = obtener_embedding_ollama_pregunta(pregunta_texto)
        if pregunta_embedding is None: return []
        return table.search(pregunta_embedding.tolist()).limit(k).to_list()
    except: return []


def leer_resumen_de_archivo(nombre_archivo_original_txt: str, carpeta_base_resumenes: str) -> Optional[str]: # INTERACTIVE_SEGMENT_TARGET: 009-read-summary
    nombre_archivo_resumen = nombre_archivo_original_txt.rsplit('.txt', 1)[0] + "_resumen.txt"
    ruta_archivo_resumen = os.path.join(carpeta_base_resumenes, nombre_archivo_resumen)
    if os.path.exists(ruta_archivo_resumen):
        try:
            with open(ruta_archivo_resumen, 'r', encoding='utf-8') as f_resumen:
                return f_resumen.read().strip()
        except: return None
    return None

def generar_respuesta_con_rag_groq(cliente_groq: Groq, pregunta_usuario: str, documentos_contexto: List[Dict[str, any]], carpeta_resumenes: str) -> Tuple[Optional[str], int]:
    tokens_prompt_final_enviados = 0
    if not documentos_contexto: return "No pude encontrar documentos relevantes.", 0
    
    contexto_str_parts = [] # INTERACTIVE_SEGMENT_TARGET: 009-build-context-start
    archivos_originales_ya_con_resumen = set()
    for doc in documentos_contexto: # Add summaries
        nombre_original = doc.get('nombre_archivo_original')
        if nombre_original and nombre_original not in archivos_originales_ya_con_resumen:
            resumen_texto = leer_resumen_de_archivo(nombre_original, carpeta_resumenes)
            if resumen_texto:
                # ... (truncar resumen si es necesario)
                contexto_str_parts.append(f"Resumen del documento '{nombre_original}':\\n{resumen_texto}")
                archivos_originales_ya_con_resumen.add(nombre_original)
    
    if contexto_str_parts: contexto_str_parts.append("\\n--- Detalles de Fragmentos Especficos ---")
    for doc_idx, doc in enumerate(documentos_contexto): # Add specific fragments
        texto_fragmento = doc.get('texto', '')
        # ... (truncar fragmento si es necesario)
        contexto_str_parts.append(f"Fragmento {doc_idx+1} (de '{doc.get('nombre_archivo_original', 'N/A')}'):\\n{texto_fragmento}")
    contexto_str = "\\n\\n".join(contexto_str_parts) # INTERACTIVE_SEGMENT_TARGET: 009-build-context-end

    prompt_completo = ( # INTERACTIVE_SEGMENT_TARGET: 009-full-rag-prompt
        "Eres un asistente experto en responder preguntas sobre documentos del Diario Oficial de la Federacin (DOF) de Mxico. "
        "Tu respuesta debe basarse ESTRICTAMENTE en la informacin contenida en los siguientes resmenes y fragmentos de documentos proporcionados. "
        # ... (ms instrucciones del prompt)
        "Si la informacin necesaria no est en los fragmentos, indica: 'La informacin especfica no se encuentra en los documentos proporcionados.' "
        "No inventes informacin.\\n\\n"
        f"PREGUNTA DEL USUARIO:\\n{pregunta_usuario}\\n\\n"
        "CONTEXTO (RESMENES Y FRAGMENTOS RELEVANTES):\\n"
        f"{contexto_str}\\n\\n"
        "RESPUESTA (basada nicamente en el contexto anterior):"
    )
    # ... (contar tokens, verificar lmites de API Groq)

    try:
        # ... (verificar_y_esperar_limites_groq)
        stream = cliente_groq.chat.completions.create( # INTERACTIVE_SEGMENT_TARGET: 009-groq-generate-call
            model=MODELO_GENERACION_GROQ,
            messages=[{"role": "user", "content": prompt_completo}],
            # ... (otros parmetros de generacin: temperature, max_tokens)
            stream=True 
        )
        respuesta_llm = "".join([chunk.choices[0].delta.content or "" for chunk in stream])
        # ... (actualizar contadores de API)
        return respuesta_llm.strip(), tokens_prompt_final_enviados
    except Exception as e:
        # ... (manejo de errores y reintentos)
        return "Error con API Groq.", tokens_prompt_final_enviados
    # return "No se pudo obtener respuesta.", tokens_prompt_final_enviados


if __name__ == "__main__":
    if not GROQ_API_KEY: print("Error: GROQ_API_KEY no configurada."); exit()
    cliente_groq_main = Groq()
    # ... (configuracin de rutas y nombres de tabla)
    
    while True:
        pregunta_usuario = input("\\nIntroduce tu pregunta (o 'salir'):\\n> ")
        if pregunta_usuario.lower() == 'salir': break
        if not pregunta_usuario.strip(): continue
        
        # 1. Recuperacin
        fragmentos_recuperados = buscar_fragmentos_similares_lance(directorio_bd, nombre_de_la_tabla, pregunta_usuario)
        
        respuesta_llm_texto = "No se proces."
        if fragmentos_recuperados:
            # 2. Generacin
            respuesta_llm_texto, _ = generar_respuesta_con_rag_groq( # INTERACTIVE_SEGMENT_TARGET: 009-call-rag-generation
                cliente_groq_main, pregunta_usuario, fragmentos_recuperados, ruta_carpeta_resumenes_completa
            )
        else:
            respuesta_llm_texto = "No se encontraron fragmentos relevantes."
        
        print("\\nRespuesta del Asistente RAG:") # INTERACTIVE_SEGMENT_TARGET: 009-display-response
        print(respuesta_llm_texto)
        
        if fragmentos_recuperados: # INTERACTIVE_SEGMENT_TARGET: 009-display-sources
            print("\\n--- Fragmentos Usados para Contextualizar ---")
            # ... (imprimir detalles de los fragmentos fuente)
        # ... (pausa)
`,interactiveSegments:[{id:"009-ollama-model",label:"Modelo de Embedding (Ollama)",matcher:/# INTERACTIVE_SEGMENT_TARGET: 009-ollama-model/,explanation:"Se especifica `bge-m3` como el modelo a usar con Ollama para generar los embeddings de las preguntas del usuario. Debe ser el mismo que se us para crear la base de datos vectorial.",relatedConceptIds:["007_crear_bd_lancedb_dof-concept-0","007_crear_bd_lancedb_dof-concept-1"]},{id:"009-groq-model",label:"Modelo de Generacin (Groq)",matcher:/# INTERACTIVE_SEGMENT_TARGET: 009-groq-model/,explanation:"Se define `deepseek-r1-distill-llama-70b` como el modelo LLM que se usar a travs de la API de Groq para generar la respuesta final, basndose en el contexto recuperado.",relatedConceptIds:["005_generar_resumenes_dof-concept-0","005_generar_resumenes_dof-concept-1"]},{id:"009-retrieve-fragments",label:"Recuperar Fragmentos de LanceDB",matcher:/# INTERACTIVE_SEGMENT_TARGET: 009-retrieve-fragments/,explanation:"La funcin `buscar_fragmentos_similares_lance` se llama para convertir la pregunta del usuario en un embedding y luego buscar los fragmentos ms similares en la base de datos LanceDB.",relatedConceptIds:["008_consultar_bd_lancedb_terminal-concept-0","008_consultar_bd_lancedb_terminal-concept-2"]},{id:"009-read-summary",label:"Leer Resumen de Archivo",matcher:/# INTERACTIVE_SEGMENT_TARGET: 009-read-summary/,explanation:"`leer_resumen_de_archivo` intenta cargar un resumen pre-generado (del script 005) para el documento original de donde proviene un fragmento recuperado. Esto enriquece el contexto.",relatedConceptIds:["009_rag_dof_ollama_groq_deepseek-concept-1"]},{id:"009-build-context-start",label:"Inicio de Construccin de Contexto",matcher:/# INTERACTIVE_SEGMENT_TARGET: 009-build-context-start/,explanation:"Aqu comienza la lgica para ensamblar el contexto que se enviar al LLM. Se inicializa `contexto_str_parts` para acumular resmenes y fragmentos.",relatedConceptIds:["009_rag_dof_ollama_groq_deepseek-concept-1"]},{id:"009-build-context-end",label:"Finalizacin de Construccin de Contexto",matcher:/# INTERACTIVE_SEGMENT_TARGET: 009-build-context-end/,explanation:"Los resmenes y fragmentos recolectados se unen en una sola cadena `contexto_str`, listos para ser insertados en el prompt principal.",relatedConceptIds:["009_rag_dof_ollama_groq_deepseek-concept-1"]},{id:"009-full-rag-prompt",label:"Prompt Completo para RAG",matcher:/# INTERACTIVE_SEGMENT_TARGET: 009-full-rag-prompt/,explanation:"Este es el prompt completo que se enva al LLM de Groq. Contiene instrucciones, la pregunta del usuario y el contexto enriquecido (resmenes y fragmentos recuperados).",relatedConceptIds:["009_rag_dof_ollama_groq_deepseek-concept-0","009_rag_dof_ollama_groq_deepseek-concept-2","005_generar_resumenes_dof-concept-2"]},{id:"009-groq-generate-call",label:"Llamada a Groq para Generacin",matcher:/# INTERACTIVE_SEGMENT_TARGET: 009-groq-generate-call/,explanation:"`cliente_groq.chat.completions.create()` enva el prompt completo al modelo de Groq para generar la respuesta final al usuario.",relatedConceptIds:["005_generar_resumenes_dof-concept-1","009_rag_dof_ollama_groq_deepseek-concept-3"]},{id:"009-call-rag-generation",label:"Invocar Funcin de Generacin RAG",matcher:/# INTERACTIVE_SEGMENT_TARGET: 009-call-rag-generation/,explanation:"Se llama a la funcin `generar_respuesta_con_rag_groq`, pasando el cliente de Groq, la pregunta, los fragmentos recuperados y la ruta a los resmenes, para obtener la respuesta final del LLM.",relatedConceptIds:["009_rag_dof_ollama_groq_deepseek-concept-0"]},{id:"009-display-response",label:"Mostrar Respuesta del Asistente",matcher:/# INTERACTIVE_SEGMENT_TARGET: 009-display-response/,explanation:"La respuesta generada por el LLM se imprime en la consola para el usuario.",relatedConceptIds:["009_rag_dof_ollama_groq_deepseek-concept-3"]},{id:"009-display-sources",label:"Mostrar Fragmentos Fuente",matcher:/# INTERACTIVE_SEGMENT_TARGET: 009-display-sources/,explanation:"Despus de la respuesta, se muestran los detalles de los fragmentos que se recuperaron de LanceDB y se usaron para construir el contexto. Esto proporciona transparencia sobre las fuentes.",relatedConceptIds:["009_rag_dof_ollama_groq_deepseek-concept-4"]}]}],B_=({scripts:x,selectedScriptId:s,onSelectScript:c})=>z.jsxs("aside",{className:"w-64 md:w-72 bg-slate-950 p-5 border-r border-slate-700 shadow-2xl overflow-y-auto",children:[z.jsx("h2",{className:"text-2xl font-semibold text-sky-400 mb-6 border-b border-sky-500/30 pb-3",children:"Scripts del Proyecto"}),z.jsx("nav",{children:z.jsx("ul",{children:x.map(o=>z.jsx("li",{className:"mb-2",children:z.jsx("button",{onClick:()=>c(o.id),className:`
                  w-full text-left px-4 py-3 rounded-md text-sm font-medium transition-all duration-150 ease-in-out
                  focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-opacity-75
                  ${s===o.id?"bg-sky-500 text-white shadow-md transform scale-105":"text-slate-300 hover:bg-slate-700/50 hover:text-sky-300"}
                `,children:o.title})},o.id))})})]}),H_=["def","class","if","else","elif","for","while","return","import","from","with","as","try","except","finally","print","True","False","None","in","is","not","and","or","lambda","yield","global","nonlocal","pass","break","continue","assert","async","await","del","raise","self"],Y_=x=>{let s=x;return s=s.replace(/</g,"&lt;").replace(/>/g,"&gt;"),s=s.replace(/(#.*$)/gm,'<span class="text-green-400">$1</span>'),s=s.replace(/(""".*?"""|'''.*?''')/gs,c=>c.includes('<span class="text-green-400">')?c:`<span class="text-amber-400">${c}</span>`),s=s.replace(/(".*?"|'.*?')/g,c=>c.includes('<span class="text-green-400">')||c.includes('<span class="text-amber-400">')?c:`<span class="text-amber-400">${c}</span>`),H_.forEach(c=>{const o=new RegExp(`\\b${c}\\b`,"g");s=s.replace(o,(u,f,m)=>{var h,b;const S=m.substring(0,f);return(((h=S.match(/<span/g))==null?void 0:h.length)||0)>(((b=S.match(/<\/span>/g))==null?void 0:b.length)||0)?u:c==="self"?`<span class="text-red-400 font-medium">${u}</span>`:`<span class="text-sky-400 font-semibold">${u}</span>`})}),s=s.replace(/\b(\d+\.?\d*)\b/g,(c,o,u,f)=>{var S,h;const m=f.substring(0,u);return(((S=m.match(/<span/g))==null?void 0:S.length)||0)>(((h=m.match(/<\/span>/g))==null?void 0:h.length)||0)?c:`<span class="text-purple-400">${c}</span>`}),s=s.replace(/\b(def|class)\s+([a-zA-Z_][\w_]*)/g,(c,o,u,f,m)=>{var h,b;const S=m.substring(0,f);return(((h=S.match(/<span/g))==null?void 0:h.length)||0)>(((b=S.match(/<\/span>/g))==null?void 0:b.length)||0)?c:`<span class="text-sky-400 font-semibold">${o}</span> <span class="text-emerald-400 font-semibold">${u}</span>`}),s},X_=({selectedColor:x,onColorChange:s,onClear:c})=>{const o=[{name:"Amarillo",value:"#FACC15"},{name:"Rojo",value:"#F87171"},{name:"Azul",value:"#60A5FA"},{name:"Blanco",value:"#FFFFFF"}];return z.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-slate-800/70 rounded-md mb-2",children:[z.jsx("span",{className:"text-xs text-slate-300 mr-2",children:"Color:"}),o.map(u=>z.jsx("button",{title:u.name,onClick:()=>s(u.value),className:`w-6 h-6 rounded-full border-2 transition-all ${x===u.value?"border-white ring-2 ring-offset-1 ring-offset-slate-800 ring-white":"border-transparent hover:border-slate-400"}`,style:{backgroundColor:u.value}},u.value)),z.jsx("button",{onClick:c,className:"ml-auto bg-slate-600 hover:bg-red-500 text-white text-xs px-3 py-1 rounded-md transition-colors",children:"Borrar Dibujo"})]})},Q_=({code:x,language:s,interactiveSegments:c,onSelectCodeSegment:o,interactiveSegmentsEnabled:u})=>{const m=x.trimEnd().split("\\n"),S=Ue.useRef(null),h=Ue.useRef(null),[b,R]=Ue.useState(!1),[G,j]=Ue.useState("#FACC15"),[V,U]=Ue.useState([]),ne=Ue.useRef(null),ce=Ue.useCallback(Z=>{const te=h.current;te&&(Z.clearRect(0,0,te.width,te.height),V.forEach(J=>{if(Z.beginPath(),Z.strokeStyle=J.color,Z.lineWidth=J.lineWidth,Z.lineCap="round",Z.lineJoin="round",J.points.length>0){Z.moveTo(J.points[0].x,J.points[0].y);for(let Se=1;Se<J.points.length;Se++)Z.lineTo(J.points[Se].x,J.points[Se].y);Z.stroke()}}))},[V]),He=Ue.useCallback(()=>{if(h.current&&S.current){const Z=h.current;Z.width=S.current.scrollWidth,Z.height=S.current.scrollHeight;const te=Z.getContext("2d");te&&ce(te)}},[ce]);Ue.useEffect(()=>(He(),window.addEventListener("resize",He),()=>window.removeEventListener("resize",He)),[x,He]);const je=Z=>{const te=h.current,J=S.current;if(!te||!J)return null;const Se=te.getBoundingClientRect();return{x:Z.clientX-Se.left+J.scrollLeft,y:Z.clientY-Se.top+J.scrollTop}},Ne=Ue.useCallback(Z=>{if(u)return;const te=je(Z);te&&(R(!0),ne.current={points:[te],color:G,lineWidth:2},U(J=>[...J,ne.current]))},[u,G,je]),Ye=Ue.useCallback(Z=>{if(!b||u||!ne.current)return;const te=h.current;if(!te)return;const J=te.getContext("2d");if(!J)return;const Se=je(Z);if(!Se)return;ne.current.points.push(Se),J.beginPath(),J.strokeStyle=ne.current.color,J.lineWidth=ne.current.lineWidth,J.lineCap="round",J.lineJoin="round";const ie=ne.current.points;ie.length>1?(J.moveTo(ie[ie.length-2].x,ie[ie.length-2].y),J.lineTo(ie[ie.length-1].x,ie[ie.length-1].y),J.stroke()):ie.length===1&&(J.fillStyle=ne.current.color,J.arc(ie[0].x,ie[0].y,ne.current.lineWidth/2,0,Math.PI*2),J.fill())},[b,u,je]),$=Ue.useCallback(()=>{if(b){R(!1),ne.current=null;const Z=h.current;if(Z){const te=Z.getContext("2d");te&&ce(te)}}},[b,ce]),Pe=Ue.useCallback(()=>{U([]);const Z=h.current;if(Z){const te=Z.getContext("2d");te&&te.clearRect(0,0,Z.width,Z.height)}},[]),Je=(Z,te)=>{const J=u&&(c==null?void 0:c.find(Ga=>Ga.matcher.test(Z))),Se=Y_(Z),ie={};let Ra="py-0.5 px-2 -mx-2 transition-colors duration-150";return u?J&&o&&(Ra+=" cursor-pointer hover:bg-sky-700/30 rounded relative z-10"):ie.pointerEvents="none",z.jsx("div",{className:Ra,style:ie,onClick:J&&o&&u?()=>o(J):void 0,title:J&&u?`Clic para ver: ${J.label}`:void 0,dangerouslySetInnerHTML:{__html:Se||"&nbsp;"}},te)};return z.jsxs("div",{className:"bg-slate-950 rounded-lg shadow-inner overflow-hidden",children:[z.jsxs("div",{className:"px-4 py-2 bg-slate-800/50 border-b border-slate-700 flex justify-between items-center",children:[z.jsx("span",{className:"text-xs text-slate-400 font-mono uppercase",children:s}),u&&c&&c.length>0&&z.jsx("span",{className:"text-xs text-sky-400 font-mono",children:"Explicaciones Interactivas: Pase el cursor y haga clic."}),!u&&z.jsx("span",{className:"text-xs text-yellow-400 font-mono",children:"Modo Dibujo: Garabatea sobre el cdigo!"})]}),!u&&z.jsx(X_,{selectedColor:G,onColorChange:j,onClear:Pe}),z.jsxs("div",{className:"relative",children:[z.jsx("pre",{ref:S,className:"p-4 text-sm text-slate-200 overflow-auto whitespace-pre font-mono",style:{WebkitOverflowScrolling:"touch"},children:z.jsx("code",{className:"block min-w-max",children:m.map((Z,te)=>Je(Z,te))})}),z.jsx("canvas",{ref:h,onMouseDown:Ne,onMouseMove:Ye,onMouseUp:$,onMouseOut:$,className:"absolute top-0 left-0 cursor-crosshair",style:{pointerEvents:u?"none":"auto",zIndex:u?0:20}})]})]})},Z_=x=>z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...x,children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),K_=x=>z.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...x,children:[z.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm0-2a6 6 0 100-12 6 6 0 000 12zm-4-1h8a1 1 0 000-2H6a1 1 0 000 2zM5 10a1 1 0 011-1h3a1 1 0 110 2H6a1 1 0 01-1-1z",clipRule:"evenodd"}),z.jsx("circle",{cx:"7",cy:"10",r:"3"})]}),P_=x=>z.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...x,children:[z.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm0-2a6 6 0 100-12 6 6 0 000 12zm-4-1h8a1 1 0 000-2H6a1 1 0 000 2zM10 10a1 1 0 011-1h3a1 1 0 110 2h-3a1 1 0 01-1-1z",clipRule:"evenodd"}),z.jsx("circle",{cx:"13",cy:"10",r:"3"})]}),Ji=({title:x,children:s,actions:c})=>z.jsxs("section",{className:"mb-8 p-6 bg-slate-800 rounded-lg shadow-lg hover:shadow-sky-500/20 transition-shadow duration-300",children:[z.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-sky-500/30 pb-2",children:[z.jsx("h3",{className:"text-2xl font-semibold text-sky-400",children:x}),c&&z.jsx("div",{className:"flex items-center space-x-2",children:c})]}),z.jsx("div",{className:"text-slate-300 leading-relaxed prose prose-sm prose-invert max-w-none",children:s})]}),J_=({script:x,onSelectConcept:s,onSelectCodeSegment:c,interactiveSegmentsEnabled:o,onToggleInteractiveSegments:u})=>{const f=z.jsxs("div",{className:"flex items-center space-x-3",children:[z.jsx("span",{className:"text-xs text-slate-400",children:o?"Explicaciones Interactivas:":"Modo Dibujo:"}),z.jsx("button",{onClick:u,className:`p-1 rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 ${o?"bg-sky-500 hover:bg-sky-600 focus:ring-sky-400":"bg-slate-600 hover:bg-slate-500 focus:ring-slate-400"}`,"aria-label":o?"Desactivar explicaciones interactivas y activar modo dibujo":"Activar explicaciones interactivas y desactivar modo dibujo",children:o?z.jsx(P_,{className:"w-8 h-4 text-white"}):z.jsx(K_,{className:"w-8 h-4 text-white"})})]});return z.jsxs("div",{className:"animate-fadeIn",children:[z.jsx("header",{className:"mb-8 p-6 bg-gradient-to-r from-sky-600 to-cyan-500 rounded-lg shadow-xl",children:z.jsx("h2",{className:"text-4xl font-bold text-white mb-2",children:x.title})}),z.jsx(Ji,{title:"Propsito General",children:z.jsx("p",{className:"whitespace-pre-wrap",children:x.generalPurpose})}),z.jsx(Ji,{title:"Explicacin Detallada",children:z.jsx("p",{className:"whitespace-pre-wrap",children:x.detailedExplanation})}),z.jsxs(Ji,{title:"Conceptos Clave a Desarrollar",children:[z.jsx("ul",{className:"list-none p-0 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:x.keyConcepts.map(m=>z.jsx("li",{className:"m-0 p-0",children:z.jsx("button",{onClick:()=>s(m),className:"w-full text-left bg-slate-700/50 hover:bg-sky-600/70 text-sky-300 hover:text-white p-3 rounded-md transition-all duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-sky-500",children:m.name})},m.id))}),z.jsx("p",{className:"mt-4 text-xs text-slate-400",children:"Haz clic en un concepto para ver ms detalles."})]}),z.jsx(Ji,{title:"Cdigo Fuente",actions:f,children:z.jsx(Q_,{code:x.sourceCode,language:"python",interactiveSegments:x.interactiveSegments,onSelectCodeSegment:c,interactiveSegmentsEnabled:o})})]})};function Ns(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Bt=Ns();function Qf(x){Bt=x}const Zf=/[&<>"']/,$_=new RegExp(Zf.source,"g"),Kf=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,F_=new RegExp(Kf.source,"g"),W_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},If=x=>W_[x];function pa(x,s){if(s){if(Zf.test(x))return x.replace($_,If)}else if(Kf.test(x))return x.replace(F_,If);return x}const eg=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function ag(x){return x.replace(eg,(s,c)=>(c=c.toLowerCase(),c==="colon"?":":c.charAt(0)==="#"?c.charAt(1)==="x"?String.fromCharCode(parseInt(c.substring(2),16)):String.fromCharCode(+c.substring(1)):""))}const tg=/(^|[^\[])\^/g;function ge(x,s){let c=typeof x=="string"?x:x.source;s=s||"";const o={replace:(u,f)=>{let m=typeof f=="string"?f:f.source;return m=m.replace(tg,"$1"),c=c.replace(u,m),o},getRegex:()=>new RegExp(c,s)};return o}function Vf(x){try{x=encodeURI(x).replace(/%25/g,"%")}catch{return null}return x}const ql={exec:()=>null};function Bf(x,s){const c=x.replace(/\|/g,(f,m,S)=>{let h=!1,b=m;for(;--b>=0&&S[b]==="\\";)h=!h;return h?"|":" |"}),o=c.split(/ \|/);let u=0;if(o[0].trim()||o.shift(),o.length>0&&!o[o.length-1].trim()&&o.pop(),s)if(o.length>s)o.splice(s);else for(;o.length<s;)o.push("");for(;u<o.length;u++)o[u]=o[u].trim().replace(/\\\|/g,"|");return o}function Cl(x,s,c){const o=x.length;if(o===0)return"";let u=0;for(;u<o&&x.charAt(o-u-1)===s;)u++;return x.slice(0,o-u)}function ng(x,s){if(x.indexOf(s[1])===-1)return-1;let c=0;for(let o=0;o<x.length;o++)if(x[o]==="\\")o++;else if(x[o]===s[0])c++;else if(x[o]===s[1]&&(c--,c<0))return o;return-1}function Hf(x,s,c,o){const u=s.href,f=s.title?pa(s.title):null,m=x[1].replace(/\\([\[\]])/g,"$1");if(x[0].charAt(0)!=="!"){o.state.inLink=!0;const S={type:"link",raw:c,href:u,title:f,text:m,tokens:o.inlineTokens(m)};return o.state.inLink=!1,S}return{type:"image",raw:c,href:u,title:f,text:pa(m)}}function lg(x,s){const c=x.match(/^(\s+)(?:```)/);if(c===null)return s;const o=c[1];return s.split(`
`).map(u=>{const f=u.match(/^\s+/);if(f===null)return u;const[m]=f;return m.length>=o.length?u.slice(o.length):u}).join(`
`)}class Fi{constructor(s){Ee(this,"options");Ee(this,"rules");Ee(this,"lexer");this.options=s||Bt}space(s){const c=this.rules.block.newline.exec(s);if(c&&c[0].length>0)return{type:"space",raw:c[0]}}code(s){const c=this.rules.block.code.exec(s);if(c){const o=c[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:c[0],codeBlockStyle:"indented",text:this.options.pedantic?o:Cl(o,`
`)}}}fences(s){const c=this.rules.block.fences.exec(s);if(c){const o=c[0],u=lg(o,c[3]||"");return{type:"code",raw:o,lang:c[2]?c[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):c[2],text:u}}}heading(s){const c=this.rules.block.heading.exec(s);if(c){let o=c[2].trim();if(/#$/.test(o)){const u=Cl(o,"#");(this.options.pedantic||!u||/ $/.test(u))&&(o=u.trim())}return{type:"heading",raw:c[0],depth:c[1].length,text:o,tokens:this.lexer.inline(o)}}}hr(s){const c=this.rules.block.hr.exec(s);if(c)return{type:"hr",raw:Cl(c[0],`
`)}}blockquote(s){const c=this.rules.block.blockquote.exec(s);if(c){let o=Cl(c[0],`
`).split(`
`),u="",f="";const m=[];for(;o.length>0;){let S=!1;const h=[];let b;for(b=0;b<o.length;b++)if(/^ {0,3}>/.test(o[b]))h.push(o[b]),S=!0;else if(!S)h.push(o[b]);else break;o=o.slice(b);const R=h.join(`
`),G=R.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");u=u?`${u}
${R}`:R,f=f?`${f}
${G}`:G;const j=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(G,m,!0),this.lexer.state.top=j,o.length===0)break;const V=m[m.length-1];if((V==null?void 0:V.type)==="code")break;if((V==null?void 0:V.type)==="blockquote"){const U=V,ne=U.raw+`
`+o.join(`
`),ce=this.blockquote(ne);m[m.length-1]=ce,u=u.substring(0,u.length-U.raw.length)+ce.raw,f=f.substring(0,f.length-U.text.length)+ce.text;break}else if((V==null?void 0:V.type)==="list"){const U=V,ne=U.raw+`
`+o.join(`
`),ce=this.list(ne);m[m.length-1]=ce,u=u.substring(0,u.length-V.raw.length)+ce.raw,f=f.substring(0,f.length-U.raw.length)+ce.raw,o=ne.substring(m[m.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:u,tokens:m,text:f}}}list(s){let c=this.rules.block.list.exec(s);if(c){let o=c[1].trim();const u=o.length>1,f={type:"list",raw:"",ordered:u,start:u?+o.slice(0,-1):"",loose:!1,items:[]};o=u?`\\d{1,9}\\${o.slice(-1)}`:`\\${o}`,this.options.pedantic&&(o=u?o:"[*+-]");const m=new RegExp(`^( {0,3}${o})((?:[  ][^\\n]*)?(?:\\n|$))`);let S=!1;for(;s;){let h=!1,b="",R="";if(!(c=m.exec(s))||this.rules.block.hr.test(s))break;b=c[0],s=s.substring(b.length);let G=c[2].split(`
`,1)[0].replace(/^\t+/,He=>" ".repeat(3*He.length)),j=s.split(`
`,1)[0],V=!G.trim(),U=0;if(this.options.pedantic?(U=2,R=G.trimStart()):V?U=c[1].length+1:(U=c[2].search(/[^ ]/),U=U>4?1:U,R=G.slice(U),U+=c[1].length),V&&/^ *$/.test(j)&&(b+=j+`
`,s=s.substring(j.length+1),h=!0),!h){const He=new RegExp(`^ {0,${Math.min(3,U-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[  ][^\\n]*)?(?:\\n|$))`),je=new RegExp(`^ {0,${Math.min(3,U-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),Ne=new RegExp(`^ {0,${Math.min(3,U-1)}}(?:\`\`\`|~~~)`),Ye=new RegExp(`^ {0,${Math.min(3,U-1)}}#`);for(;s;){const $=s.split(`
`,1)[0];if(j=$,this.options.pedantic&&(j=j.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),Ne.test(j)||Ye.test(j)||He.test(j)||je.test(s))break;if(j.search(/[^ ]/)>=U||!j.trim())R+=`
`+j.slice(U);else{if(V||G.search(/[^ ]/)>=4||Ne.test(G)||Ye.test(G)||je.test(G))break;R+=`
`+j}!V&&!j.trim()&&(V=!0),b+=$+`
`,s=s.substring($.length+1),G=j.slice(U)}}f.loose||(S?f.loose=!0:/\n *\n *$/.test(b)&&(S=!0));let ne=null,ce;this.options.gfm&&(ne=/^\[[ xX]\] /.exec(R),ne&&(ce=ne[0]!=="[ ] ",R=R.replace(/^\[[ xX]\] +/,""))),f.items.push({type:"list_item",raw:b,task:!!ne,checked:ce,loose:!1,text:R,tokens:[]}),f.raw+=b}f.items[f.items.length-1].raw=f.items[f.items.length-1].raw.trimEnd(),f.items[f.items.length-1].text=f.items[f.items.length-1].text.trimEnd(),f.raw=f.raw.trimEnd();for(let h=0;h<f.items.length;h++)if(this.lexer.state.top=!1,f.items[h].tokens=this.lexer.blockTokens(f.items[h].text,[]),!f.loose){const b=f.items[h].tokens.filter(G=>G.type==="space"),R=b.length>0&&b.some(G=>/\n.*\n/.test(G.raw));f.loose=R}if(f.loose)for(let h=0;h<f.items.length;h++)f.items[h].loose=!0;return f}}html(s){const c=this.rules.block.html.exec(s);if(c)return{type:"html",block:!0,raw:c[0],pre:c[1]==="pre"||c[1]==="script"||c[1]==="style",text:c[0]}}def(s){const c=this.rules.block.def.exec(s);if(c){const o=c[1].toLowerCase().replace(/\s+/g," "),u=c[2]?c[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",f=c[3]?c[3].substring(1,c[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):c[3];return{type:"def",tag:o,raw:c[0],href:u,title:f}}}table(s){const c=this.rules.block.table.exec(s);if(!c||!/[:|]/.test(c[2]))return;const o=Bf(c[1]),u=c[2].replace(/^\||\| *$/g,"").split("|"),f=c[3]&&c[3].trim()?c[3].replace(/\n[ \t]*$/,"").split(`
`):[],m={type:"table",raw:c[0],header:[],align:[],rows:[]};if(o.length===u.length){for(const S of u)/^ *-+: *$/.test(S)?m.align.push("right"):/^ *:-+: *$/.test(S)?m.align.push("center"):/^ *:-+ *$/.test(S)?m.align.push("left"):m.align.push(null);for(let S=0;S<o.length;S++)m.header.push({text:o[S],tokens:this.lexer.inline(o[S]),header:!0,align:m.align[S]});for(const S of f)m.rows.push(Bf(S,m.header.length).map((h,b)=>({text:h,tokens:this.lexer.inline(h),header:!1,align:m.align[b]})));return m}}lheading(s){const c=this.rules.block.lheading.exec(s);if(c)return{type:"heading",raw:c[0],depth:c[2].charAt(0)==="="?1:2,text:c[1],tokens:this.lexer.inline(c[1])}}paragraph(s){const c=this.rules.block.paragraph.exec(s);if(c){const o=c[1].charAt(c[1].length-1)===`
`?c[1].slice(0,-1):c[1];return{type:"paragraph",raw:c[0],text:o,tokens:this.lexer.inline(o)}}}text(s){const c=this.rules.block.text.exec(s);if(c)return{type:"text",raw:c[0],text:c[0],tokens:this.lexer.inline(c[0])}}escape(s){const c=this.rules.inline.escape.exec(s);if(c)return{type:"escape",raw:c[0],text:pa(c[1])}}tag(s){const c=this.rules.inline.tag.exec(s);if(c)return!this.lexer.state.inLink&&/^<a /i.test(c[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(c[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(c[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(c[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:c[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:c[0]}}link(s){const c=this.rules.inline.link.exec(s);if(c){const o=c[2].trim();if(!this.options.pedantic&&/^</.test(o)){if(!/>$/.test(o))return;const m=Cl(o.slice(0,-1),"\\");if((o.length-m.length)%2===0)return}else{const m=ng(c[2],"()");if(m>-1){const h=(c[0].indexOf("!")===0?5:4)+c[1].length+m;c[2]=c[2].substring(0,m),c[0]=c[0].substring(0,h).trim(),c[3]=""}}let u=c[2],f="";if(this.options.pedantic){const m=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(u);m&&(u=m[1],f=m[3])}else f=c[3]?c[3].slice(1,-1):"";return u=u.trim(),/^</.test(u)&&(this.options.pedantic&&!/>$/.test(o)?u=u.slice(1):u=u.slice(1,-1)),Hf(c,{href:u&&u.replace(this.rules.inline.anyPunctuation,"$1"),title:f&&f.replace(this.rules.inline.anyPunctuation,"$1")},c[0],this.lexer)}}reflink(s,c){let o;if((o=this.rules.inline.reflink.exec(s))||(o=this.rules.inline.nolink.exec(s))){const u=(o[2]||o[1]).replace(/\s+/g," "),f=c[u.toLowerCase()];if(!f){const m=o[0].charAt(0);return{type:"text",raw:m,text:m}}return Hf(o,f,o[0],this.lexer)}}emStrong(s,c,o=""){let u=this.rules.inline.emStrongLDelim.exec(s);if(!u||u[3]&&o.match(/[\p{L}\p{N}]/u))return;if(!(u[1]||u[2]||"")||!o||this.rules.inline.punctuation.exec(o)){const m=[...u[0]].length-1;let S,h,b=m,R=0;const G=u[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(G.lastIndex=0,c=c.slice(-1*s.length+m);(u=G.exec(c))!=null;){if(S=u[1]||u[2]||u[3]||u[4]||u[5]||u[6],!S)continue;if(h=[...S].length,u[3]||u[4]){b+=h;continue}else if((u[5]||u[6])&&m%3&&!((m+h)%3)){R+=h;continue}if(b-=h,b>0)continue;h=Math.min(h,h+b+R);const j=[...u[0]][0].length,V=s.slice(0,m+u.index+j+h);if(Math.min(m,h)%2){const ne=V.slice(1,-1);return{type:"em",raw:V,text:ne,tokens:this.lexer.inlineTokens(ne)}}const U=V.slice(2,-2);return{type:"strong",raw:V,text:U,tokens:this.lexer.inlineTokens(U)}}}}codespan(s){const c=this.rules.inline.code.exec(s);if(c){let o=c[2].replace(/\n/g," ");const u=/[^ ]/.test(o),f=/^ /.test(o)&&/ $/.test(o);return u&&f&&(o=o.substring(1,o.length-1)),o=pa(o,!0),{type:"codespan",raw:c[0],text:o}}}br(s){const c=this.rules.inline.br.exec(s);if(c)return{type:"br",raw:c[0]}}del(s){const c=this.rules.inline.del.exec(s);if(c)return{type:"del",raw:c[0],text:c[2],tokens:this.lexer.inlineTokens(c[2])}}autolink(s){const c=this.rules.inline.autolink.exec(s);if(c){let o,u;return c[2]==="@"?(o=pa(c[1]),u="mailto:"+o):(o=pa(c[1]),u=o),{type:"link",raw:c[0],text:o,href:u,tokens:[{type:"text",raw:o,text:o}]}}}url(s){var o;let c;if(c=this.rules.inline.url.exec(s)){let u,f;if(c[2]==="@")u=pa(c[0]),f="mailto:"+u;else{let m;do m=c[0],c[0]=((o=this.rules.inline._backpedal.exec(c[0]))==null?void 0:o[0])??"";while(m!==c[0]);u=pa(c[0]),c[1]==="www."?f="http://"+c[0]:f=c[0]}return{type:"link",raw:c[0],text:u,href:f,tokens:[{type:"text",raw:u,text:u}]}}}inlineText(s){const c=this.rules.inline.text.exec(s);if(c){let o;return this.lexer.state.inRawBlock?o=c[0]:o=pa(c[0]),{type:"text",raw:c[0],text:o}}}}const ig=/^(?: *(?:\n|$))+/,og=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,rg=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Dl=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,sg=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Pf=/(?:[*+-]|\d{1,9}[.)])/,Jf=ge(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Pf).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Ms=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,cg=/^[^\n]+/,Cs=/(?!\s*\])(?:\\.|[^\[\]\\])+/,ug=ge(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Cs).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),dg=ge(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Pf).getRegex(),ao="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Os=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,fg=ge("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Os).replace("tag",ao).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),$f=ge(Ms).replace("hr",Dl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ao).getRegex(),pg=ge(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",$f).getRegex(),qs={blockquote:pg,code:og,def:ug,fences:rg,heading:sg,hr:Dl,html:fg,lheading:Jf,list:dg,newline:ig,paragraph:$f,table:ql,text:cg},Yf=ge("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Dl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ao).getRegex(),mg={...qs,table:Yf,paragraph:ge(Ms).replace("hr",Dl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Yf).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ao).getRegex()},_g={...qs,html:ge(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Os).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ql,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ge(Ms).replace("hr",Dl).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Jf).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Ff=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,gg=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Wf=/^( {2,}|\\)\n(?!\s*$)/,hg=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ll="\\p{P}\\p{S}",bg=ge(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Ll).getRegex(),vg=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Eg=ge(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Ll).getRegex(),yg=ge("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Ll).getRegex(),xg=ge("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Ll).getRegex(),Tg=ge(/\\([punct])/,"gu").replace(/punct/g,Ll).getRegex(),Sg=ge(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Ag=ge(Os).replace("(?:-->|$)","-->").getRegex(),Rg=ge("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Ag).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Wi=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ng=ge(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Wi).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ep=ge(/^!?\[(label)\]\[(ref)\]/).replace("label",Wi).replace("ref",Cs).getRegex(),ap=ge(/^!?\[(ref)\](?:\[\])?/).replace("ref",Cs).getRegex(),Mg=ge("reflink|nolink(?!\\()","g").replace("reflink",ep).replace("nolink",ap).getRegex(),zs={_backpedal:ql,anyPunctuation:Tg,autolink:Sg,blockSkip:vg,br:Wf,code:gg,del:ql,emStrongLDelim:Eg,emStrongRDelimAst:yg,emStrongRDelimUnd:xg,escape:Ff,link:Ng,nolink:ap,punctuation:bg,reflink:ep,reflinkSearch:Mg,tag:Rg,text:hg,url:ql},Cg={...zs,link:ge(/^!?\[(label)\]\((.*?)\)/).replace("label",Wi).getRegex(),reflink:ge(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Wi).getRegex()},Ss={...zs,escape:ge(Ff).replace("])","~|])").getRegex(),url:ge(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Og={...Ss,br:ge(Wf).replace("{2,}","*").getRegex(),text:ge(Ss.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},$i={normal:qs,gfm:mg,pedantic:_g},Ol={normal:zs,gfm:Ss,breaks:Og,pedantic:Cg};class Da{constructor(s){Ee(this,"tokens");Ee(this,"options");Ee(this,"state");Ee(this,"tokenizer");Ee(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=s||Bt,this.options.tokenizer=this.options.tokenizer||new Fi,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const c={block:$i.normal,inline:Ol.normal};this.options.pedantic?(c.block=$i.pedantic,c.inline=Ol.pedantic):this.options.gfm&&(c.block=$i.gfm,this.options.breaks?c.inline=Ol.breaks:c.inline=Ol.gfm),this.tokenizer.rules=c}static get rules(){return{block:$i,inline:Ol}}static lex(s,c){return new Da(c).lex(s)}static lexInline(s,c){return new Da(c).inlineTokens(s)}lex(s){s=s.replace(/\r\n|\r/g,`
`),this.blockTokens(s,this.tokens);for(let c=0;c<this.inlineQueue.length;c++){const o=this.inlineQueue[c];this.inlineTokens(o.src,o.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(s,c=[],o=!1){this.options.pedantic?s=s.replace(/\t/g,"    ").replace(/^ +$/gm,""):s=s.replace(/^( *)(\t+)/gm,(S,h,b)=>h+"    ".repeat(b.length));let u,f,m;for(;s;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(S=>(u=S.call({lexer:this},s,c))?(s=s.substring(u.raw.length),c.push(u),!0):!1))){if(u=this.tokenizer.space(s)){s=s.substring(u.raw.length),u.raw.length===1&&c.length>0?c[c.length-1].raw+=`
`:c.push(u);continue}if(u=this.tokenizer.code(s)){s=s.substring(u.raw.length),f=c[c.length-1],f&&(f.type==="paragraph"||f.type==="text")?(f.raw+=`
`+u.raw,f.text+=`
`+u.text,this.inlineQueue[this.inlineQueue.length-1].src=f.text):c.push(u);continue}if(u=this.tokenizer.fences(s)){s=s.substring(u.raw.length),c.push(u);continue}if(u=this.tokenizer.heading(s)){s=s.substring(u.raw.length),c.push(u);continue}if(u=this.tokenizer.hr(s)){s=s.substring(u.raw.length),c.push(u);continue}if(u=this.tokenizer.blockquote(s)){s=s.substring(u.raw.length),c.push(u);continue}if(u=this.tokenizer.list(s)){s=s.substring(u.raw.length),c.push(u);continue}if(u=this.tokenizer.html(s)){s=s.substring(u.raw.length),c.push(u);continue}if(u=this.tokenizer.def(s)){s=s.substring(u.raw.length),f=c[c.length-1],f&&(f.type==="paragraph"||f.type==="text")?(f.raw+=`
`+u.raw,f.text+=`
`+u.raw,this.inlineQueue[this.inlineQueue.length-1].src=f.text):this.tokens.links[u.tag]||(this.tokens.links[u.tag]={href:u.href,title:u.title});continue}if(u=this.tokenizer.table(s)){s=s.substring(u.raw.length),c.push(u);continue}if(u=this.tokenizer.lheading(s)){s=s.substring(u.raw.length),c.push(u);continue}if(m=s,this.options.extensions&&this.options.extensions.startBlock){let S=1/0;const h=s.slice(1);let b;this.options.extensions.startBlock.forEach(R=>{b=R.call({lexer:this},h),typeof b=="number"&&b>=0&&(S=Math.min(S,b))}),S<1/0&&S>=0&&(m=s.substring(0,S+1))}if(this.state.top&&(u=this.tokenizer.paragraph(m))){f=c[c.length-1],o&&(f==null?void 0:f.type)==="paragraph"?(f.raw+=`
`+u.raw,f.text+=`
`+u.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=f.text):c.push(u),o=m.length!==s.length,s=s.substring(u.raw.length);continue}if(u=this.tokenizer.text(s)){s=s.substring(u.raw.length),f=c[c.length-1],f&&f.type==="text"?(f.raw+=`
`+u.raw,f.text+=`
`+u.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=f.text):c.push(u);continue}if(s){const S="Infinite loop on byte: "+s.charCodeAt(0);if(this.options.silent){console.error(S);break}else throw new Error(S)}}return this.state.top=!0,c}inline(s,c=[]){return this.inlineQueue.push({src:s,tokens:c}),c}inlineTokens(s,c=[]){let o,u,f,m=s,S,h,b;if(this.tokens.links){const R=Object.keys(this.tokens.links);if(R.length>0)for(;(S=this.tokenizer.rules.inline.reflinkSearch.exec(m))!=null;)R.includes(S[0].slice(S[0].lastIndexOf("[")+1,-1))&&(m=m.slice(0,S.index)+"["+"a".repeat(S[0].length-2)+"]"+m.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(S=this.tokenizer.rules.inline.blockSkip.exec(m))!=null;)m=m.slice(0,S.index)+"["+"a".repeat(S[0].length-2)+"]"+m.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(S=this.tokenizer.rules.inline.anyPunctuation.exec(m))!=null;)m=m.slice(0,S.index)+"++"+m.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;s;)if(h||(b=""),h=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(R=>(o=R.call({lexer:this},s,c))?(s=s.substring(o.raw.length),c.push(o),!0):!1))){if(o=this.tokenizer.escape(s)){s=s.substring(o.raw.length),c.push(o);continue}if(o=this.tokenizer.tag(s)){s=s.substring(o.raw.length),u=c[c.length-1],u&&o.type==="text"&&u.type==="text"?(u.raw+=o.raw,u.text+=o.text):c.push(o);continue}if(o=this.tokenizer.link(s)){s=s.substring(o.raw.length),c.push(o);continue}if(o=this.tokenizer.reflink(s,this.tokens.links)){s=s.substring(o.raw.length),u=c[c.length-1],u&&o.type==="text"&&u.type==="text"?(u.raw+=o.raw,u.text+=o.text):c.push(o);continue}if(o=this.tokenizer.emStrong(s,m,b)){s=s.substring(o.raw.length),c.push(o);continue}if(o=this.tokenizer.codespan(s)){s=s.substring(o.raw.length),c.push(o);continue}if(o=this.tokenizer.br(s)){s=s.substring(o.raw.length),c.push(o);continue}if(o=this.tokenizer.del(s)){s=s.substring(o.raw.length),c.push(o);continue}if(o=this.tokenizer.autolink(s)){s=s.substring(o.raw.length),c.push(o);continue}if(!this.state.inLink&&(o=this.tokenizer.url(s))){s=s.substring(o.raw.length),c.push(o);continue}if(f=s,this.options.extensions&&this.options.extensions.startInline){let R=1/0;const G=s.slice(1);let j;this.options.extensions.startInline.forEach(V=>{j=V.call({lexer:this},G),typeof j=="number"&&j>=0&&(R=Math.min(R,j))}),R<1/0&&R>=0&&(f=s.substring(0,R+1))}if(o=this.tokenizer.inlineText(f)){s=s.substring(o.raw.length),o.raw.slice(-1)!=="_"&&(b=o.raw.slice(-1)),h=!0,u=c[c.length-1],u&&u.type==="text"?(u.raw+=o.raw,u.text+=o.text):c.push(o);continue}if(s){const R="Infinite loop on byte: "+s.charCodeAt(0);if(this.options.silent){console.error(R);break}else throw new Error(R)}}return c}}class eo{constructor(s){Ee(this,"options");Ee(this,"parser");this.options=s||Bt}space(s){return""}code({text:s,lang:c,escaped:o}){var m;const u=(m=(c||"").match(/^\S*/))==null?void 0:m[0],f=s.replace(/\n$/,"")+`
`;return u?'<pre><code class="language-'+pa(u)+'">'+(o?f:pa(f,!0))+`</code></pre>
`:"<pre><code>"+(o?f:pa(f,!0))+`</code></pre>
`}blockquote({tokens:s}){return`<blockquote>
${this.parser.parse(s)}</blockquote>
`}html({text:s}){return s}heading({tokens:s,depth:c}){return`<h${c}>${this.parser.parseInline(s)}</h${c}>
`}hr(s){return`<hr>
`}list(s){const c=s.ordered,o=s.start;let u="";for(let S=0;S<s.items.length;S++){const h=s.items[S];u+=this.listitem(h)}const f=c?"ol":"ul",m=c&&o!==1?' start="'+o+'"':"";return"<"+f+m+`>
`+u+"</"+f+`>
`}listitem(s){let c="";if(s.task){const o=this.checkbox({checked:!!s.checked});s.loose?s.tokens.length>0&&s.tokens[0].type==="paragraph"?(s.tokens[0].text=o+" "+s.tokens[0].text,s.tokens[0].tokens&&s.tokens[0].tokens.length>0&&s.tokens[0].tokens[0].type==="text"&&(s.tokens[0].tokens[0].text=o+" "+s.tokens[0].tokens[0].text)):s.tokens.unshift({type:"text",raw:o+" ",text:o+" "}):c+=o+" "}return c+=this.parser.parse(s.tokens,!!s.loose),`<li>${c}</li>
`}checkbox({checked:s}){return"<input "+(s?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:s}){return`<p>${this.parser.parseInline(s)}</p>
`}table(s){let c="",o="";for(let f=0;f<s.header.length;f++)o+=this.tablecell(s.header[f]);c+=this.tablerow({text:o});let u="";for(let f=0;f<s.rows.length;f++){const m=s.rows[f];o="";for(let S=0;S<m.length;S++)o+=this.tablecell(m[S]);u+=this.tablerow({text:o})}return u&&(u=`<tbody>${u}</tbody>`),`<table>
<thead>
`+c+`</thead>
`+u+`</table>
`}tablerow({text:s}){return`<tr>
${s}</tr>
`}tablecell(s){const c=this.parser.parseInline(s.tokens),o=s.header?"th":"td";return(s.align?`<${o} align="${s.align}">`:`<${o}>`)+c+`</${o}>
`}strong({tokens:s}){return`<strong>${this.parser.parseInline(s)}</strong>`}em({tokens:s}){return`<em>${this.parser.parseInline(s)}</em>`}codespan({text:s}){return`<code>${s}</code>`}br(s){return"<br>"}del({tokens:s}){return`<del>${this.parser.parseInline(s)}</del>`}link({href:s,title:c,tokens:o}){const u=this.parser.parseInline(o),f=Vf(s);if(f===null)return u;s=f;let m='<a href="'+s+'"';return c&&(m+=' title="'+c+'"'),m+=">"+u+"</a>",m}image({href:s,title:c,text:o}){const u=Vf(s);if(u===null)return o;s=u;let f=`<img src="${s}" alt="${o}"`;return c&&(f+=` title="${c}"`),f+=">",f}text(s){return"tokens"in s&&s.tokens?this.parser.parseInline(s.tokens):s.text}}class Ds{strong({text:s}){return s}em({text:s}){return s}codespan({text:s}){return s}del({text:s}){return s}html({text:s}){return s}text({text:s}){return s}link({text:s}){return""+s}image({text:s}){return""+s}br(){return""}}class La{constructor(s){Ee(this,"options");Ee(this,"renderer");Ee(this,"textRenderer");this.options=s||Bt,this.options.renderer=this.options.renderer||new eo,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Ds}static parse(s,c){return new La(c).parse(s)}static parseInline(s,c){return new La(c).parseInline(s)}parse(s,c=!0){let o="";for(let u=0;u<s.length;u++){const f=s[u];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[f.type]){const S=f,h=this.options.extensions.renderers[S.type].call({parser:this},S);if(h!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(S.type)){o+=h||"";continue}}const m=f;switch(m.type){case"space":{o+=this.renderer.space(m);continue}case"hr":{o+=this.renderer.hr(m);continue}case"heading":{o+=this.renderer.heading(m);continue}case"code":{o+=this.renderer.code(m);continue}case"table":{o+=this.renderer.table(m);continue}case"blockquote":{o+=this.renderer.blockquote(m);continue}case"list":{o+=this.renderer.list(m);continue}case"html":{o+=this.renderer.html(m);continue}case"paragraph":{o+=this.renderer.paragraph(m);continue}case"text":{let S=m,h=this.renderer.text(S);for(;u+1<s.length&&s[u+1].type==="text";)S=s[++u],h+=`
`+this.renderer.text(S);c?o+=this.renderer.paragraph({type:"paragraph",raw:h,text:h,tokens:[{type:"text",raw:h,text:h}]}):o+=h;continue}default:{const S='Token with "'+m.type+'" type was not found.';if(this.options.silent)return console.error(S),"";throw new Error(S)}}}return o}parseInline(s,c){c=c||this.renderer;let o="";for(let u=0;u<s.length;u++){const f=s[u];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[f.type]){const S=this.options.extensions.renderers[f.type].call({parser:this},f);if(S!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(f.type)){o+=S||"";continue}}const m=f;switch(m.type){case"escape":{o+=c.text(m);break}case"html":{o+=c.html(m);break}case"link":{o+=c.link(m);break}case"image":{o+=c.image(m);break}case"strong":{o+=c.strong(m);break}case"em":{o+=c.em(m);break}case"codespan":{o+=c.codespan(m);break}case"br":{o+=c.br(m);break}case"del":{o+=c.del(m);break}case"text":{o+=c.text(m);break}default:{const S='Token with "'+m.type+'" type was not found.';if(this.options.silent)return console.error(S),"";throw new Error(S)}}}return o}}class zl{constructor(s){Ee(this,"options");this.options=s||Bt}preprocess(s){return s}postprocess(s){return s}processAllTokens(s){return s}}Ee(zl,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var $a,tp,As,np;class qg{constructor(...s){Mf(this,$a);Ee(this,"defaults",Ns());Ee(this,"options",this.setOptions);Ee(this,"parse",Rl(this,$a,As).call(this,Da.lex,La.parse));Ee(this,"parseInline",Rl(this,$a,As).call(this,Da.lexInline,La.parseInline));Ee(this,"Parser",La);Ee(this,"Renderer",eo);Ee(this,"TextRenderer",Ds);Ee(this,"Lexer",Da);Ee(this,"Tokenizer",Fi);Ee(this,"Hooks",zl);this.use(...s)}walkTokens(s,c){var u,f;let o=[];for(const m of s)switch(o=o.concat(c.call(this,m)),m.type){case"table":{const S=m;for(const h of S.header)o=o.concat(this.walkTokens(h.tokens,c));for(const h of S.rows)for(const b of h)o=o.concat(this.walkTokens(b.tokens,c));break}case"list":{const S=m;o=o.concat(this.walkTokens(S.items,c));break}default:{const S=m;(f=(u=this.defaults.extensions)==null?void 0:u.childTokens)!=null&&f[S.type]?this.defaults.extensions.childTokens[S.type].forEach(h=>{const b=S[h].flat(1/0);o=o.concat(this.walkTokens(b,c))}):S.tokens&&(o=o.concat(this.walkTokens(S.tokens,c)))}}return o}use(...s){const c=this.defaults.extensions||{renderers:{},childTokens:{}};return s.forEach(o=>{const u={...o};if(u.async=this.defaults.async||u.async||!1,o.extensions&&(o.extensions.forEach(f=>{if(!f.name)throw new Error("extension name required");if("renderer"in f){const m=c.renderers[f.name];m?c.renderers[f.name]=function(...S){let h=f.renderer.apply(this,S);return h===!1&&(h=m.apply(this,S)),h}:c.renderers[f.name]=f.renderer}if("tokenizer"in f){if(!f.level||f.level!=="block"&&f.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const m=c[f.level];m?m.unshift(f.tokenizer):c[f.level]=[f.tokenizer],f.start&&(f.level==="block"?c.startBlock?c.startBlock.push(f.start):c.startBlock=[f.start]:f.level==="inline"&&(c.startInline?c.startInline.push(f.start):c.startInline=[f.start]))}"childTokens"in f&&f.childTokens&&(c.childTokens[f.name]=f.childTokens)}),u.extensions=c),o.renderer){const f=this.defaults.renderer||new eo(this.defaults);for(const m in o.renderer){if(!(m in f))throw new Error(`renderer '${m}' does not exist`);if(["options","parser"].includes(m))continue;const S=m;let h=o.renderer[S];o.useNewRenderer||(h=Rl(this,$a,tp).call(this,h,S,f));const b=f[S];f[S]=(...R)=>{let G=h.apply(f,R);return G===!1&&(G=b.apply(f,R)),G||""}}u.renderer=f}if(o.tokenizer){const f=this.defaults.tokenizer||new Fi(this.defaults);for(const m in o.tokenizer){if(!(m in f))throw new Error(`tokenizer '${m}' does not exist`);if(["options","rules","lexer"].includes(m))continue;const S=m,h=o.tokenizer[S],b=f[S];f[S]=(...R)=>{let G=h.apply(f,R);return G===!1&&(G=b.apply(f,R)),G}}u.tokenizer=f}if(o.hooks){const f=this.defaults.hooks||new zl;for(const m in o.hooks){if(!(m in f))throw new Error(`hook '${m}' does not exist`);if(m==="options")continue;const S=m,h=o.hooks[S],b=f[S];zl.passThroughHooks.has(m)?f[S]=R=>{if(this.defaults.async)return Promise.resolve(h.call(f,R)).then(j=>b.call(f,j));const G=h.call(f,R);return b.call(f,G)}:f[S]=(...R)=>{let G=h.apply(f,R);return G===!1&&(G=b.apply(f,R)),G}}u.hooks=f}if(o.walkTokens){const f=this.defaults.walkTokens,m=o.walkTokens;u.walkTokens=function(S){let h=[];return h.push(m.call(this,S)),f&&(h=h.concat(f.call(this,S))),h}}this.defaults={...this.defaults,...u}}),this}setOptions(s){return this.defaults={...this.defaults,...s},this}lexer(s,c){return Da.lex(s,c??this.defaults)}parser(s,c){return La.parse(s,c??this.defaults)}}$a=new WeakSet,tp=function(s,c,o){switch(c){case"heading":return function(u){return!u.type||u.type!==c?s.apply(this,arguments):s.call(this,o.parser.parseInline(u.tokens),u.depth,ag(o.parser.parseInline(u.tokens,o.parser.textRenderer)))};case"code":return function(u){return!u.type||u.type!==c?s.apply(this,arguments):s.call(this,u.text,u.lang,!!u.escaped)};case"table":return function(u){if(!u.type||u.type!==c)return s.apply(this,arguments);let f="",m="";for(let h=0;h<u.header.length;h++)m+=this.tablecell({text:u.header[h].text,tokens:u.header[h].tokens,header:!0,align:u.align[h]});f+=this.tablerow({text:m});let S="";for(let h=0;h<u.rows.length;h++){const b=u.rows[h];m="";for(let R=0;R<b.length;R++)m+=this.tablecell({text:b[R].text,tokens:b[R].tokens,header:!1,align:u.align[R]});S+=this.tablerow({text:m})}return s.call(this,f,S)};case"blockquote":return function(u){if(!u.type||u.type!==c)return s.apply(this,arguments);const f=this.parser.parse(u.tokens);return s.call(this,f)};case"list":return function(u){if(!u.type||u.type!==c)return s.apply(this,arguments);const f=u.ordered,m=u.start,S=u.loose;let h="";for(let b=0;b<u.items.length;b++){const R=u.items[b],G=R.checked,j=R.task;let V="";if(R.task){const U=this.checkbox({checked:!!G});S?R.tokens.length>0&&R.tokens[0].type==="paragraph"?(R.tokens[0].text=U+" "+R.tokens[0].text,R.tokens[0].tokens&&R.tokens[0].tokens.length>0&&R.tokens[0].tokens[0].type==="text"&&(R.tokens[0].tokens[0].text=U+" "+R.tokens[0].tokens[0].text)):R.tokens.unshift({type:"text",text:U+" "}):V+=U+" "}V+=this.parser.parse(R.tokens,S),h+=this.listitem({type:"list_item",raw:V,text:V,task:j,checked:!!G,loose:S,tokens:R.tokens})}return s.call(this,h,f,m)};case"html":return function(u){return!u.type||u.type!==c?s.apply(this,arguments):s.call(this,u.text,u.block)};case"paragraph":return function(u){return!u.type||u.type!==c?s.apply(this,arguments):s.call(this,this.parser.parseInline(u.tokens))};case"escape":return function(u){return!u.type||u.type!==c?s.apply(this,arguments):s.call(this,u.text)};case"link":return function(u){return!u.type||u.type!==c?s.apply(this,arguments):s.call(this,u.href,u.title,this.parser.parseInline(u.tokens))};case"image":return function(u){return!u.type||u.type!==c?s.apply(this,arguments):s.call(this,u.href,u.title,u.text)};case"strong":return function(u){return!u.type||u.type!==c?s.apply(this,arguments):s.call(this,this.parser.parseInline(u.tokens))};case"em":return function(u){return!u.type||u.type!==c?s.apply(this,arguments):s.call(this,this.parser.parseInline(u.tokens))};case"codespan":return function(u){return!u.type||u.type!==c?s.apply(this,arguments):s.call(this,u.text)};case"del":return function(u){return!u.type||u.type!==c?s.apply(this,arguments):s.call(this,this.parser.parseInline(u.tokens))};case"text":return function(u){return!u.type||u.type!==c?s.apply(this,arguments):s.call(this,u.text)}}return s},As=function(s,c){return(o,u)=>{const f={...u},m={...this.defaults,...f};this.defaults.async===!0&&f.async===!1&&(m.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),m.async=!0);const S=Rl(this,$a,np).call(this,!!m.silent,!!m.async);if(typeof o>"u"||o===null)return S(new Error("marked(): input parameter is undefined or null"));if(typeof o!="string")return S(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(o)+", string expected"));if(m.hooks&&(m.hooks.options=m),m.async)return Promise.resolve(m.hooks?m.hooks.preprocess(o):o).then(h=>s(h,m)).then(h=>m.hooks?m.hooks.processAllTokens(h):h).then(h=>m.walkTokens?Promise.all(this.walkTokens(h,m.walkTokens)).then(()=>h):h).then(h=>c(h,m)).then(h=>m.hooks?m.hooks.postprocess(h):h).catch(S);try{m.hooks&&(o=m.hooks.preprocess(o));let h=s(o,m);m.hooks&&(h=m.hooks.processAllTokens(h)),m.walkTokens&&this.walkTokens(h,m.walkTokens);let b=c(h,m);return m.hooks&&(b=m.hooks.postprocess(b)),b}catch(h){return S(h)}}},np=function(s,c){return o=>{if(o.message+=`
Please report this to https://github.com/markedjs/marked.`,s){const u="<p>An error occurred:</p><pre>"+pa(o.message+"",!0)+"</pre>";return c?Promise.resolve(u):u}if(c)return Promise.reject(o);throw o}};const Vt=new qg;function fe(x,s){return Vt.parse(x,s)}fe.options=fe.setOptions=function(x){return Vt.setOptions(x),fe.defaults=Vt.defaults,Qf(fe.defaults),fe};fe.getDefaults=Ns;fe.defaults=Bt;fe.use=function(...x){return Vt.use(...x),fe.defaults=Vt.defaults,Qf(fe.defaults),fe};fe.walkTokens=function(x,s){return Vt.walkTokens(x,s)};fe.parseInline=Vt.parseInline;fe.Parser=La;fe.parser=La.parse;fe.Renderer=eo;fe.TextRenderer=Ds;fe.Lexer=Da;fe.lexer=Da.lex;fe.Tokenizer=Fi;fe.Hooks=zl;fe.parse=fe;fe.options;fe.setOptions;fe.use;fe.walkTokens;fe.parseInline;La.parse;Da.lex;const zg=({isOpen:x,onClose:s,title:c,content:o})=>{if(!x)return null;const u=fe.parse(o);return z.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50 transition-opacity duration-300 animate-fadeIn",onClick:s,children:z.jsxs("div",{className:"bg-slate-800 p-6 md:p-8 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto relative transform transition-all duration-300 animate-scaleUp",onClick:f=>f.stopPropagation(),children:[z.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-slate-400 hover:text-sky-400 transition-colors p-1 rounded-full hover:bg-slate-700","aria-label":"Cerrar modal",children:z.jsx(Z_,{className:"w-6 h-6"})}),z.jsx("h3",{className:"text-2xl font-semibold text-sky-400 mb-6 pr-8",children:c}),z.jsx("div",{className:"prose prose-sm prose-invert max-w-none markdown-content",dangerouslySetInnerHTML:{__html:u}}),z.jsx("button",{onClick:s,className:"mt-8 bg-sky-500 hover:bg-sky-600 text-white font-medium py-2 px-4 rounded-md transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-sky-400 focus:ring-opacity-75",children:"Entendido"})]})})},Dg=()=>{var V;const[x,s]=Ue.useState(((V=jf[0])==null?void 0:V.id)||null),[c,o]=Ue.useState(null),[u,f]=Ue.useState(!0),m=Ue.useMemo(()=>jf,[]),S=U=>{s(U)},h=U=>{o({title:U.name,explanation:U.explanation})},b=U=>{u&&o({title:U.label,explanation:U.explanation})},R=()=>{o(null)},G=()=>{f(U=>!U)},j=m.find(U=>U.id===x);return z.jsxs("div",{className:"flex flex-col h-screen font-sans bg-slate-900 text-slate-100",children:[z.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[z.jsx(B_,{scripts:m,selectedScriptId:x,onSelectScript:S}),z.jsx("main",{className:"flex-1 p-6 md:p-10 overflow-y-auto bg-slate-800/50 shadow-lg",children:j?z.jsx(J_,{script:j,onSelectConcept:h,onSelectCodeSegment:b,interactiveSegmentsEnabled:u,onToggleInteractiveSegments:G}):z.jsx("div",{className:"flex items-center justify-center h-full",children:z.jsxs("div",{className:"text-center p-8 bg-slate-800 rounded-lg shadow-xl",children:[z.jsx("h1",{className:"text-3xl font-bold text-sky-400 mb-4",children:"Bienvenido al Explicador de Scripts DOF"}),z.jsx("p",{className:"text-slate-300 text-lg",children:"Selecciona un script de la barra lateral para ver su explicacin detallada, conceptos clave y cdigo fuente."}),z.jsx("p",{className:"mt-6 text-sm text-slate-400",children:"Esta herramienta interactiva est diseada para ayudarte a comprender cada paso del proyecto DOF Scraper y RAG."})]})})})]}),c&&z.jsx(zg,{isOpen:!!c,onClose:R,title:c.title,content:c.explanation}),z.jsxs("footer",{className:"bg-slate-950 text-center py-3 border-t border-slate-700 text-xs text-slate-400",children:[z.jsx("a",{href:"https://abxda.medium.com/",target:"_blank",rel:"noopener noreferrer",className:"hover:text-sky-400 transition-colors",children:"@abxda"}),z.jsx("span",{className:"mx-1",children:"x"}),z.jsx("span",{children:"@gemini"})]})]})},lp=document.getElementById("root");if(!lp)throw new Error("Could not find root element to mount to");const Lg=V_.createRoot(lp);Lg.render(z.jsx(D_.StrictMode,{children:z.jsx(Dg,{})}));

  </script>
</head>
<body class="bg-slate-900">
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div id="root"></div>
</body>
</html><link rel="stylesheet" href="index.css">
